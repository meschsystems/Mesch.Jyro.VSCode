"use strict";var ad=Object.create;var ws=Object.defineProperty;var cd=Object.getOwnPropertyDescriptor;var ud=Object.getOwnPropertyNames;var ld=Object.getPrototypeOf,dd=Object.prototype.hasOwnProperty;var O=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var fd=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ud(t))!dd.call(e,i)&&i!==n&&ws(e,i,{get:()=>t[i],enumerable:!(r=cd(t,i))||r.enumerable});return e};var Gn=(e,t,n)=>(n=e!=null?ad(ld(e)):{},fd(t||!e||!e.__esModule?ws(n,"default",{value:e,enumerable:!0}):n,e));var Xn=O(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.thenable=he.typedArray=he.stringArray=he.array=he.func=he.error=he.number=he.string=he.boolean=void 0;function hd(e){return e===!0||e===!1}he.boolean=hd;function Ss(e){return typeof e=="string"||e instanceof String}he.string=Ss;function pd(e){return typeof e=="number"||e instanceof Number}he.number=pd;function md(e){return e instanceof Error}he.error=md;function Ps(e){return typeof e=="function"}he.func=Ps;function Cs(e){return Array.isArray(e)}he.array=Cs;function gd(e){return Cs(e)&&e.every(t=>Ss(t))}he.stringArray=gd;function yd(e,t){return Array.isArray(e)&&e.every(t)}he.typedArray=yd;function bd(e){return e&&Ps(e.then)}he.thenable=bd});var Jt=O(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.stringArray=ve.array=ve.func=ve.error=ve.number=ve.string=ve.boolean=void 0;function vd(e){return e===!0||e===!1}ve.boolean=vd;function ks(e){return typeof e=="string"||e instanceof String}ve.string=ks;function Td(e){return typeof e=="number"||e instanceof Number}ve.number=Td;function _d(e){return e instanceof Error}ve.error=_d;function Dd(e){return typeof e=="function"}ve.func=Dd;function qs(e){return Array.isArray(e)}ve.array=qs;function Rd(e){return qs(e)&&e.every(t=>ks(t))}ve.stringArray=Rd});var Ji=O(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.Message=M.NotificationType9=M.NotificationType8=M.NotificationType7=M.NotificationType6=M.NotificationType5=M.NotificationType4=M.NotificationType3=M.NotificationType2=M.NotificationType1=M.NotificationType0=M.NotificationType=M.RequestType9=M.RequestType8=M.RequestType7=M.RequestType6=M.RequestType5=M.RequestType4=M.RequestType3=M.RequestType2=M.RequestType1=M.RequestType=M.RequestType0=M.AbstractMessageSignature=M.ParameterStructures=M.ResponseError=M.ErrorCodes=void 0;var St=Jt(),gi;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3})(gi||(M.ErrorCodes=gi={}));var yi=class e extends Error{constructor(t,n,r){super(n),this.code=St.number(t)?t:gi.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,e.prototype)}toJson(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),t}};M.ResponseError=yi;var Se=class e{constructor(t){this.kind=t}static is(t){return t===e.auto||t===e.byName||t===e.byPosition}toString(){return this.kind}};M.ParameterStructures=Se;Se.auto=new Se("auto");Se.byPosition=new Se("byPosition");Se.byName=new Se("byName");var ie=class{constructor(t,n){this.method=t,this.numberOfParams=n}get parameterStructures(){return Se.auto}};M.AbstractMessageSignature=ie;var bi=class extends ie{constructor(t){super(t,0)}};M.RequestType0=bi;var vi=class extends ie{constructor(t,n=Se.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.RequestType=vi;var Ti=class extends ie{constructor(t,n=Se.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.RequestType1=Ti;var _i=class extends ie{constructor(t){super(t,2)}};M.RequestType2=_i;var Di=class extends ie{constructor(t){super(t,3)}};M.RequestType3=Di;var Ri=class extends ie{constructor(t){super(t,4)}};M.RequestType4=Ri;var wi=class extends ie{constructor(t){super(t,5)}};M.RequestType5=wi;var Si=class extends ie{constructor(t){super(t,6)}};M.RequestType6=Si;var Pi=class extends ie{constructor(t){super(t,7)}};M.RequestType7=Pi;var Ci=class extends ie{constructor(t){super(t,8)}};M.RequestType8=Ci;var ki=class extends ie{constructor(t){super(t,9)}};M.RequestType9=ki;var qi=class extends ie{constructor(t,n=Se.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.NotificationType=qi;var Ni=class extends ie{constructor(t){super(t,0)}};M.NotificationType0=Ni;var Oi=class extends ie{constructor(t,n=Se.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.NotificationType1=Oi;var xi=class extends ie{constructor(t){super(t,2)}};M.NotificationType2=xi;var Ei=class extends ie{constructor(t){super(t,3)}};M.NotificationType3=Ei;var Mi=class extends ie{constructor(t){super(t,4)}};M.NotificationType4=Mi;var ji=class extends ie{constructor(t){super(t,5)}};M.NotificationType5=ji;var Ii=class extends ie{constructor(t){super(t,6)}};M.NotificationType6=Ii;var Ai=class extends ie{constructor(t){super(t,7)}};M.NotificationType7=Ai;var Fi=class extends ie{constructor(t){super(t,8)}};M.NotificationType8=Fi;var Li=class extends ie{constructor(t){super(t,9)}};M.NotificationType9=Li;var Ns;(function(e){function t(i){let a=i;return a&&St.string(a.method)&&(St.string(a.id)||St.number(a.id))}e.isRequest=t;function n(i){let a=i;return a&&St.string(a.method)&&i.id===void 0}e.isNotification=n;function r(i){let a=i;return a&&(a.result!==void 0||!!a.error)&&(St.string(a.id)||St.number(a.id)||a.id===null)}e.isResponse=r})(Ns||(M.Message=Ns={}))});var Hi=O(at=>{"use strict";var Os;Object.defineProperty(at,"__esModule",{value:!0});at.LRUCache=at.LinkedMap=at.Touch=void 0;var Te;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(Te||(at.Touch=Te={}));var Kn=class{constructor(){this[Os]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(t){return this._map.has(t)}get(t,n=Te.None){let r=this._map.get(t);if(r)return n!==Te.None&&this.touch(r,n),r.value}set(t,n,r=Te.None){let i=this._map.get(t);if(i)i.value=n,r!==Te.None&&this.touch(i,r);else{switch(i={key:t,value:n,next:void 0,previous:void 0},r){case Te.None:this.addItemLast(i);break;case Te.First:this.addItemFirst(i);break;case Te.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(t,i),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){let n=this._map.get(t);if(n)return this._map.delete(t),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,n){let r=this._state,i=this._head;for(;i;){if(n?t.bind(n)(i.value,i.key,this):t(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(Os=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>t;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{let n=t.next,r=t.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}t.next=void 0,t.previous=void 0,this._state++}touch(t,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Te.First&&n!==Te.Last)){if(n===Te.First){if(t===this._head)return;let r=t.next,i=t.previous;t===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(n===Te.Last){if(t===this._tail)return;let r=t.next,i=t.previous;t===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){let t=[];return this.forEach((n,r)=>{t.push([r,n])}),t}fromJSON(t){this.clear();for(let[n,r]of t)this.set(n,r)}};at.LinkedMap=Kn;var Wi=class extends Kn{constructor(t,n=1){super(),this._limit=t,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,n=Te.AsNew){return super.get(t,n)}peek(t){return super.get(t,Te.None)}set(t,n){return super.set(t,n,Te.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};at.LRUCache=Wi});var Es=O(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.Disposable=void 0;var xs;(function(e){function t(n){return{dispose:n}}e.create=t})(xs||(Qn.Disposable=xs={}))});var ct=O(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});var Ui;function $i(){if(Ui===void 0)throw new Error("No runtime abstraction layer installed");return Ui}(function(e){function t(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Ui=n}e.install=t})($i||($i={}));zi.default=$i});var Ht=O(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.Emitter=Wt.Event=void 0;var wd=ct(),Ms;(function(e){let t={dispose(){}};e.None=function(){return t}})(Ms||(Wt.Event=Ms={}));var Bi=class{add(t,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(t,n)})}remove(t,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,a=this._callbacks.length;i<a;i++)if(this._callbacks[i]===t)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let a=0,d=r.length;a<d;a++)try{n.push(r[a].apply(i[a],t))}catch(b){(0,wd.default)().console.error(b)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Zn=class e{constructor(t){this._options=t}get event(){return this._event||(this._event=(t,n,r)=>{this._callbacks||(this._callbacks=new Bi),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,n);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(t,n),i.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Wt.Emitter=Zn;Zn._noop=function(){}});var tr=O(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.CancellationTokenSource=Ut.CancellationToken=void 0;var Sd=ct(),Pd=Jt(),Vi=Ht(),Yn;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Vi.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Vi.Event.None});function t(n){let r=n;return r&&(r===e.None||r===e.Cancelled||Pd.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}e.is=t})(Yn||(Ut.CancellationToken=Yn={}));var Cd=Object.freeze(function(e,t){let n=(0,Sd.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}),er=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Cd:(this._emitter||(this._emitter=new Vi.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Gi=class{get token(){return this._token||(this._token=new er),this._token}cancel(){this._token?this._token.cancel():this._token=Yn.Cancelled}dispose(){this._token?this._token instanceof er&&this._token.dispose():this._token=Yn.None}};Ut.CancellationTokenSource=Gi});var js=O($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.SharedArrayReceiverStrategy=$t.SharedArraySenderStrategy=void 0;var kd=tr(),gn;(function(e){e.Continue=0,e.Cancelled=1})(gn||(gn={}));var Xi=class{constructor(){this.buffers=new Map}enableCancellation(t){if(t.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=gn.Continue,this.buffers.set(t.id,n),t.$cancellationData=n}async sendCancellation(t,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,gn.Cancelled)}cleanup(t){this.buffers.delete(t)}dispose(){this.buffers.clear()}};$t.SharedArraySenderStrategy=Xi;var Ki=class{constructor(t){this.data=new Int32Array(t,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===gn.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Qi=class{constructor(t){this.token=new Ki(t)}cancel(){}dispose(){}},Zi=class{constructor(){this.kind="request"}createCancellationTokenSource(t){let n=t.$cancellationData;return n===void 0?new kd.CancellationTokenSource:new Qi(n)}};$t.SharedArrayReceiverStrategy=Zi});var eo=O(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.Semaphore=void 0;var qd=ct(),Yi=class{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((n,r)=>{this._waiting.push({thunk:t,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,qd.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=t.thunk();n instanceof Promise?n.then(r=>{this._active--,t.resolve(r),this.runNext()},r=>{this._active--,t.reject(r),this.runNext()}):(this._active--,t.resolve(n),this.runNext())}catch(n){this._active--,t.reject(n),this.runNext()}}};nr.Semaphore=Yi});var As=O(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.ReadableStreamMessageReader=ut.AbstractMessageReader=ut.MessageReader=void 0;var no=ct(),zt=Jt(),to=Ht(),Nd=eo(),Is;(function(e){function t(n){let r=n;return r&&zt.func(r.listen)&&zt.func(r.dispose)&&zt.func(r.onError)&&zt.func(r.onClose)&&zt.func(r.onPartialMessage)}e.is=t})(Is||(ut.MessageReader=Is={}));var rr=class{constructor(){this.errorEmitter=new to.Emitter,this.closeEmitter=new to.Emitter,this.partialMessageEmitter=new to.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t){this.errorEmitter.fire(this.asError(t))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(t){this.partialMessageEmitter.fire(t)}asError(t){return t instanceof Error?t:new Error(`Reader received error. Reason: ${zt.string(t.message)?t.message:"unknown"}`)}};ut.AbstractMessageReader=rr;var ro;(function(e){function t(n){let r,i,a,d=new Map,b,S=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(a=n.contentDecoder,d.set(a.name,a)),n.contentDecoders!==void 0)for(let D of n.contentDecoders)d.set(D.name,D);if(n.contentTypeDecoder!==void 0&&(b=n.contentTypeDecoder,S.set(b.name,b)),n.contentTypeDecoders!==void 0)for(let D of n.contentTypeDecoders)S.set(D.name,D)}return b===void 0&&(b=(0,no.default)().applicationJson.decoder,S.set(b.name,b)),{charset:r,contentDecoder:a,contentDecoders:d,contentTypeDecoder:b,contentTypeDecoders:S}}e.fromOptions=t})(ro||(ro={}));var io=class extends rr{constructor(t,n){super(),this.readable=t,this.options=ro.fromOptions(n),this.buffer=(0,no.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new Nd.Semaphore(1)}set partialMessageTimeout(t){this._partialMessageTimeout=t}get partialMessageTimeout(){return this._partialMessageTimeout}listen(t){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(t){try{for(this.buffer.append(t);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let a=parseInt(i);if(isNaN(a)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=a}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,no.default)().timer.setTimeout((t,n)=>{this.partialMessageTimer=void 0,t===this.messageToken&&(this.firePartialMessage({messageToken:t,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};ut.ReadableStreamMessageReader=io});var Hs=O(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.WriteableStreamMessageWriter=lt.AbstractMessageWriter=lt.MessageWriter=void 0;var Fs=ct(),yn=Jt(),Od=eo(),Ls=Ht(),xd="Content-Length: ",Js=`\r
`,Ws;(function(e){function t(n){let r=n;return r&&yn.func(r.dispose)&&yn.func(r.onClose)&&yn.func(r.onError)&&yn.func(r.write)}e.is=t})(Ws||(lt.MessageWriter=Ws={}));var ir=class{constructor(){this.errorEmitter=new Ls.Emitter,this.closeEmitter=new Ls.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t,n,r){this.errorEmitter.fire([this.asError(t),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(t){return t instanceof Error?t:new Error(`Writer received error. Reason: ${yn.string(t.message)?t.message:"unknown"}`)}};lt.AbstractMessageWriter=ir;var oo;(function(e){function t(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Fs.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Fs.default)().applicationJson.encoder}}e.fromOptions=t})(oo||(oo={}));var so=class extends ir{constructor(t,n){super(),this.writable=t,this.options=oo.fromOptions(n),this.errorCount=0,this.writeSemaphore=new Od.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(t){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(t,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(xd,r.byteLength.toString(),Js),i.push(Js),this.doWrite(t,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(t,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,t),Promise.reject(i)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){this.writable.end()}};lt.WriteableStreamMessageWriter=so});var Us=O(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.AbstractMessageBuffer=void 0;var Ed=13,Md=10,jd=`\r
`,ao=class{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(t){let n=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(t=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,a=0;e:for(;r<this._chunks.length;){let D=this._chunks[r];for(i=0;i<D.length;){switch(D[i]){case Ed:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case Md:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}a+=D.byteLength,r++}if(n!==4)return;let d=this._read(a+i),b=new Map,S=this.toString(d,"ascii").split(jd);if(S.length<2)return b;for(let D=0;D<S.length-2;D++){let w=S[D],C=w.indexOf(":");if(C===-1)throw new Error(`Message header must separate key and value using ':'
${w}`);let E=w.substr(0,C),I=w.substr(C+1).trim();b.set(t?E.toLowerCase():E,I)}return b}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){let a=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(a)}if(this._chunks[0].byteLength>t){let a=this._chunks[0],d=this.asNative(a,t);return this._chunks[0]=a.slice(t),this._totalLength-=t,d}let n=this.allocNative(t),r=0,i=0;for(;t>0;){let a=this._chunks[i];if(a.byteLength>t){let d=a.slice(0,t);n.set(d,r),r+=t,this._chunks[i]=a.slice(t),this._totalLength-=t,t-=t}else n.set(a,r),r+=a.byteLength,this._chunks.shift(),this._totalLength-=a.byteLength,t-=a.byteLength}return n}};or.AbstractMessageBuffer=ao});var Gs=O(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.createMessageConnection=L.ConnectionOptions=L.MessageStrategy=L.CancellationStrategy=L.CancellationSenderStrategy=L.CancellationReceiverStrategy=L.RequestCancellationReceiverStrategy=L.IdCancellationReceiverStrategy=L.ConnectionStrategy=L.ConnectionError=L.ConnectionErrors=L.LogTraceNotification=L.SetTraceNotification=L.TraceFormat=L.TraceValues=L.Trace=L.NullLogger=L.ProgressType=L.ProgressToken=void 0;var $s=ct(),ae=Jt(),j=Ji(),zs=Hi(),bn=Ht(),co=tr(),_n;(function(e){e.type=new j.NotificationType("$/cancelRequest")})(_n||(_n={}));var uo;(function(e){function t(n){return typeof n=="string"||typeof n=="number"}e.is=t})(uo||(L.ProgressToken=uo={}));var vn;(function(e){e.type=new j.NotificationType("$/progress")})(vn||(vn={}));var lo=class{constructor(){}};L.ProgressType=lo;var fo;(function(e){function t(n){return ae.func(n)}e.is=t})(fo||(fo={}));L.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var X;(function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"})(X||(L.Trace=X={}));var Bs;(function(e){e.Off="off",e.Messages="messages",e.Compact="compact",e.Verbose="verbose"})(Bs||(L.TraceValues=Bs={}));(function(e){function t(r){if(!ae.string(r))return e.Off;switch(r=r.toLowerCase(),r){case"off":return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=t;function n(r){switch(r){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}e.toString=n})(X||(L.Trace=X={}));var Oe;(function(e){e.Text="text",e.JSON="json"})(Oe||(L.TraceFormat=Oe={}));(function(e){function t(n){return ae.string(n)?(n=n.toLowerCase(),n==="json"?e.JSON:e.Text):e.Text}e.fromString=t})(Oe||(L.TraceFormat=Oe={}));var ho;(function(e){e.type=new j.NotificationType("$/setTrace")})(ho||(L.SetTraceNotification=ho={}));var sr;(function(e){e.type=new j.NotificationType("$/logTrace")})(sr||(L.LogTraceNotification=sr={}));var Tn;(function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"})(Tn||(L.ConnectionErrors=Tn={}));var Bt=class e extends Error{constructor(t,n){super(n),this.code=t,Object.setPrototypeOf(this,e.prototype)}};L.ConnectionError=Bt;var po;(function(e){function t(n){let r=n;return r&&ae.func(r.cancelUndispatched)}e.is=t})(po||(L.ConnectionStrategy=po={}));var ar;(function(e){function t(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&ae.func(r.createCancellationTokenSource)&&(r.dispose===void 0||ae.func(r.dispose))}e.is=t})(ar||(L.IdCancellationReceiverStrategy=ar={}));var mo;(function(e){function t(n){let r=n;return r&&r.kind==="request"&&ae.func(r.createCancellationTokenSource)&&(r.dispose===void 0||ae.func(r.dispose))}e.is=t})(mo||(L.RequestCancellationReceiverStrategy=mo={}));var cr;(function(e){e.Message=Object.freeze({createCancellationTokenSource(n){return new co.CancellationTokenSource}});function t(n){return ar.is(n)||mo.is(n)}e.is=t})(cr||(L.CancellationReceiverStrategy=cr={}));var ur;(function(e){e.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(_n.type,{id:r})},cleanup(n){}});function t(n){let r=n;return r&&ae.func(r.sendCancellation)&&ae.func(r.cleanup)}e.is=t})(ur||(L.CancellationSenderStrategy=ur={}));var lr;(function(e){e.Message=Object.freeze({receiver:cr.Message,sender:ur.Message});function t(n){let r=n;return r&&cr.is(r.receiver)&&ur.is(r.sender)}e.is=t})(lr||(L.CancellationStrategy=lr={}));var dr;(function(e){function t(n){let r=n;return r&&ae.func(r.handleMessage)}e.is=t})(dr||(L.MessageStrategy=dr={}));var Vs;(function(e){function t(n){let r=n;return r&&(lr.is(r.cancellationStrategy)||po.is(r.connectionStrategy)||dr.is(r.messageStrategy))}e.is=t})(Vs||(L.ConnectionOptions=Vs={}));var $e;(function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"})($e||($e={}));function Id(e,t,n,r){let i=n!==void 0?n:L.NullLogger,a=0,d=0,b=0,S="2.0",D,w=new Map,C,E=new Map,I=new Map,W,H=new zs.LinkedMap,Z=new Map,$=new Set,v=new Map,y=X.Off,k=Oe.Text,J,ee=$e.New,ce=new bn.Emitter,Je=new bn.Emitter,_t=new bn.Emitter,it=new bn.Emitter,ot=new bn.Emitter,we=r&&r.cancellationStrategy?r.cancellationStrategy:lr.Message;function Et(f){if(f===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+f.toString()}function Mt(f){return f===null?"res-unknown-"+(++b).toString():"res-"+f.toString()}function xn(){return"not-"+(++d).toString()}function mi(f,_){j.Message.isRequest(_)?f.set(Et(_.id),_):j.Message.isResponse(_)?f.set(Mt(_.id),_):f.set(xn(),_)}function En(f){}function ln(){return ee===$e.Listening}function Dt(){return ee===$e.Closed}function Qe(){return ee===$e.Disposed}function jt(){(ee===$e.New||ee===$e.Listening)&&(ee=$e.Closed,Je.fire(void 0))}function Rt(f){ce.fire([f,void 0,void 0])}function Mn(f){ce.fire(f)}e.onClose(jt),e.onError(Rt),t.onClose(jt),t.onError(Mn);function dn(){W||H.size===0||(W=(0,$s.default)().timer.setImmediate(()=>{W=void 0,jn()}))}function fn(f){j.Message.isRequest(f)?An(f):j.Message.isNotification(f)?Ln(f):j.Message.isResponse(f)?Fn(f):It(f)}function jn(){if(H.size===0)return;let f=H.shift();try{let _=r?.messageStrategy;dr.is(_)?_.handleMessage(f,fn):fn(f)}finally{dn()}}let In=f=>{try{if(j.Message.isNotification(f)&&f.method===_n.type.method){let _=f.params.id,q=Et(_),x=H.get(q);if(j.Message.isRequest(x)){let K=r?.connectionStrategy,re=K&&K.cancelUndispatched?K.cancelUndispatched(x,En):void 0;if(re&&(re.error!==void 0||re.result!==void 0)){H.delete(q),v.delete(_),re.id=x.id,wt(re,f.method,Date.now()),t.write(re).catch(()=>i.error("Sending response for canceled message failed."));return}}let Q=v.get(_);if(Q!==void 0){Q.cancel(),At(f);return}else $.add(_)}mi(H,f)}finally{dn()}};function An(f){if(Qe())return;function _(U,Y,V){let ue={jsonrpc:S,id:f.id};U instanceof j.ResponseError?ue.error=U.toJson():ue.result=U===void 0?null:U,wt(ue,Y,V),t.write(ue).catch(()=>i.error("Sending response failed."))}function q(U,Y,V){let ue={jsonrpc:S,id:f.id,error:U.toJson()};wt(ue,Y,V),t.write(ue).catch(()=>i.error("Sending response failed."))}function x(U,Y,V){U===void 0&&(U=null);let ue={jsonrpc:S,id:f.id,result:U};wt(ue,Y,V),t.write(ue).catch(()=>i.error("Sending response failed."))}Hn(f);let Q=w.get(f.method),K,re;Q&&(K=Q.type,re=Q.handler);let oe=Date.now();if(re||D){let U=f.id??String(Date.now()),Y=ar.is(we.receiver)?we.receiver.createCancellationTokenSource(U):we.receiver.createCancellationTokenSource(f);f.id!==null&&$.has(f.id)&&Y.cancel(),f.id!==null&&v.set(U,Y);try{let V;if(re)if(f.params===void 0){if(K!==void 0&&K.numberOfParams!==0){q(new j.ResponseError(j.ErrorCodes.InvalidParams,`Request ${f.method} defines ${K.numberOfParams} params but received none.`),f.method,oe);return}V=re(Y.token)}else if(Array.isArray(f.params)){if(K!==void 0&&K.parameterStructures===j.ParameterStructures.byName){q(new j.ResponseError(j.ErrorCodes.InvalidParams,`Request ${f.method} defines parameters by name but received parameters by position`),f.method,oe);return}V=re(...f.params,Y.token)}else{if(K!==void 0&&K.parameterStructures===j.ParameterStructures.byPosition){q(new j.ResponseError(j.ErrorCodes.InvalidParams,`Request ${f.method} defines parameters by position but received parameters by name`),f.method,oe);return}V=re(f.params,Y.token)}else D&&(V=D(f.method,f.params,Y.token));let ue=V;V?ue.then?ue.then(ge=>{v.delete(U),_(ge,f.method,oe)},ge=>{v.delete(U),ge instanceof j.ResponseError?q(ge,f.method,oe):ge&&ae.string(ge.message)?q(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${f.method} failed with message: ${ge.message}`),f.method,oe):q(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${f.method} failed unexpectedly without providing any details.`),f.method,oe)}):(v.delete(U),_(V,f.method,oe)):(v.delete(U),x(V,f.method,oe))}catch(V){v.delete(U),V instanceof j.ResponseError?_(V,f.method,oe):V&&ae.string(V.message)?q(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${f.method} failed with message: ${V.message}`),f.method,oe):q(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${f.method} failed unexpectedly without providing any details.`),f.method,oe)}}else q(new j.ResponseError(j.ErrorCodes.MethodNotFound,`Unhandled method ${f.method}`),f.method,oe)}function Fn(f){if(!Qe())if(f.id===null)f.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(f.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let _=f.id,q=Z.get(_);if(Un(f,q),q!==void 0){Z.delete(_);try{if(f.error){let x=f.error;q.reject(new j.ResponseError(x.code,x.message,x.data))}else if(f.result!==void 0)q.resolve(f.result);else throw new Error("Should never happen.")}catch(x){x.message?i.error(`Response handler '${q.method}' failed with message: ${x.message}`):i.error(`Response handler '${q.method}' failed unexpectedly.`)}}}}function Ln(f){if(Qe())return;let _,q;if(f.method===_n.type.method){let x=f.params.id;$.delete(x),At(f);return}else{let x=E.get(f.method);x&&(q=x.handler,_=x.type)}if(q||C)try{if(At(f),q)if(f.params===void 0)_!==void 0&&_.numberOfParams!==0&&_.parameterStructures!==j.ParameterStructures.byName&&i.error(`Notification ${f.method} defines ${_.numberOfParams} params but received none.`),q();else if(Array.isArray(f.params)){let x=f.params;f.method===vn.type.method&&x.length===2&&uo.is(x[0])?q({token:x[0],value:x[1]}):(_!==void 0&&(_.parameterStructures===j.ParameterStructures.byName&&i.error(`Notification ${f.method} defines parameters by name but received parameters by position`),_.numberOfParams!==f.params.length&&i.error(`Notification ${f.method} defines ${_.numberOfParams} params but received ${x.length} arguments`)),q(...x))}else _!==void 0&&_.parameterStructures===j.ParameterStructures.byPosition&&i.error(`Notification ${f.method} defines parameters by position but received parameters by name`),q(f.params);else C&&C(f.method,f.params)}catch(x){x.message?i.error(`Notification handler '${f.method}' failed with message: ${x.message}`):i.error(`Notification handler '${f.method}' failed unexpectedly.`)}else _t.fire(f)}function It(f){if(!f){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(f,null,4)}`);let _=f;if(ae.string(_.id)||ae.number(_.id)){let q=_.id,x=Z.get(q);x&&x.reject(new Error("The received response has neither a result nor an error property."))}}function We(f){if(f!=null)switch(y){case X.Verbose:return JSON.stringify(f,null,4);case X.Compact:return JSON.stringify(f);default:return}}function Jn(f){if(!(y===X.Off||!J))if(k===Oe.Text){let _;(y===X.Verbose||y===X.Compact)&&f.params&&(_=`Params: ${We(f.params)}

`),J.log(`Sending request '${f.method} - (${f.id})'.`,_)}else Ze("send-request",f)}function Wn(f){if(!(y===X.Off||!J))if(k===Oe.Text){let _;(y===X.Verbose||y===X.Compact)&&(f.params?_=`Params: ${We(f.params)}

`:_=`No parameters provided.

`),J.log(`Sending notification '${f.method}'.`,_)}else Ze("send-notification",f)}function wt(f,_,q){if(!(y===X.Off||!J))if(k===Oe.Text){let x;(y===X.Verbose||y===X.Compact)&&(f.error&&f.error.data?x=`Error data: ${We(f.error.data)}

`:f.result?x=`Result: ${We(f.result)}

`:f.error===void 0&&(x=`No result returned.

`)),J.log(`Sending response '${_} - (${f.id})'. Processing request took ${Date.now()-q}ms`,x)}else Ze("send-response",f)}function Hn(f){if(!(y===X.Off||!J))if(k===Oe.Text){let _;(y===X.Verbose||y===X.Compact)&&f.params&&(_=`Params: ${We(f.params)}

`),J.log(`Received request '${f.method} - (${f.id})'.`,_)}else Ze("receive-request",f)}function At(f){if(!(y===X.Off||!J||f.method===sr.type.method))if(k===Oe.Text){let _;(y===X.Verbose||y===X.Compact)&&(f.params?_=`Params: ${We(f.params)}

`:_=`No parameters provided.

`),J.log(`Received notification '${f.method}'.`,_)}else Ze("receive-notification",f)}function Un(f,_){if(!(y===X.Off||!J))if(k===Oe.Text){let q;if((y===X.Verbose||y===X.Compact)&&(f.error&&f.error.data?q=`Error data: ${We(f.error.data)}

`:f.result?q=`Result: ${We(f.result)}

`:f.error===void 0&&(q=`No result returned.

`)),_){let x=f.error?` Request failed: ${f.error.message} (${f.error.code}).`:"";J.log(`Received response '${_.method} - (${f.id})' in ${Date.now()-_.timerStart}ms.${x}`,q)}else J.log(`Received response ${f.id} without active response promise.`,q)}else Ze("receive-response",f)}function Ze(f,_){if(!J||y===X.Off)return;let q={isLSPMessage:!0,type:f,message:_,timestamp:Date.now()};J.log(q)}function st(){if(Dt())throw new Bt(Tn.Closed,"Connection is closed.");if(Qe())throw new Bt(Tn.Disposed,"Connection is disposed.")}function $n(){if(ln())throw new Bt(Tn.AlreadyListening,"Connection is already listening")}function zn(){if(!ln())throw new Error("Call listen() first.")}function Ve(f){return f===void 0?null:f}function hn(f){if(f!==null)return f}function pn(f){return f!=null&&!Array.isArray(f)&&typeof f=="object"}function Ft(f,_){switch(f){case j.ParameterStructures.auto:return pn(_)?hn(_):[Ve(_)];case j.ParameterStructures.byName:if(!pn(_))throw new Error("Received parameters by name but param is not an object literal.");return hn(_);case j.ParameterStructures.byPosition:return[Ve(_)];default:throw new Error(`Unknown parameter structure ${f.toString()}`)}}function mn(f,_){let q,x=f.numberOfParams;switch(x){case 0:q=void 0;break;case 1:q=Ft(f.parameterStructures,_[0]);break;default:q=[];for(let Q=0;Q<_.length&&Q<x;Q++)q.push(Ve(_[Q]));if(_.length<x)for(let Q=_.length;Q<x;Q++)q.push(null);break}return q}let Ye={sendNotification:(f,..._)=>{st();let q,x;if(ae.string(f)){q=f;let K=_[0],re=0,oe=j.ParameterStructures.auto;j.ParameterStructures.is(K)&&(re=1,oe=K);let U=_.length,Y=U-re;switch(Y){case 0:x=void 0;break;case 1:x=Ft(oe,_[re]);break;default:if(oe===j.ParameterStructures.byName)throw new Error(`Received ${Y} parameters for 'by Name' notification parameter structure.`);x=_.slice(re,U).map(V=>Ve(V));break}}else{let K=_;q=f.method,x=mn(f,K)}let Q={jsonrpc:S,method:q,params:x};return Wn(Q),t.write(Q).catch(K=>{throw i.error("Sending notification failed."),K})},onNotification:(f,_)=>{st();let q;return ae.func(f)?C=f:_&&(ae.string(f)?(q=f,E.set(f,{type:void 0,handler:_})):(q=f.method,E.set(f.method,{type:f,handler:_}))),{dispose:()=>{q!==void 0?E.delete(q):C=void 0}}},onProgress:(f,_,q)=>{if(I.has(_))throw new Error(`Progress handler for token ${_} already registered`);return I.set(_,q),{dispose:()=>{I.delete(_)}}},sendProgress:(f,_,q)=>Ye.sendNotification(vn.type,{token:_,value:q}),onUnhandledProgress:it.event,sendRequest:(f,..._)=>{st(),zn();let q,x,Q;if(ae.string(f)){q=f;let U=_[0],Y=_[_.length-1],V=0,ue=j.ParameterStructures.auto;j.ParameterStructures.is(U)&&(V=1,ue=U);let ge=_.length;co.CancellationToken.is(Y)&&(ge=ge-1,Q=Y);let Ne=ge-V;switch(Ne){case 0:x=void 0;break;case 1:x=Ft(ue,_[V]);break;default:if(ue===j.ParameterStructures.byName)throw new Error(`Received ${Ne} parameters for 'by Name' request parameter structure.`);x=_.slice(V,ge).map(Bn=>Ve(Bn));break}}else{let U=_;q=f.method,x=mn(f,U);let Y=f.numberOfParams;Q=co.CancellationToken.is(U[Y])?U[Y]:void 0}let K=a++,re;Q&&(re=Q.onCancellationRequested(()=>{let U=we.sender.sendCancellation(Ye,K);return U===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${K}`),Promise.resolve()):U.catch(()=>{i.log(`Sending cancellation messages for id ${K} failed`)})}));let oe={jsonrpc:S,id:K,method:q,params:x};return Jn(oe),typeof we.sender.enableCancellation=="function"&&we.sender.enableCancellation(oe),new Promise(async(U,Y)=>{let V=Ne=>{U(Ne),we.sender.cleanup(K),re?.dispose()},ue=Ne=>{Y(Ne),we.sender.cleanup(K),re?.dispose()},ge={method:q,timerStart:Date.now(),resolve:V,reject:ue};try{await t.write(oe),Z.set(K,ge)}catch(Ne){throw i.error("Sending request failed."),ge.reject(new j.ResponseError(j.ErrorCodes.MessageWriteError,Ne.message?Ne.message:"Unknown reason")),Ne}})},onRequest:(f,_)=>{st();let q=null;return fo.is(f)?(q=void 0,D=f):ae.string(f)?(q=null,_!==void 0&&(q=f,w.set(f,{handler:_,type:void 0}))):_!==void 0&&(q=f.method,w.set(f.method,{type:f,handler:_})),{dispose:()=>{q!==null&&(q!==void 0?w.delete(q):D=void 0)}}},hasPendingResponse:()=>Z.size>0,trace:async(f,_,q)=>{let x=!1,Q=Oe.Text;q!==void 0&&(ae.boolean(q)?x=q:(x=q.sendNotification||!1,Q=q.traceFormat||Oe.Text)),y=f,k=Q,y===X.Off?J=void 0:J=_,x&&!Dt()&&!Qe()&&await Ye.sendNotification(ho.type,{value:X.toString(f)})},onError:ce.event,onClose:Je.event,onUnhandledNotification:_t.event,onDispose:ot.event,end:()=>{t.end()},dispose:()=>{if(Qe())return;ee=$e.Disposed,ot.fire(void 0);let f=new j.ResponseError(j.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let _ of Z.values())_.reject(f);Z=new Map,v=new Map,$=new Set,H=new zs.LinkedMap,ae.func(t.dispose)&&t.dispose(),ae.func(e.dispose)&&e.dispose()},listen:()=>{st(),$n(),ee=$e.Listening,e.listen(In)},inspect:()=>{(0,$s.default)().console.log("inspect")}};return Ye.onNotification(sr.type,f=>{if(y===X.Off||!J)return;let _=y===X.Verbose||y===X.Compact;J.log(f.message,_?f.verbose:void 0)}),Ye.onNotification(vn.type,f=>{let _=I.get(f.token);_?_(f.value):it.fire(f)}),Ye}L.createMessageConnection=Id});var fr=O(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.ProgressType=T.ProgressToken=T.createMessageConnection=T.NullLogger=T.ConnectionOptions=T.ConnectionStrategy=T.AbstractMessageBuffer=T.WriteableStreamMessageWriter=T.AbstractMessageWriter=T.MessageWriter=T.ReadableStreamMessageReader=T.AbstractMessageReader=T.MessageReader=T.SharedArrayReceiverStrategy=T.SharedArraySenderStrategy=T.CancellationToken=T.CancellationTokenSource=T.Emitter=T.Event=T.Disposable=T.LRUCache=T.Touch=T.LinkedMap=T.ParameterStructures=T.NotificationType9=T.NotificationType8=T.NotificationType7=T.NotificationType6=T.NotificationType5=T.NotificationType4=T.NotificationType3=T.NotificationType2=T.NotificationType1=T.NotificationType0=T.NotificationType=T.ErrorCodes=T.ResponseError=T.RequestType9=T.RequestType8=T.RequestType7=T.RequestType6=T.RequestType5=T.RequestType4=T.RequestType3=T.RequestType2=T.RequestType1=T.RequestType0=T.RequestType=T.Message=T.RAL=void 0;T.MessageStrategy=T.CancellationStrategy=T.CancellationSenderStrategy=T.CancellationReceiverStrategy=T.ConnectionError=T.ConnectionErrors=T.LogTraceNotification=T.SetTraceNotification=T.TraceFormat=T.TraceValues=T.Trace=void 0;var ne=Ji();Object.defineProperty(T,"Message",{enumerable:!0,get:function(){return ne.Message}});Object.defineProperty(T,"RequestType",{enumerable:!0,get:function(){return ne.RequestType}});Object.defineProperty(T,"RequestType0",{enumerable:!0,get:function(){return ne.RequestType0}});Object.defineProperty(T,"RequestType1",{enumerable:!0,get:function(){return ne.RequestType1}});Object.defineProperty(T,"RequestType2",{enumerable:!0,get:function(){return ne.RequestType2}});Object.defineProperty(T,"RequestType3",{enumerable:!0,get:function(){return ne.RequestType3}});Object.defineProperty(T,"RequestType4",{enumerable:!0,get:function(){return ne.RequestType4}});Object.defineProperty(T,"RequestType5",{enumerable:!0,get:function(){return ne.RequestType5}});Object.defineProperty(T,"RequestType6",{enumerable:!0,get:function(){return ne.RequestType6}});Object.defineProperty(T,"RequestType7",{enumerable:!0,get:function(){return ne.RequestType7}});Object.defineProperty(T,"RequestType8",{enumerable:!0,get:function(){return ne.RequestType8}});Object.defineProperty(T,"RequestType9",{enumerable:!0,get:function(){return ne.RequestType9}});Object.defineProperty(T,"ResponseError",{enumerable:!0,get:function(){return ne.ResponseError}});Object.defineProperty(T,"ErrorCodes",{enumerable:!0,get:function(){return ne.ErrorCodes}});Object.defineProperty(T,"NotificationType",{enumerable:!0,get:function(){return ne.NotificationType}});Object.defineProperty(T,"NotificationType0",{enumerable:!0,get:function(){return ne.NotificationType0}});Object.defineProperty(T,"NotificationType1",{enumerable:!0,get:function(){return ne.NotificationType1}});Object.defineProperty(T,"NotificationType2",{enumerable:!0,get:function(){return ne.NotificationType2}});Object.defineProperty(T,"NotificationType3",{enumerable:!0,get:function(){return ne.NotificationType3}});Object.defineProperty(T,"NotificationType4",{enumerable:!0,get:function(){return ne.NotificationType4}});Object.defineProperty(T,"NotificationType5",{enumerable:!0,get:function(){return ne.NotificationType5}});Object.defineProperty(T,"NotificationType6",{enumerable:!0,get:function(){return ne.NotificationType6}});Object.defineProperty(T,"NotificationType7",{enumerable:!0,get:function(){return ne.NotificationType7}});Object.defineProperty(T,"NotificationType8",{enumerable:!0,get:function(){return ne.NotificationType8}});Object.defineProperty(T,"NotificationType9",{enumerable:!0,get:function(){return ne.NotificationType9}});Object.defineProperty(T,"ParameterStructures",{enumerable:!0,get:function(){return ne.ParameterStructures}});var go=Hi();Object.defineProperty(T,"LinkedMap",{enumerable:!0,get:function(){return go.LinkedMap}});Object.defineProperty(T,"LRUCache",{enumerable:!0,get:function(){return go.LRUCache}});Object.defineProperty(T,"Touch",{enumerable:!0,get:function(){return go.Touch}});var Ad=Es();Object.defineProperty(T,"Disposable",{enumerable:!0,get:function(){return Ad.Disposable}});var Xs=Ht();Object.defineProperty(T,"Event",{enumerable:!0,get:function(){return Xs.Event}});Object.defineProperty(T,"Emitter",{enumerable:!0,get:function(){return Xs.Emitter}});var Ks=tr();Object.defineProperty(T,"CancellationTokenSource",{enumerable:!0,get:function(){return Ks.CancellationTokenSource}});Object.defineProperty(T,"CancellationToken",{enumerable:!0,get:function(){return Ks.CancellationToken}});var Qs=js();Object.defineProperty(T,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return Qs.SharedArraySenderStrategy}});Object.defineProperty(T,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return Qs.SharedArrayReceiverStrategy}});var yo=As();Object.defineProperty(T,"MessageReader",{enumerable:!0,get:function(){return yo.MessageReader}});Object.defineProperty(T,"AbstractMessageReader",{enumerable:!0,get:function(){return yo.AbstractMessageReader}});Object.defineProperty(T,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return yo.ReadableStreamMessageReader}});var bo=Hs();Object.defineProperty(T,"MessageWriter",{enumerable:!0,get:function(){return bo.MessageWriter}});Object.defineProperty(T,"AbstractMessageWriter",{enumerable:!0,get:function(){return bo.AbstractMessageWriter}});Object.defineProperty(T,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return bo.WriteableStreamMessageWriter}});var Fd=Us();Object.defineProperty(T,"AbstractMessageBuffer",{enumerable:!0,get:function(){return Fd.AbstractMessageBuffer}});var be=Gs();Object.defineProperty(T,"ConnectionStrategy",{enumerable:!0,get:function(){return be.ConnectionStrategy}});Object.defineProperty(T,"ConnectionOptions",{enumerable:!0,get:function(){return be.ConnectionOptions}});Object.defineProperty(T,"NullLogger",{enumerable:!0,get:function(){return be.NullLogger}});Object.defineProperty(T,"createMessageConnection",{enumerable:!0,get:function(){return be.createMessageConnection}});Object.defineProperty(T,"ProgressToken",{enumerable:!0,get:function(){return be.ProgressToken}});Object.defineProperty(T,"ProgressType",{enumerable:!0,get:function(){return be.ProgressType}});Object.defineProperty(T,"Trace",{enumerable:!0,get:function(){return be.Trace}});Object.defineProperty(T,"TraceValues",{enumerable:!0,get:function(){return be.TraceValues}});Object.defineProperty(T,"TraceFormat",{enumerable:!0,get:function(){return be.TraceFormat}});Object.defineProperty(T,"SetTraceNotification",{enumerable:!0,get:function(){return be.SetTraceNotification}});Object.defineProperty(T,"LogTraceNotification",{enumerable:!0,get:function(){return be.LogTraceNotification}});Object.defineProperty(T,"ConnectionErrors",{enumerable:!0,get:function(){return be.ConnectionErrors}});Object.defineProperty(T,"ConnectionError",{enumerable:!0,get:function(){return be.ConnectionError}});Object.defineProperty(T,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return be.CancellationReceiverStrategy}});Object.defineProperty(T,"CancellationSenderStrategy",{enumerable:!0,get:function(){return be.CancellationSenderStrategy}});Object.defineProperty(T,"CancellationStrategy",{enumerable:!0,get:function(){return be.CancellationStrategy}});Object.defineProperty(T,"MessageStrategy",{enumerable:!0,get:function(){return be.MessageStrategy}});var Ld=ct();T.RAL=Ld.default});var ea=O(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});var Zs=require("util"),tt=fr(),hr=class e extends tt.AbstractMessageBuffer{constructor(t="utf-8"){super(t)}emptyBuffer(){return e.emptyBuffer}fromString(t,n){return Buffer.from(t,n)}toString(t,n){return t instanceof Buffer?t.toString(n):new Zs.TextDecoder(n).decode(t)}asNative(t,n){return n===void 0?t instanceof Buffer?t:Buffer.from(t):t instanceof Buffer?t.slice(0,n):Buffer.from(t,0,n)}allocNative(t){return Buffer.allocUnsafe(t)}};hr.emptyBuffer=Buffer.allocUnsafe(0);var vo=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),tt.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),tt.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),tt.Disposable.create(()=>this.stream.off("end",t))}onData(t){return this.stream.on("data",t),tt.Disposable.create(()=>this.stream.off("data",t))}},To=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),tt.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),tt.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),tt.Disposable.create(()=>this.stream.off("end",t))}write(t,n){return new Promise((r,i)=>{let a=d=>{d==null?r():i(d)};typeof t=="string"?this.stream.write(t,n,a):this.stream.write(t,a)})}end(){this.stream.end()}},Ys=Object.freeze({messageBuffer:Object.freeze({create:e=>new hr(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new Zs.TextDecoder(t.charset).decode(e)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:e=>new vo(e),asWritableStream:e=>new To(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){let r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){let n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){let r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function _o(){return Ys}(function(e){function t(){tt.RAL.install(Ys)}e.install=t})(_o||(_o={}));Do.default=_o});var kt=O(B=>{"use strict";var Jd=B&&B.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Wd=B&&B.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Jd(t,e,n)};Object.defineProperty(B,"__esModule",{value:!0});B.createMessageConnection=B.createServerSocketTransport=B.createClientSocketTransport=B.createServerPipeTransport=B.createClientPipeTransport=B.generateRandomPipeName=B.StreamMessageWriter=B.StreamMessageReader=B.SocketMessageWriter=B.SocketMessageReader=B.PortMessageWriter=B.PortMessageReader=B.IPCMessageWriter=B.IPCMessageReader=void 0;var Vt=ea();Vt.default.install();var ta=require("path"),Hd=require("os"),Ud=require("crypto"),gr=require("net"),xe=fr();Wd(fr(),B);var Ro=class extends xe.AbstractMessageReader{constructor(t){super(),this.process=t;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(t){return this.process.on("message",t),xe.Disposable.create(()=>this.process.off("message",t))}};B.IPCMessageReader=Ro;var wo=class extends xe.AbstractMessageWriter{constructor(t){super(),this.process=t,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(t){try{return typeof this.process.send=="function"&&this.process.send(t,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,t)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};B.IPCMessageWriter=wo;var So=class extends xe.AbstractMessageReader{constructor(t){super(),this.onData=new xe.Emitter,t.on("close",()=>this.fireClose),t.on("error",n=>this.fireError(n)),t.on("message",n=>{this.onData.fire(n)})}listen(t){return this.onData.event(t)}};B.PortMessageReader=So;var Po=class extends xe.AbstractMessageWriter{constructor(t){super(),this.port=t,this.errorCount=0,t.on("close",()=>this.fireClose()),t.on("error",n=>this.fireError(n))}write(t){try{return this.port.postMessage(t),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};B.PortMessageWriter=Po;var Pt=class extends xe.ReadableStreamMessageReader{constructor(t,n="utf-8"){super((0,Vt.default)().stream.asReadableStream(t),n)}};B.SocketMessageReader=Pt;var Ct=class extends xe.WriteableStreamMessageWriter{constructor(t,n){super((0,Vt.default)().stream.asWritableStream(t),n),this.socket=t}dispose(){super.dispose(),this.socket.destroy()}};B.SocketMessageWriter=Ct;var pr=class extends xe.ReadableStreamMessageReader{constructor(t,n){super((0,Vt.default)().stream.asReadableStream(t),n)}};B.StreamMessageReader=pr;var mr=class extends xe.WriteableStreamMessageWriter{constructor(t,n){super((0,Vt.default)().stream.asWritableStream(t),n)}};B.StreamMessageWriter=mr;var na=process.env.XDG_RUNTIME_DIR,$d=new Map([["linux",107],["darwin",103]]);function zd(){let e=(0,Ud.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;na?t=ta.join(na,`vscode-ipc-${e}.sock`):t=ta.join(Hd.tmpdir(),`vscode-${e}.sock`);let n=$d.get(process.platform);return n!==void 0&&t.length>n&&(0,Vt.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${n} characters.`),t}B.generateRandomPipeName=zd;function Bd(e,t="utf-8"){let n,r=new Promise((i,a)=>{n=i});return new Promise((i,a)=>{let d=(0,gr.createServer)(b=>{d.close(),n([new Pt(b,t),new Ct(b,t)])});d.on("error",a),d.listen(e,()=>{d.removeListener("error",a),i({onConnected:()=>r})})})}B.createClientPipeTransport=Bd;function Vd(e,t="utf-8"){let n=(0,gr.createConnection)(e);return[new Pt(n,t),new Ct(n,t)]}B.createServerPipeTransport=Vd;function Gd(e,t="utf-8"){let n,r=new Promise((i,a)=>{n=i});return new Promise((i,a)=>{let d=(0,gr.createServer)(b=>{d.close(),n([new Pt(b,t),new Ct(b,t)])});d.on("error",a),d.listen(e,"127.0.0.1",()=>{d.removeListener("error",a),i({onConnected:()=>r})})})}B.createClientSocketTransport=Gd;function Xd(e,t="utf-8"){let n=(0,gr.createConnection)(e,"127.0.0.1");return[new Pt(n,t),new Ct(n,t)]}B.createServerSocketTransport=Xd;function Kd(e){let t=e;return t.read!==void 0&&t.addListener!==void 0}function Qd(e){let t=e;return t.write!==void 0&&t.addListener!==void 0}function Zd(e,t,n,r){n||(n=xe.NullLogger);let i=Kd(e)?new pr(e):e,a=Qd(t)?new mr(t):t;return xe.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,xe.createMessageConnection)(i,a,n,r)}B.createMessageConnection=Zd});var Co=O((ip,ra)=>{"use strict";ra.exports=kt()});var br=O((ia,yr)=>{(function(e){if(typeof yr=="object"&&typeof yr.exports=="object"){var t=e(require,ia);t!==void 0&&(yr.exports=t)}else typeof define=="function"&&define.amd&&define(["require","exports"],e)})(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.WorkspaceFolder=t.InlineCompletionContext=t.SelectedCompletionInfo=t.InlineCompletionTriggerKind=t.InlineCompletionList=t.InlineCompletionItem=t.StringValue=t.InlayHint=t.InlayHintLabelPart=t.InlayHintKind=t.InlineValueContext=t.InlineValueEvaluatableExpression=t.InlineValueVariableLookup=t.InlineValueText=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionTriggerKind=t.CodeActionKind=t.DocumentSymbol=t.WorkspaceSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.CompletionItemLabelDetails=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=t.URI=t.DocumentUri=void 0;var n;(function(s){function h(p){return typeof p=="string"}s.is=h})(n||(t.DocumentUri=n={}));var r;(function(s){function h(p){return typeof p=="string"}s.is=h})(r||(t.URI=r={}));var i;(function(s){s.MIN_VALUE=-2147483648,s.MAX_VALUE=2147483647;function h(p){return typeof p=="number"&&s.MIN_VALUE<=p&&p<=s.MAX_VALUE}s.is=h})(i||(t.integer=i={}));var a;(function(s){s.MIN_VALUE=0,s.MAX_VALUE=2147483647;function h(p){return typeof p=="number"&&s.MIN_VALUE<=p&&p<=s.MAX_VALUE}s.is=h})(a||(t.uinteger=a={}));var d;(function(s){function h(c,o){return c===Number.MAX_VALUE&&(c=a.MAX_VALUE),o===Number.MAX_VALUE&&(o=a.MAX_VALUE),{line:c,character:o}}s.create=h;function p(c){var o=c;return g.objectLiteral(o)&&g.uinteger(o.line)&&g.uinteger(o.character)}s.is=p})(d||(t.Position=d={}));var b;(function(s){function h(c,o,m,R){if(g.uinteger(c)&&g.uinteger(o)&&g.uinteger(m)&&g.uinteger(R))return{start:d.create(c,o),end:d.create(m,R)};if(d.is(c)&&d.is(o))return{start:c,end:o};throw new Error("Range#create called with invalid arguments[".concat(c,", ").concat(o,", ").concat(m,", ").concat(R,"]"))}s.create=h;function p(c){var o=c;return g.objectLiteral(o)&&d.is(o.start)&&d.is(o.end)}s.is=p})(b||(t.Range=b={}));var S;(function(s){function h(c,o){return{uri:c,range:o}}s.create=h;function p(c){var o=c;return g.objectLiteral(o)&&b.is(o.range)&&(g.string(o.uri)||g.undefined(o.uri))}s.is=p})(S||(t.Location=S={}));var D;(function(s){function h(c,o,m,R){return{targetUri:c,targetRange:o,targetSelectionRange:m,originSelectionRange:R}}s.create=h;function p(c){var o=c;return g.objectLiteral(o)&&b.is(o.targetRange)&&g.string(o.targetUri)&&b.is(o.targetSelectionRange)&&(b.is(o.originSelectionRange)||g.undefined(o.originSelectionRange))}s.is=p})(D||(t.LocationLink=D={}));var w;(function(s){function h(c,o,m,R){return{red:c,green:o,blue:m,alpha:R}}s.create=h;function p(c){var o=c;return g.objectLiteral(o)&&g.numberRange(o.red,0,1)&&g.numberRange(o.green,0,1)&&g.numberRange(o.blue,0,1)&&g.numberRange(o.alpha,0,1)}s.is=p})(w||(t.Color=w={}));var C;(function(s){function h(c,o){return{range:c,color:o}}s.create=h;function p(c){var o=c;return g.objectLiteral(o)&&b.is(o.range)&&w.is(o.color)}s.is=p})(C||(t.ColorInformation=C={}));var E;(function(s){function h(c,o,m){return{label:c,textEdit:o,additionalTextEdits:m}}s.create=h;function p(c){var o=c;return g.objectLiteral(o)&&g.string(o.label)&&(g.undefined(o.textEdit)||J.is(o))&&(g.undefined(o.additionalTextEdits)||g.typedArray(o.additionalTextEdits,J.is))}s.is=p})(E||(t.ColorPresentation=E={}));var I;(function(s){s.Comment="comment",s.Imports="imports",s.Region="region"})(I||(t.FoldingRangeKind=I={}));var W;(function(s){function h(c,o,m,R,F,le){var te={startLine:c,endLine:o};return g.defined(m)&&(te.startCharacter=m),g.defined(R)&&(te.endCharacter=R),g.defined(F)&&(te.kind=F),g.defined(le)&&(te.collapsedText=le),te}s.create=h;function p(c){var o=c;return g.objectLiteral(o)&&g.uinteger(o.startLine)&&g.uinteger(o.startLine)&&(g.undefined(o.startCharacter)||g.uinteger(o.startCharacter))&&(g.undefined(o.endCharacter)||g.uinteger(o.endCharacter))&&(g.undefined(o.kind)||g.string(o.kind))}s.is=p})(W||(t.FoldingRange=W={}));var H;(function(s){function h(c,o){return{location:c,message:o}}s.create=h;function p(c){var o=c;return g.defined(o)&&S.is(o.location)&&g.string(o.message)}s.is=p})(H||(t.DiagnosticRelatedInformation=H={}));var Z;(function(s){s.Error=1,s.Warning=2,s.Information=3,s.Hint=4})(Z||(t.DiagnosticSeverity=Z={}));var $;(function(s){s.Unnecessary=1,s.Deprecated=2})($||(t.DiagnosticTag=$={}));var v;(function(s){function h(p){var c=p;return g.objectLiteral(c)&&g.string(c.href)}s.is=h})(v||(t.CodeDescription=v={}));var y;(function(s){function h(c,o,m,R,F,le){var te={range:c,message:o};return g.defined(m)&&(te.severity=m),g.defined(R)&&(te.code=R),g.defined(F)&&(te.source=F),g.defined(le)&&(te.relatedInformation=le),te}s.create=h;function p(c){var o,m=c;return g.defined(m)&&b.is(m.range)&&g.string(m.message)&&(g.number(m.severity)||g.undefined(m.severity))&&(g.integer(m.code)||g.string(m.code)||g.undefined(m.code))&&(g.undefined(m.codeDescription)||g.string((o=m.codeDescription)===null||o===void 0?void 0:o.href))&&(g.string(m.source)||g.undefined(m.source))&&(g.undefined(m.relatedInformation)||g.typedArray(m.relatedInformation,H.is))}s.is=p})(y||(t.Diagnostic=y={}));var k;(function(s){function h(c,o){for(var m=[],R=2;R<arguments.length;R++)m[R-2]=arguments[R];var F={title:c,command:o};return g.defined(m)&&m.length>0&&(F.arguments=m),F}s.create=h;function p(c){var o=c;return g.defined(o)&&g.string(o.title)&&g.string(o.command)}s.is=p})(k||(t.Command=k={}));var J;(function(s){function h(m,R){return{range:m,newText:R}}s.replace=h;function p(m,R){return{range:{start:m,end:m},newText:R}}s.insert=p;function c(m){return{range:m,newText:""}}s.del=c;function o(m){var R=m;return g.objectLiteral(R)&&g.string(R.newText)&&b.is(R.range)}s.is=o})(J||(t.TextEdit=J={}));var ee;(function(s){function h(c,o,m){var R={label:c};return o!==void 0&&(R.needsConfirmation=o),m!==void 0&&(R.description=m),R}s.create=h;function p(c){var o=c;return g.objectLiteral(o)&&g.string(o.label)&&(g.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(g.string(o.description)||o.description===void 0)}s.is=p})(ee||(t.ChangeAnnotation=ee={}));var ce;(function(s){function h(p){var c=p;return g.string(c)}s.is=h})(ce||(t.ChangeAnnotationIdentifier=ce={}));var Je;(function(s){function h(m,R,F){return{range:m,newText:R,annotationId:F}}s.replace=h;function p(m,R,F){return{range:{start:m,end:m},newText:R,annotationId:F}}s.insert=p;function c(m,R){return{range:m,newText:"",annotationId:R}}s.del=c;function o(m){var R=m;return J.is(R)&&(ee.is(R.annotationId)||ce.is(R.annotationId))}s.is=o})(Je||(t.AnnotatedTextEdit=Je={}));var _t;(function(s){function h(c,o){return{textDocument:c,edits:o}}s.create=h;function p(c){var o=c;return g.defined(o)&&Dt.is(o.textDocument)&&Array.isArray(o.edits)}s.is=p})(_t||(t.TextDocumentEdit=_t={}));var it;(function(s){function h(c,o,m){var R={kind:"create",uri:c};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(R.options=o),m!==void 0&&(R.annotationId=m),R}s.create=h;function p(c){var o=c;return o&&o.kind==="create"&&g.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||g.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||g.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||ce.is(o.annotationId))}s.is=p})(it||(t.CreateFile=it={}));var ot;(function(s){function h(c,o,m,R){var F={kind:"rename",oldUri:c,newUri:o};return m!==void 0&&(m.overwrite!==void 0||m.ignoreIfExists!==void 0)&&(F.options=m),R!==void 0&&(F.annotationId=R),F}s.create=h;function p(c){var o=c;return o&&o.kind==="rename"&&g.string(o.oldUri)&&g.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||g.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||g.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||ce.is(o.annotationId))}s.is=p})(ot||(t.RenameFile=ot={}));var we;(function(s){function h(c,o,m){var R={kind:"delete",uri:c};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(R.options=o),m!==void 0&&(R.annotationId=m),R}s.create=h;function p(c){var o=c;return o&&o.kind==="delete"&&g.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||g.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||g.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||ce.is(o.annotationId))}s.is=p})(we||(t.DeleteFile=we={}));var Et;(function(s){function h(p){var c=p;return c&&(c.changes!==void 0||c.documentChanges!==void 0)&&(c.documentChanges===void 0||c.documentChanges.every(function(o){return g.string(o.kind)?it.is(o)||ot.is(o)||we.is(o):_t.is(o)}))}s.is=h})(Et||(t.WorkspaceEdit=Et={}));var Mt=function(){function s(h,p){this.edits=h,this.changeAnnotations=p}return s.prototype.insert=function(h,p,c){var o,m;if(c===void 0?o=J.insert(h,p):ce.is(c)?(m=c,o=Je.insert(h,p,c)):(this.assertChangeAnnotations(this.changeAnnotations),m=this.changeAnnotations.manage(c),o=Je.insert(h,p,m)),this.edits.push(o),m!==void 0)return m},s.prototype.replace=function(h,p,c){var o,m;if(c===void 0?o=J.replace(h,p):ce.is(c)?(m=c,o=Je.replace(h,p,c)):(this.assertChangeAnnotations(this.changeAnnotations),m=this.changeAnnotations.manage(c),o=Je.replace(h,p,m)),this.edits.push(o),m!==void 0)return m},s.prototype.delete=function(h,p){var c,o;if(p===void 0?c=J.del(h):ce.is(p)?(o=p,c=Je.del(h,p)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(p),c=Je.del(h,o)),this.edits.push(c),o!==void 0)return o},s.prototype.add=function(h){this.edits.push(h)},s.prototype.all=function(){return this.edits},s.prototype.clear=function(){this.edits.splice(0,this.edits.length)},s.prototype.assertChangeAnnotations=function(h){if(h===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},s}(),xn=function(){function s(h){this._annotations=h===void 0?Object.create(null):h,this._counter=0,this._size=0}return s.prototype.all=function(){return this._annotations},Object.defineProperty(s.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),s.prototype.manage=function(h,p){var c;if(ce.is(h)?c=h:(c=this.nextId(),p=h),this._annotations[c]!==void 0)throw new Error("Id ".concat(c," is already in use."));if(p===void 0)throw new Error("No annotation provided for id ".concat(c));return this._annotations[c]=p,this._size++,c},s.prototype.nextId=function(){return this._counter++,this._counter.toString()},s}(),mi=function(){function s(h){var p=this;this._textEditChanges=Object.create(null),h!==void 0?(this._workspaceEdit=h,h.documentChanges?(this._changeAnnotations=new xn(h.changeAnnotations),h.changeAnnotations=this._changeAnnotations.all(),h.documentChanges.forEach(function(c){if(_t.is(c)){var o=new Mt(c.edits,p._changeAnnotations);p._textEditChanges[c.textDocument.uri]=o}})):h.changes&&Object.keys(h.changes).forEach(function(c){var o=new Mt(h.changes[c]);p._textEditChanges[c]=o})):this._workspaceEdit={}}return Object.defineProperty(s.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),s.prototype.getTextEditChange=function(h){if(Dt.is(h)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var p={uri:h.uri,version:h.version},c=this._textEditChanges[p.uri];if(!c){var o=[],m={textDocument:p,edits:o};this._workspaceEdit.documentChanges.push(m),c=new Mt(o,this._changeAnnotations),this._textEditChanges[p.uri]=c}return c}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var c=this._textEditChanges[h];if(!c){var o=[];this._workspaceEdit.changes[h]=o,c=new Mt(o),this._textEditChanges[h]=c}return c}},s.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new xn,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},s.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},s.prototype.createFile=function(h,p,c){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;ee.is(p)||ce.is(p)?o=p:c=p;var m,R;if(o===void 0?m=it.create(h,c):(R=ce.is(o)?o:this._changeAnnotations.manage(o),m=it.create(h,c,R)),this._workspaceEdit.documentChanges.push(m),R!==void 0)return R},s.prototype.renameFile=function(h,p,c,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var m;ee.is(c)||ce.is(c)?m=c:o=c;var R,F;if(m===void 0?R=ot.create(h,p,o):(F=ce.is(m)?m:this._changeAnnotations.manage(m),R=ot.create(h,p,o,F)),this._workspaceEdit.documentChanges.push(R),F!==void 0)return F},s.prototype.deleteFile=function(h,p,c){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;ee.is(p)||ce.is(p)?o=p:c=p;var m,R;if(o===void 0?m=we.create(h,c):(R=ce.is(o)?o:this._changeAnnotations.manage(o),m=we.create(h,c,R)),this._workspaceEdit.documentChanges.push(m),R!==void 0)return R},s}();t.WorkspaceChange=mi;var En;(function(s){function h(c){return{uri:c}}s.create=h;function p(c){var o=c;return g.defined(o)&&g.string(o.uri)}s.is=p})(En||(t.TextDocumentIdentifier=En={}));var ln;(function(s){function h(c,o){return{uri:c,version:o}}s.create=h;function p(c){var o=c;return g.defined(o)&&g.string(o.uri)&&g.integer(o.version)}s.is=p})(ln||(t.VersionedTextDocumentIdentifier=ln={}));var Dt;(function(s){function h(c,o){return{uri:c,version:o}}s.create=h;function p(c){var o=c;return g.defined(o)&&g.string(o.uri)&&(o.version===null||g.integer(o.version))}s.is=p})(Dt||(t.OptionalVersionedTextDocumentIdentifier=Dt={}));var Qe;(function(s){function h(c,o,m,R){return{uri:c,languageId:o,version:m,text:R}}s.create=h;function p(c){var o=c;return g.defined(o)&&g.string(o.uri)&&g.string(o.languageId)&&g.integer(o.version)&&g.string(o.text)}s.is=p})(Qe||(t.TextDocumentItem=Qe={}));var jt;(function(s){s.PlainText="plaintext",s.Markdown="markdown";function h(p){var c=p;return c===s.PlainText||c===s.Markdown}s.is=h})(jt||(t.MarkupKind=jt={}));var Rt;(function(s){function h(p){var c=p;return g.objectLiteral(p)&&jt.is(c.kind)&&g.string(c.value)}s.is=h})(Rt||(t.MarkupContent=Rt={}));var Mn;(function(s){s.Text=1,s.Method=2,s.Function=3,s.Constructor=4,s.Field=5,s.Variable=6,s.Class=7,s.Interface=8,s.Module=9,s.Property=10,s.Unit=11,s.Value=12,s.Enum=13,s.Keyword=14,s.Snippet=15,s.Color=16,s.File=17,s.Reference=18,s.Folder=19,s.EnumMember=20,s.Constant=21,s.Struct=22,s.Event=23,s.Operator=24,s.TypeParameter=25})(Mn||(t.CompletionItemKind=Mn={}));var dn;(function(s){s.PlainText=1,s.Snippet=2})(dn||(t.InsertTextFormat=dn={}));var fn;(function(s){s.Deprecated=1})(fn||(t.CompletionItemTag=fn={}));var jn;(function(s){function h(c,o,m){return{newText:c,insert:o,replace:m}}s.create=h;function p(c){var o=c;return o&&g.string(o.newText)&&b.is(o.insert)&&b.is(o.replace)}s.is=p})(jn||(t.InsertReplaceEdit=jn={}));var In;(function(s){s.asIs=1,s.adjustIndentation=2})(In||(t.InsertTextMode=In={}));var An;(function(s){function h(p){var c=p;return c&&(g.string(c.detail)||c.detail===void 0)&&(g.string(c.description)||c.description===void 0)}s.is=h})(An||(t.CompletionItemLabelDetails=An={}));var Fn;(function(s){function h(p){return{label:p}}s.create=h})(Fn||(t.CompletionItem=Fn={}));var Ln;(function(s){function h(p,c){return{items:p||[],isIncomplete:!!c}}s.create=h})(Ln||(t.CompletionList=Ln={}));var It;(function(s){function h(c){return c.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s.fromPlainText=h;function p(c){var o=c;return g.string(o)||g.objectLiteral(o)&&g.string(o.language)&&g.string(o.value)}s.is=p})(It||(t.MarkedString=It={}));var We;(function(s){function h(p){var c=p;return!!c&&g.objectLiteral(c)&&(Rt.is(c.contents)||It.is(c.contents)||g.typedArray(c.contents,It.is))&&(p.range===void 0||b.is(p.range))}s.is=h})(We||(t.Hover=We={}));var Jn;(function(s){function h(p,c){return c?{label:p,documentation:c}:{label:p}}s.create=h})(Jn||(t.ParameterInformation=Jn={}));var Wn;(function(s){function h(p,c){for(var o=[],m=2;m<arguments.length;m++)o[m-2]=arguments[m];var R={label:p};return g.defined(c)&&(R.documentation=c),g.defined(o)?R.parameters=o:R.parameters=[],R}s.create=h})(Wn||(t.SignatureInformation=Wn={}));var wt;(function(s){s.Text=1,s.Read=2,s.Write=3})(wt||(t.DocumentHighlightKind=wt={}));var Hn;(function(s){function h(p,c){var o={range:p};return g.number(c)&&(o.kind=c),o}s.create=h})(Hn||(t.DocumentHighlight=Hn={}));var At;(function(s){s.File=1,s.Module=2,s.Namespace=3,s.Package=4,s.Class=5,s.Method=6,s.Property=7,s.Field=8,s.Constructor=9,s.Enum=10,s.Interface=11,s.Function=12,s.Variable=13,s.Constant=14,s.String=15,s.Number=16,s.Boolean=17,s.Array=18,s.Object=19,s.Key=20,s.Null=21,s.EnumMember=22,s.Struct=23,s.Event=24,s.Operator=25,s.TypeParameter=26})(At||(t.SymbolKind=At={}));var Un;(function(s){s.Deprecated=1})(Un||(t.SymbolTag=Un={}));var Ze;(function(s){function h(p,c,o,m,R){var F={name:p,kind:c,location:{uri:m,range:o}};return R&&(F.containerName=R),F}s.create=h})(Ze||(t.SymbolInformation=Ze={}));var st;(function(s){function h(p,c,o,m){return m!==void 0?{name:p,kind:c,location:{uri:o,range:m}}:{name:p,kind:c,location:{uri:o}}}s.create=h})(st||(t.WorkspaceSymbol=st={}));var $n;(function(s){function h(c,o,m,R,F,le){var te={name:c,detail:o,kind:m,range:R,selectionRange:F};return le!==void 0&&(te.children=le),te}s.create=h;function p(c){var o=c;return o&&g.string(o.name)&&g.number(o.kind)&&b.is(o.range)&&b.is(o.selectionRange)&&(o.detail===void 0||g.string(o.detail))&&(o.deprecated===void 0||g.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}s.is=p})($n||(t.DocumentSymbol=$n={}));var zn;(function(s){s.Empty="",s.QuickFix="quickfix",s.Refactor="refactor",s.RefactorExtract="refactor.extract",s.RefactorInline="refactor.inline",s.RefactorRewrite="refactor.rewrite",s.Source="source",s.SourceOrganizeImports="source.organizeImports",s.SourceFixAll="source.fixAll"})(zn||(t.CodeActionKind=zn={}));var Ve;(function(s){s.Invoked=1,s.Automatic=2})(Ve||(t.CodeActionTriggerKind=Ve={}));var hn;(function(s){function h(c,o,m){var R={diagnostics:c};return o!=null&&(R.only=o),m!=null&&(R.triggerKind=m),R}s.create=h;function p(c){var o=c;return g.defined(o)&&g.typedArray(o.diagnostics,y.is)&&(o.only===void 0||g.typedArray(o.only,g.string))&&(o.triggerKind===void 0||o.triggerKind===Ve.Invoked||o.triggerKind===Ve.Automatic)}s.is=p})(hn||(t.CodeActionContext=hn={}));var pn;(function(s){function h(c,o,m){var R={title:c},F=!0;return typeof o=="string"?(F=!1,R.kind=o):k.is(o)?R.command=o:R.edit=o,F&&m!==void 0&&(R.kind=m),R}s.create=h;function p(c){var o=c;return o&&g.string(o.title)&&(o.diagnostics===void 0||g.typedArray(o.diagnostics,y.is))&&(o.kind===void 0||g.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||k.is(o.command))&&(o.isPreferred===void 0||g.boolean(o.isPreferred))&&(o.edit===void 0||Et.is(o.edit))}s.is=p})(pn||(t.CodeAction=pn={}));var Ft;(function(s){function h(c,o){var m={range:c};return g.defined(o)&&(m.data=o),m}s.create=h;function p(c){var o=c;return g.defined(o)&&b.is(o.range)&&(g.undefined(o.command)||k.is(o.command))}s.is=p})(Ft||(t.CodeLens=Ft={}));var mn;(function(s){function h(c,o){return{tabSize:c,insertSpaces:o}}s.create=h;function p(c){var o=c;return g.defined(o)&&g.uinteger(o.tabSize)&&g.boolean(o.insertSpaces)}s.is=p})(mn||(t.FormattingOptions=mn={}));var Ye;(function(s){function h(c,o,m){return{range:c,target:o,data:m}}s.create=h;function p(c){var o=c;return g.defined(o)&&b.is(o.range)&&(g.undefined(o.target)||g.string(o.target))}s.is=p})(Ye||(t.DocumentLink=Ye={}));var f;(function(s){function h(c,o){return{range:c,parent:o}}s.create=h;function p(c){var o=c;return g.objectLiteral(o)&&b.is(o.range)&&(o.parent===void 0||s.is(o.parent))}s.is=p})(f||(t.SelectionRange=f={}));var _;(function(s){s.namespace="namespace",s.type="type",s.class="class",s.enum="enum",s.interface="interface",s.struct="struct",s.typeParameter="typeParameter",s.parameter="parameter",s.variable="variable",s.property="property",s.enumMember="enumMember",s.event="event",s.function="function",s.method="method",s.macro="macro",s.keyword="keyword",s.modifier="modifier",s.comment="comment",s.string="string",s.number="number",s.regexp="regexp",s.operator="operator",s.decorator="decorator"})(_||(t.SemanticTokenTypes=_={}));var q;(function(s){s.declaration="declaration",s.definition="definition",s.readonly="readonly",s.static="static",s.deprecated="deprecated",s.abstract="abstract",s.async="async",s.modification="modification",s.documentation="documentation",s.defaultLibrary="defaultLibrary"})(q||(t.SemanticTokenModifiers=q={}));var x;(function(s){function h(p){var c=p;return g.objectLiteral(c)&&(c.resultId===void 0||typeof c.resultId=="string")&&Array.isArray(c.data)&&(c.data.length===0||typeof c.data[0]=="number")}s.is=h})(x||(t.SemanticTokens=x={}));var Q;(function(s){function h(c,o){return{range:c,text:o}}s.create=h;function p(c){var o=c;return o!=null&&b.is(o.range)&&g.string(o.text)}s.is=p})(Q||(t.InlineValueText=Q={}));var K;(function(s){function h(c,o,m){return{range:c,variableName:o,caseSensitiveLookup:m}}s.create=h;function p(c){var o=c;return o!=null&&b.is(o.range)&&g.boolean(o.caseSensitiveLookup)&&(g.string(o.variableName)||o.variableName===void 0)}s.is=p})(K||(t.InlineValueVariableLookup=K={}));var re;(function(s){function h(c,o){return{range:c,expression:o}}s.create=h;function p(c){var o=c;return o!=null&&b.is(o.range)&&(g.string(o.expression)||o.expression===void 0)}s.is=p})(re||(t.InlineValueEvaluatableExpression=re={}));var oe;(function(s){function h(c,o){return{frameId:c,stoppedLocation:o}}s.create=h;function p(c){var o=c;return g.defined(o)&&b.is(c.stoppedLocation)}s.is=p})(oe||(t.InlineValueContext=oe={}));var U;(function(s){s.Type=1,s.Parameter=2;function h(p){return p===1||p===2}s.is=h})(U||(t.InlayHintKind=U={}));var Y;(function(s){function h(c){return{value:c}}s.create=h;function p(c){var o=c;return g.objectLiteral(o)&&(o.tooltip===void 0||g.string(o.tooltip)||Rt.is(o.tooltip))&&(o.location===void 0||S.is(o.location))&&(o.command===void 0||k.is(o.command))}s.is=p})(Y||(t.InlayHintLabelPart=Y={}));var V;(function(s){function h(c,o,m){var R={position:c,label:o};return m!==void 0&&(R.kind=m),R}s.create=h;function p(c){var o=c;return g.objectLiteral(o)&&d.is(o.position)&&(g.string(o.label)||g.typedArray(o.label,Y.is))&&(o.kind===void 0||U.is(o.kind))&&o.textEdits===void 0||g.typedArray(o.textEdits,J.is)&&(o.tooltip===void 0||g.string(o.tooltip)||Rt.is(o.tooltip))&&(o.paddingLeft===void 0||g.boolean(o.paddingLeft))&&(o.paddingRight===void 0||g.boolean(o.paddingRight))}s.is=p})(V||(t.InlayHint=V={}));var ue;(function(s){function h(p){return{kind:"snippet",value:p}}s.createSnippet=h})(ue||(t.StringValue=ue={}));var ge;(function(s){function h(p,c,o,m){return{insertText:p,filterText:c,range:o,command:m}}s.create=h})(ge||(t.InlineCompletionItem=ge={}));var Ne;(function(s){function h(p){return{items:p}}s.create=h})(Ne||(t.InlineCompletionList=Ne={}));var Bn;(function(s){s.Invoked=0,s.Automatic=1})(Bn||(t.InlineCompletionTriggerKind=Bn={}));var vs;(function(s){function h(p,c){return{range:p,text:c}}s.create=h})(vs||(t.SelectedCompletionInfo=vs={}));var Ts;(function(s){function h(p,c){return{triggerKind:p,selectedCompletionInfo:c}}s.create=h})(Ts||(t.InlineCompletionContext=Ts={}));var _s;(function(s){function h(p){var c=p;return g.objectLiteral(c)&&r.is(c.uri)&&g.string(c.name)}s.is=h})(_s||(t.WorkspaceFolder=_s={})),t.EOL=[`
`,`\r
`,"\r"];var Ds;(function(s){function h(m,R,F,le){return new sd(m,R,F,le)}s.create=h;function p(m){var R=m;return!!(g.defined(R)&&g.string(R.uri)&&(g.undefined(R.languageId)||g.string(R.languageId))&&g.uinteger(R.lineCount)&&g.func(R.getText)&&g.func(R.positionAt)&&g.func(R.offsetAt))}s.is=p;function c(m,R){for(var F=m.getText(),le=o(R,function(Lt,Vn){var Rs=Lt.range.start.line-Vn.range.start.line;return Rs===0?Lt.range.start.character-Vn.range.start.character:Rs}),te=F.length,He=le.length-1;He>=0;He--){var Ue=le[He],et=m.offsetAt(Ue.range.start),z=m.offsetAt(Ue.range.end);if(z<=te)F=F.substring(0,et)+Ue.newText+F.substring(z,F.length);else throw new Error("Overlapping edit");te=et}return F}s.applyEdits=c;function o(m,R){if(m.length<=1)return m;var F=m.length/2|0,le=m.slice(0,F),te=m.slice(F);o(le,R),o(te,R);for(var He=0,Ue=0,et=0;He<le.length&&Ue<te.length;){var z=R(le[He],te[Ue]);z<=0?m[et++]=le[He++]:m[et++]=te[Ue++]}for(;He<le.length;)m[et++]=le[He++];for(;Ue<te.length;)m[et++]=te[Ue++];return m}})(Ds||(t.TextDocument=Ds={}));var sd=function(){function s(h,p,c,o){this._uri=h,this._languageId=p,this._version=c,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(s.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),s.prototype.getText=function(h){if(h){var p=this.offsetAt(h.start),c=this.offsetAt(h.end);return this._content.substring(p,c)}return this._content},s.prototype.update=function(h,p){this._content=h.text,this._version=p,this._lineOffsets=void 0},s.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var h=[],p=this._content,c=!0,o=0;o<p.length;o++){c&&(h.push(o),c=!1);var m=p.charAt(o);c=m==="\r"||m===`
`,m==="\r"&&o+1<p.length&&p.charAt(o+1)===`
`&&o++}c&&p.length>0&&h.push(p.length),this._lineOffsets=h}return this._lineOffsets},s.prototype.positionAt=function(h){h=Math.max(Math.min(h,this._content.length),0);var p=this.getLineOffsets(),c=0,o=p.length;if(o===0)return d.create(0,h);for(;c<o;){var m=Math.floor((c+o)/2);p[m]>h?o=m:c=m+1}var R=c-1;return d.create(R,h-p[R])},s.prototype.offsetAt=function(h){var p=this.getLineOffsets();if(h.line>=p.length)return this._content.length;if(h.line<0)return 0;var c=p[h.line],o=h.line+1<p.length?p[h.line+1]:this._content.length;return Math.max(Math.min(c+h.character,o),c)},Object.defineProperty(s.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),s}(),g;(function(s){var h=Object.prototype.toString;function p(z){return typeof z<"u"}s.defined=p;function c(z){return typeof z>"u"}s.undefined=c;function o(z){return z===!0||z===!1}s.boolean=o;function m(z){return h.call(z)==="[object String]"}s.string=m;function R(z){return h.call(z)==="[object Number]"}s.number=R;function F(z,Lt,Vn){return h.call(z)==="[object Number]"&&Lt<=z&&z<=Vn}s.numberRange=F;function le(z){return h.call(z)==="[object Number]"&&-2147483648<=z&&z<=2147483647}s.integer=le;function te(z){return h.call(z)==="[object Number]"&&0<=z&&z<=2147483647}s.uinteger=te;function He(z){return h.call(z)==="[object Function]"}s.func=He;function Ue(z){return z!==null&&typeof z=="object"}s.objectLiteral=Ue;function et(z,Lt){return Array.isArray(z)&&z.every(Lt)}s.typedArray=et})(g||(g={}))})});var se=O(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.ProtocolNotificationType=Pe.ProtocolNotificationType0=Pe.ProtocolRequestType=Pe.ProtocolRequestType0=Pe.RegistrationType=Pe.MessageDirection=void 0;var Gt=kt(),oa;(function(e){e.clientToServer="clientToServer",e.serverToClient="serverToClient",e.both="both"})(oa||(Pe.MessageDirection=oa={}));var ko=class{constructor(t){this.method=t}};Pe.RegistrationType=ko;var qo=class extends Gt.RequestType0{constructor(t){super(t)}};Pe.ProtocolRequestType0=qo;var No=class extends Gt.RequestType{constructor(t){super(t,Gt.ParameterStructures.byName)}};Pe.ProtocolRequestType=No;var Oo=class extends Gt.NotificationType0{constructor(t){super(t)}};Pe.ProtocolNotificationType0=Oo;var xo=class extends Gt.NotificationType{constructor(t){super(t,Gt.ParameterStructures.byName)}};Pe.ProtocolNotificationType=xo});var vr=O(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.objectLiteral=pe.typedArray=pe.stringArray=pe.array=pe.func=pe.error=pe.number=pe.string=pe.boolean=void 0;function Yd(e){return e===!0||e===!1}pe.boolean=Yd;function sa(e){return typeof e=="string"||e instanceof String}pe.string=sa;function ef(e){return typeof e=="number"||e instanceof Number}pe.number=ef;function tf(e){return e instanceof Error}pe.error=tf;function nf(e){return typeof e=="function"}pe.func=nf;function aa(e){return Array.isArray(e)}pe.array=aa;function rf(e){return aa(e)&&e.every(t=>sa(t))}pe.stringArray=rf;function of(e,t){return Array.isArray(e)&&e.every(t)}pe.typedArray=of;function sf(e){return e!==null&&typeof e=="object"}pe.objectLiteral=sf});var la=O(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.ImplementationRequest=void 0;var ca=se(),ua;(function(e){e.method="textDocument/implementation",e.messageDirection=ca.MessageDirection.clientToServer,e.type=new ca.ProtocolRequestType(e.method)})(ua||(Tr.ImplementationRequest=ua={}))});var ha=O(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.TypeDefinitionRequest=void 0;var da=se(),fa;(function(e){e.method="textDocument/typeDefinition",e.messageDirection=da.MessageDirection.clientToServer,e.type=new da.ProtocolRequestType(e.method)})(fa||(_r.TypeDefinitionRequest=fa={}))});var ga=O(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.DidChangeWorkspaceFoldersNotification=Xt.WorkspaceFoldersRequest=void 0;var Dr=se(),pa;(function(e){e.method="workspace/workspaceFolders",e.messageDirection=Dr.MessageDirection.serverToClient,e.type=new Dr.ProtocolRequestType0(e.method)})(pa||(Xt.WorkspaceFoldersRequest=pa={}));var ma;(function(e){e.method="workspace/didChangeWorkspaceFolders",e.messageDirection=Dr.MessageDirection.clientToServer,e.type=new Dr.ProtocolNotificationType(e.method)})(ma||(Xt.DidChangeWorkspaceFoldersNotification=ma={}))});var va=O(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.ConfigurationRequest=void 0;var ya=se(),ba;(function(e){e.method="workspace/configuration",e.messageDirection=ya.MessageDirection.serverToClient,e.type=new ya.ProtocolRequestType(e.method)})(ba||(Rr.ConfigurationRequest=ba={}))});var Da=O(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.ColorPresentationRequest=Kt.DocumentColorRequest=void 0;var wr=se(),Ta;(function(e){e.method="textDocument/documentColor",e.messageDirection=wr.MessageDirection.clientToServer,e.type=new wr.ProtocolRequestType(e.method)})(Ta||(Kt.DocumentColorRequest=Ta={}));var _a;(function(e){e.method="textDocument/colorPresentation",e.messageDirection=wr.MessageDirection.clientToServer,e.type=new wr.ProtocolRequestType(e.method)})(_a||(Kt.ColorPresentationRequest=_a={}))});var Sa=O(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.FoldingRangeRefreshRequest=Qt.FoldingRangeRequest=void 0;var Sr=se(),Ra;(function(e){e.method="textDocument/foldingRange",e.messageDirection=Sr.MessageDirection.clientToServer,e.type=new Sr.ProtocolRequestType(e.method)})(Ra||(Qt.FoldingRangeRequest=Ra={}));var wa;(function(e){e.method="workspace/foldingRange/refresh",e.messageDirection=Sr.MessageDirection.serverToClient,e.type=new Sr.ProtocolRequestType0(e.method)})(wa||(Qt.FoldingRangeRefreshRequest=wa={}))});var ka=O(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.DeclarationRequest=void 0;var Pa=se(),Ca;(function(e){e.method="textDocument/declaration",e.messageDirection=Pa.MessageDirection.clientToServer,e.type=new Pa.ProtocolRequestType(e.method)})(Ca||(Pr.DeclarationRequest=Ca={}))});var Oa=O(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.SelectionRangeRequest=void 0;var qa=se(),Na;(function(e){e.method="textDocument/selectionRange",e.messageDirection=qa.MessageDirection.clientToServer,e.type=new qa.ProtocolRequestType(e.method)})(Na||(Cr.SelectionRangeRequest=Na={}))});var ja=O(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.WorkDoneProgressCancelNotification=dt.WorkDoneProgressCreateRequest=dt.WorkDoneProgress=void 0;var af=kt(),kr=se(),xa;(function(e){e.type=new af.ProgressType;function t(n){return n===e.type}e.is=t})(xa||(dt.WorkDoneProgress=xa={}));var Ea;(function(e){e.method="window/workDoneProgress/create",e.messageDirection=kr.MessageDirection.serverToClient,e.type=new kr.ProtocolRequestType(e.method)})(Ea||(dt.WorkDoneProgressCreateRequest=Ea={}));var Ma;(function(e){e.method="window/workDoneProgress/cancel",e.messageDirection=kr.MessageDirection.clientToServer,e.type=new kr.ProtocolNotificationType(e.method)})(Ma||(dt.WorkDoneProgressCancelNotification=Ma={}))});var La=O(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.CallHierarchyOutgoingCallsRequest=ft.CallHierarchyIncomingCallsRequest=ft.CallHierarchyPrepareRequest=void 0;var Zt=se(),Ia;(function(e){e.method="textDocument/prepareCallHierarchy",e.messageDirection=Zt.MessageDirection.clientToServer,e.type=new Zt.ProtocolRequestType(e.method)})(Ia||(ft.CallHierarchyPrepareRequest=Ia={}));var Aa;(function(e){e.method="callHierarchy/incomingCalls",e.messageDirection=Zt.MessageDirection.clientToServer,e.type=new Zt.ProtocolRequestType(e.method)})(Aa||(ft.CallHierarchyIncomingCallsRequest=Aa={}));var Fa;(function(e){e.method="callHierarchy/outgoingCalls",e.messageDirection=Zt.MessageDirection.clientToServer,e.type=new Zt.ProtocolRequestType(e.method)})(Fa||(ft.CallHierarchyOutgoingCallsRequest=Fa={}))});var za=O(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.SemanticTokensRefreshRequest=Ce.SemanticTokensRangeRequest=Ce.SemanticTokensDeltaRequest=Ce.SemanticTokensRequest=Ce.SemanticTokensRegistrationType=Ce.TokenFormat=void 0;var nt=se(),Ja;(function(e){e.Relative="relative"})(Ja||(Ce.TokenFormat=Ja={}));var Dn;(function(e){e.method="textDocument/semanticTokens",e.type=new nt.RegistrationType(e.method)})(Dn||(Ce.SemanticTokensRegistrationType=Dn={}));var Wa;(function(e){e.method="textDocument/semanticTokens/full",e.messageDirection=nt.MessageDirection.clientToServer,e.type=new nt.ProtocolRequestType(e.method),e.registrationMethod=Dn.method})(Wa||(Ce.SemanticTokensRequest=Wa={}));var Ha;(function(e){e.method="textDocument/semanticTokens/full/delta",e.messageDirection=nt.MessageDirection.clientToServer,e.type=new nt.ProtocolRequestType(e.method),e.registrationMethod=Dn.method})(Ha||(Ce.SemanticTokensDeltaRequest=Ha={}));var Ua;(function(e){e.method="textDocument/semanticTokens/range",e.messageDirection=nt.MessageDirection.clientToServer,e.type=new nt.ProtocolRequestType(e.method),e.registrationMethod=Dn.method})(Ua||(Ce.SemanticTokensRangeRequest=Ua={}));var $a;(function(e){e.method="workspace/semanticTokens/refresh",e.messageDirection=nt.MessageDirection.serverToClient,e.type=new nt.ProtocolRequestType0(e.method)})($a||(Ce.SemanticTokensRefreshRequest=$a={}))});var Ga=O(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.ShowDocumentRequest=void 0;var Ba=se(),Va;(function(e){e.method="window/showDocument",e.messageDirection=Ba.MessageDirection.serverToClient,e.type=new Ba.ProtocolRequestType(e.method)})(Va||(qr.ShowDocumentRequest=Va={}))});var Qa=O(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.LinkedEditingRangeRequest=void 0;var Xa=se(),Ka;(function(e){e.method="textDocument/linkedEditingRange",e.messageDirection=Xa.MessageDirection.clientToServer,e.type=new Xa.ProtocolRequestType(e.method)})(Ka||(Nr.LinkedEditingRangeRequest=Ka={}))});var oc=O(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.WillDeleteFilesRequest=_e.DidDeleteFilesNotification=_e.DidRenameFilesNotification=_e.WillRenameFilesRequest=_e.DidCreateFilesNotification=_e.WillCreateFilesRequest=_e.FileOperationPatternKind=void 0;var Ee=se(),Za;(function(e){e.file="file",e.folder="folder"})(Za||(_e.FileOperationPatternKind=Za={}));var Ya;(function(e){e.method="workspace/willCreateFiles",e.messageDirection=Ee.MessageDirection.clientToServer,e.type=new Ee.ProtocolRequestType(e.method)})(Ya||(_e.WillCreateFilesRequest=Ya={}));var ec;(function(e){e.method="workspace/didCreateFiles",e.messageDirection=Ee.MessageDirection.clientToServer,e.type=new Ee.ProtocolNotificationType(e.method)})(ec||(_e.DidCreateFilesNotification=ec={}));var tc;(function(e){e.method="workspace/willRenameFiles",e.messageDirection=Ee.MessageDirection.clientToServer,e.type=new Ee.ProtocolRequestType(e.method)})(tc||(_e.WillRenameFilesRequest=tc={}));var nc;(function(e){e.method="workspace/didRenameFiles",e.messageDirection=Ee.MessageDirection.clientToServer,e.type=new Ee.ProtocolNotificationType(e.method)})(nc||(_e.DidRenameFilesNotification=nc={}));var rc;(function(e){e.method="workspace/didDeleteFiles",e.messageDirection=Ee.MessageDirection.clientToServer,e.type=new Ee.ProtocolNotificationType(e.method)})(rc||(_e.DidDeleteFilesNotification=rc={}));var ic;(function(e){e.method="workspace/willDeleteFiles",e.messageDirection=Ee.MessageDirection.clientToServer,e.type=new Ee.ProtocolRequestType(e.method)})(ic||(_e.WillDeleteFilesRequest=ic={}))});var lc=O(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.MonikerRequest=ht.MonikerKind=ht.UniquenessLevel=void 0;var sc=se(),ac;(function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global"})(ac||(ht.UniquenessLevel=ac={}));var cc;(function(e){e.$import="import",e.$export="export",e.local="local"})(cc||(ht.MonikerKind=cc={}));var uc;(function(e){e.method="textDocument/moniker",e.messageDirection=sc.MessageDirection.clientToServer,e.type=new sc.ProtocolRequestType(e.method)})(uc||(ht.MonikerRequest=uc={}))});var pc=O(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.TypeHierarchySubtypesRequest=pt.TypeHierarchySupertypesRequest=pt.TypeHierarchyPrepareRequest=void 0;var Yt=se(),dc;(function(e){e.method="textDocument/prepareTypeHierarchy",e.messageDirection=Yt.MessageDirection.clientToServer,e.type=new Yt.ProtocolRequestType(e.method)})(dc||(pt.TypeHierarchyPrepareRequest=dc={}));var fc;(function(e){e.method="typeHierarchy/supertypes",e.messageDirection=Yt.MessageDirection.clientToServer,e.type=new Yt.ProtocolRequestType(e.method)})(fc||(pt.TypeHierarchySupertypesRequest=fc={}));var hc;(function(e){e.method="typeHierarchy/subtypes",e.messageDirection=Yt.MessageDirection.clientToServer,e.type=new Yt.ProtocolRequestType(e.method)})(hc||(pt.TypeHierarchySubtypesRequest=hc={}))});var yc=O(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.InlineValueRefreshRequest=en.InlineValueRequest=void 0;var Or=se(),mc;(function(e){e.method="textDocument/inlineValue",e.messageDirection=Or.MessageDirection.clientToServer,e.type=new Or.ProtocolRequestType(e.method)})(mc||(en.InlineValueRequest=mc={}));var gc;(function(e){e.method="workspace/inlineValue/refresh",e.messageDirection=Or.MessageDirection.serverToClient,e.type=new Or.ProtocolRequestType0(e.method)})(gc||(en.InlineValueRefreshRequest=gc={}))});var _c=O(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.InlayHintRefreshRequest=mt.InlayHintResolveRequest=mt.InlayHintRequest=void 0;var tn=se(),bc;(function(e){e.method="textDocument/inlayHint",e.messageDirection=tn.MessageDirection.clientToServer,e.type=new tn.ProtocolRequestType(e.method)})(bc||(mt.InlayHintRequest=bc={}));var vc;(function(e){e.method="inlayHint/resolve",e.messageDirection=tn.MessageDirection.clientToServer,e.type=new tn.ProtocolRequestType(e.method)})(vc||(mt.InlayHintResolveRequest=vc={}));var Tc;(function(e){e.method="workspace/inlayHint/refresh",e.messageDirection=tn.MessageDirection.serverToClient,e.type=new tn.ProtocolRequestType0(e.method)})(Tc||(mt.InlayHintRefreshRequest=Tc={}))});var kc=O(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.DiagnosticRefreshRequest=Me.WorkspaceDiagnosticRequest=Me.DocumentDiagnosticRequest=Me.DocumentDiagnosticReportKind=Me.DiagnosticServerCancellationData=void 0;var Cc=kt(),cf=vr(),nn=se(),Dc;(function(e){function t(n){let r=n;return r&&cf.boolean(r.retriggerRequest)}e.is=t})(Dc||(Me.DiagnosticServerCancellationData=Dc={}));var Rc;(function(e){e.Full="full",e.Unchanged="unchanged"})(Rc||(Me.DocumentDiagnosticReportKind=Rc={}));var wc;(function(e){e.method="textDocument/diagnostic",e.messageDirection=nn.MessageDirection.clientToServer,e.type=new nn.ProtocolRequestType(e.method),e.partialResult=new Cc.ProgressType})(wc||(Me.DocumentDiagnosticRequest=wc={}));var Sc;(function(e){e.method="workspace/diagnostic",e.messageDirection=nn.MessageDirection.clientToServer,e.type=new nn.ProtocolRequestType(e.method),e.partialResult=new Cc.ProgressType})(Sc||(Me.WorkspaceDiagnosticRequest=Sc={}));var Pc;(function(e){e.method="workspace/diagnostic/refresh",e.messageDirection=nn.MessageDirection.serverToClient,e.type=new nn.ProtocolRequestType0(e.method)})(Pc||(Me.DiagnosticRefreshRequest=Pc={}))});var jc=O(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.DidCloseNotebookDocumentNotification=de.DidSaveNotebookDocumentNotification=de.DidChangeNotebookDocumentNotification=de.NotebookCellArrayChange=de.DidOpenNotebookDocumentNotification=de.NotebookDocumentSyncRegistrationType=de.NotebookDocument=de.NotebookCell=de.ExecutionSummary=de.NotebookCellKind=void 0;var Rn=br(),ze=vr(),Ge=se(),Eo;(function(e){e.Markup=1,e.Code=2;function t(n){return n===1||n===2}e.is=t})(Eo||(de.NotebookCellKind=Eo={}));var Mo;(function(e){function t(i,a){let d={executionOrder:i};return(a===!0||a===!1)&&(d.success=a),d}e.create=t;function n(i){let a=i;return ze.objectLiteral(a)&&Rn.uinteger.is(a.executionOrder)&&(a.success===void 0||ze.boolean(a.success))}e.is=n;function r(i,a){return i===a?!0:i==null||a===null||a===void 0?!1:i.executionOrder===a.executionOrder&&i.success===a.success}e.equals=r})(Mo||(de.ExecutionSummary=Mo={}));var xr;(function(e){function t(a,d){return{kind:a,document:d}}e.create=t;function n(a){let d=a;return ze.objectLiteral(d)&&Eo.is(d.kind)&&Rn.DocumentUri.is(d.document)&&(d.metadata===void 0||ze.objectLiteral(d.metadata))}e.is=n;function r(a,d){let b=new Set;return a.document!==d.document&&b.add("document"),a.kind!==d.kind&&b.add("kind"),a.executionSummary!==d.executionSummary&&b.add("executionSummary"),(a.metadata!==void 0||d.metadata!==void 0)&&!i(a.metadata,d.metadata)&&b.add("metadata"),(a.executionSummary!==void 0||d.executionSummary!==void 0)&&!Mo.equals(a.executionSummary,d.executionSummary)&&b.add("executionSummary"),b}e.diff=r;function i(a,d){if(a===d)return!0;if(a==null||d===null||d===void 0||typeof a!=typeof d||typeof a!="object")return!1;let b=Array.isArray(a),S=Array.isArray(d);if(b!==S)return!1;if(b&&S){if(a.length!==d.length)return!1;for(let D=0;D<a.length;D++)if(!i(a[D],d[D]))return!1}if(ze.objectLiteral(a)&&ze.objectLiteral(d)){let D=Object.keys(a),w=Object.keys(d);if(D.length!==w.length||(D.sort(),w.sort(),!i(D,w)))return!1;for(let C=0;C<D.length;C++){let E=D[C];if(!i(a[E],d[E]))return!1}}return!0}})(xr||(de.NotebookCell=xr={}));var qc;(function(e){function t(r,i,a,d){return{uri:r,notebookType:i,version:a,cells:d}}e.create=t;function n(r){let i=r;return ze.objectLiteral(i)&&ze.string(i.uri)&&Rn.integer.is(i.version)&&ze.typedArray(i.cells,xr.is)}e.is=n})(qc||(de.NotebookDocument=qc={}));var rn;(function(e){e.method="notebookDocument/sync",e.messageDirection=Ge.MessageDirection.clientToServer,e.type=new Ge.RegistrationType(e.method)})(rn||(de.NotebookDocumentSyncRegistrationType=rn={}));var Nc;(function(e){e.method="notebookDocument/didOpen",e.messageDirection=Ge.MessageDirection.clientToServer,e.type=new Ge.ProtocolNotificationType(e.method),e.registrationMethod=rn.method})(Nc||(de.DidOpenNotebookDocumentNotification=Nc={}));var Oc;(function(e){function t(r){let i=r;return ze.objectLiteral(i)&&Rn.uinteger.is(i.start)&&Rn.uinteger.is(i.deleteCount)&&(i.cells===void 0||ze.typedArray(i.cells,xr.is))}e.is=t;function n(r,i,a){let d={start:r,deleteCount:i};return a!==void 0&&(d.cells=a),d}e.create=n})(Oc||(de.NotebookCellArrayChange=Oc={}));var xc;(function(e){e.method="notebookDocument/didChange",e.messageDirection=Ge.MessageDirection.clientToServer,e.type=new Ge.ProtocolNotificationType(e.method),e.registrationMethod=rn.method})(xc||(de.DidChangeNotebookDocumentNotification=xc={}));var Ec;(function(e){e.method="notebookDocument/didSave",e.messageDirection=Ge.MessageDirection.clientToServer,e.type=new Ge.ProtocolNotificationType(e.method),e.registrationMethod=rn.method})(Ec||(de.DidSaveNotebookDocumentNotification=Ec={}));var Mc;(function(e){e.method="notebookDocument/didClose",e.messageDirection=Ge.MessageDirection.clientToServer,e.type=new Ge.ProtocolNotificationType(e.method),e.registrationMethod=rn.method})(Mc||(de.DidCloseNotebookDocumentNotification=Mc={}))});var Fc=O(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.InlineCompletionRequest=void 0;var Ic=se(),Ac;(function(e){e.method="textDocument/inlineCompletion",e.messageDirection=Ic.MessageDirection.clientToServer,e.type=new Ic.ProtocolRequestType(e.method)})(Ac||(Er.InlineCompletionRequest=Ac={}))});var Qu=O(u=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});u.WorkspaceSymbolRequest=u.CodeActionResolveRequest=u.CodeActionRequest=u.DocumentSymbolRequest=u.DocumentHighlightRequest=u.ReferencesRequest=u.DefinitionRequest=u.SignatureHelpRequest=u.SignatureHelpTriggerKind=u.HoverRequest=u.CompletionResolveRequest=u.CompletionRequest=u.CompletionTriggerKind=u.PublishDiagnosticsNotification=u.WatchKind=u.RelativePattern=u.FileChangeType=u.DidChangeWatchedFilesNotification=u.WillSaveTextDocumentWaitUntilRequest=u.WillSaveTextDocumentNotification=u.TextDocumentSaveReason=u.DidSaveTextDocumentNotification=u.DidCloseTextDocumentNotification=u.DidChangeTextDocumentNotification=u.TextDocumentContentChangeEvent=u.DidOpenTextDocumentNotification=u.TextDocumentSyncKind=u.TelemetryEventNotification=u.LogMessageNotification=u.ShowMessageRequest=u.ShowMessageNotification=u.MessageType=u.DidChangeConfigurationNotification=u.ExitNotification=u.ShutdownRequest=u.InitializedNotification=u.InitializeErrorCodes=u.InitializeRequest=u.WorkDoneProgressOptions=u.TextDocumentRegistrationOptions=u.StaticRegistrationOptions=u.PositionEncodingKind=u.FailureHandlingKind=u.ResourceOperationKind=u.UnregistrationRequest=u.RegistrationRequest=u.DocumentSelector=u.NotebookCellTextDocumentFilter=u.NotebookDocumentFilter=u.TextDocumentFilter=void 0;u.MonikerRequest=u.MonikerKind=u.UniquenessLevel=u.WillDeleteFilesRequest=u.DidDeleteFilesNotification=u.WillRenameFilesRequest=u.DidRenameFilesNotification=u.WillCreateFilesRequest=u.DidCreateFilesNotification=u.FileOperationPatternKind=u.LinkedEditingRangeRequest=u.ShowDocumentRequest=u.SemanticTokensRegistrationType=u.SemanticTokensRefreshRequest=u.SemanticTokensRangeRequest=u.SemanticTokensDeltaRequest=u.SemanticTokensRequest=u.TokenFormat=u.CallHierarchyPrepareRequest=u.CallHierarchyOutgoingCallsRequest=u.CallHierarchyIncomingCallsRequest=u.WorkDoneProgressCancelNotification=u.WorkDoneProgressCreateRequest=u.WorkDoneProgress=u.SelectionRangeRequest=u.DeclarationRequest=u.FoldingRangeRefreshRequest=u.FoldingRangeRequest=u.ColorPresentationRequest=u.DocumentColorRequest=u.ConfigurationRequest=u.DidChangeWorkspaceFoldersNotification=u.WorkspaceFoldersRequest=u.TypeDefinitionRequest=u.ImplementationRequest=u.ApplyWorkspaceEditRequest=u.ExecuteCommandRequest=u.PrepareRenameRequest=u.RenameRequest=u.PrepareSupportDefaultBehavior=u.DocumentOnTypeFormattingRequest=u.DocumentRangesFormattingRequest=u.DocumentRangeFormattingRequest=u.DocumentFormattingRequest=u.DocumentLinkResolveRequest=u.DocumentLinkRequest=u.CodeLensRefreshRequest=u.CodeLensResolveRequest=u.CodeLensRequest=u.WorkspaceSymbolResolveRequest=void 0;u.InlineCompletionRequest=u.DidCloseNotebookDocumentNotification=u.DidSaveNotebookDocumentNotification=u.DidChangeNotebookDocumentNotification=u.NotebookCellArrayChange=u.DidOpenNotebookDocumentNotification=u.NotebookDocumentSyncRegistrationType=u.NotebookDocument=u.NotebookCell=u.ExecutionSummary=u.NotebookCellKind=u.DiagnosticRefreshRequest=u.WorkspaceDiagnosticRequest=u.DocumentDiagnosticRequest=u.DocumentDiagnosticReportKind=u.DiagnosticServerCancellationData=u.InlayHintRefreshRequest=u.InlayHintResolveRequest=u.InlayHintRequest=u.InlineValueRefreshRequest=u.InlineValueRequest=u.TypeHierarchySupertypesRequest=u.TypeHierarchySubtypesRequest=u.TypeHierarchyPrepareRequest=void 0;var P=se(),Lc=br(),ye=vr(),uf=la();Object.defineProperty(u,"ImplementationRequest",{enumerable:!0,get:function(){return uf.ImplementationRequest}});var lf=ha();Object.defineProperty(u,"TypeDefinitionRequest",{enumerable:!0,get:function(){return lf.TypeDefinitionRequest}});var Vu=ga();Object.defineProperty(u,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Vu.WorkspaceFoldersRequest}});Object.defineProperty(u,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Vu.DidChangeWorkspaceFoldersNotification}});var df=va();Object.defineProperty(u,"ConfigurationRequest",{enumerable:!0,get:function(){return df.ConfigurationRequest}});var Gu=Da();Object.defineProperty(u,"DocumentColorRequest",{enumerable:!0,get:function(){return Gu.DocumentColorRequest}});Object.defineProperty(u,"ColorPresentationRequest",{enumerable:!0,get:function(){return Gu.ColorPresentationRequest}});var Xu=Sa();Object.defineProperty(u,"FoldingRangeRequest",{enumerable:!0,get:function(){return Xu.FoldingRangeRequest}});Object.defineProperty(u,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return Xu.FoldingRangeRefreshRequest}});var ff=ka();Object.defineProperty(u,"DeclarationRequest",{enumerable:!0,get:function(){return ff.DeclarationRequest}});var hf=Oa();Object.defineProperty(u,"SelectionRangeRequest",{enumerable:!0,get:function(){return hf.SelectionRangeRequest}});var Lo=ja();Object.defineProperty(u,"WorkDoneProgress",{enumerable:!0,get:function(){return Lo.WorkDoneProgress}});Object.defineProperty(u,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Lo.WorkDoneProgressCreateRequest}});Object.defineProperty(u,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Lo.WorkDoneProgressCancelNotification}});var Jo=La();Object.defineProperty(u,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Jo.CallHierarchyIncomingCallsRequest}});Object.defineProperty(u,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Jo.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(u,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Jo.CallHierarchyPrepareRequest}});var on=za();Object.defineProperty(u,"TokenFormat",{enumerable:!0,get:function(){return on.TokenFormat}});Object.defineProperty(u,"SemanticTokensRequest",{enumerable:!0,get:function(){return on.SemanticTokensRequest}});Object.defineProperty(u,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return on.SemanticTokensDeltaRequest}});Object.defineProperty(u,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return on.SemanticTokensRangeRequest}});Object.defineProperty(u,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return on.SemanticTokensRefreshRequest}});Object.defineProperty(u,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return on.SemanticTokensRegistrationType}});var pf=Ga();Object.defineProperty(u,"ShowDocumentRequest",{enumerable:!0,get:function(){return pf.ShowDocumentRequest}});var mf=Qa();Object.defineProperty(u,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return mf.LinkedEditingRangeRequest}});var qt=oc();Object.defineProperty(u,"FileOperationPatternKind",{enumerable:!0,get:function(){return qt.FileOperationPatternKind}});Object.defineProperty(u,"DidCreateFilesNotification",{enumerable:!0,get:function(){return qt.DidCreateFilesNotification}});Object.defineProperty(u,"WillCreateFilesRequest",{enumerable:!0,get:function(){return qt.WillCreateFilesRequest}});Object.defineProperty(u,"DidRenameFilesNotification",{enumerable:!0,get:function(){return qt.DidRenameFilesNotification}});Object.defineProperty(u,"WillRenameFilesRequest",{enumerable:!0,get:function(){return qt.WillRenameFilesRequest}});Object.defineProperty(u,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return qt.DidDeleteFilesNotification}});Object.defineProperty(u,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return qt.WillDeleteFilesRequest}});var Wo=lc();Object.defineProperty(u,"UniquenessLevel",{enumerable:!0,get:function(){return Wo.UniquenessLevel}});Object.defineProperty(u,"MonikerKind",{enumerable:!0,get:function(){return Wo.MonikerKind}});Object.defineProperty(u,"MonikerRequest",{enumerable:!0,get:function(){return Wo.MonikerRequest}});var Ho=pc();Object.defineProperty(u,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ho.TypeHierarchyPrepareRequest}});Object.defineProperty(u,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Ho.TypeHierarchySubtypesRequest}});Object.defineProperty(u,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Ho.TypeHierarchySupertypesRequest}});var Ku=yc();Object.defineProperty(u,"InlineValueRequest",{enumerable:!0,get:function(){return Ku.InlineValueRequest}});Object.defineProperty(u,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Ku.InlineValueRefreshRequest}});var Uo=_c();Object.defineProperty(u,"InlayHintRequest",{enumerable:!0,get:function(){return Uo.InlayHintRequest}});Object.defineProperty(u,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Uo.InlayHintResolveRequest}});Object.defineProperty(u,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Uo.InlayHintRefreshRequest}});var wn=kc();Object.defineProperty(u,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return wn.DiagnosticServerCancellationData}});Object.defineProperty(u,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return wn.DocumentDiagnosticReportKind}});Object.defineProperty(u,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return wn.DocumentDiagnosticRequest}});Object.defineProperty(u,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return wn.WorkspaceDiagnosticRequest}});Object.defineProperty(u,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return wn.DiagnosticRefreshRequest}});var Xe=jc();Object.defineProperty(u,"NotebookCellKind",{enumerable:!0,get:function(){return Xe.NotebookCellKind}});Object.defineProperty(u,"ExecutionSummary",{enumerable:!0,get:function(){return Xe.ExecutionSummary}});Object.defineProperty(u,"NotebookCell",{enumerable:!0,get:function(){return Xe.NotebookCell}});Object.defineProperty(u,"NotebookDocument",{enumerable:!0,get:function(){return Xe.NotebookDocument}});Object.defineProperty(u,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Xe.NotebookDocumentSyncRegistrationType}});Object.defineProperty(u,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Xe.DidOpenNotebookDocumentNotification}});Object.defineProperty(u,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Xe.NotebookCellArrayChange}});Object.defineProperty(u,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Xe.DidChangeNotebookDocumentNotification}});Object.defineProperty(u,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Xe.DidSaveNotebookDocumentNotification}});Object.defineProperty(u,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Xe.DidCloseNotebookDocumentNotification}});var gf=Fc();Object.defineProperty(u,"InlineCompletionRequest",{enumerable:!0,get:function(){return gf.InlineCompletionRequest}});var jo;(function(e){function t(n){let r=n;return ye.string(r)||ye.string(r.language)||ye.string(r.scheme)||ye.string(r.pattern)}e.is=t})(jo||(u.TextDocumentFilter=jo={}));var Io;(function(e){function t(n){let r=n;return ye.objectLiteral(r)&&(ye.string(r.notebookType)||ye.string(r.scheme)||ye.string(r.pattern))}e.is=t})(Io||(u.NotebookDocumentFilter=Io={}));var Ao;(function(e){function t(n){let r=n;return ye.objectLiteral(r)&&(ye.string(r.notebook)||Io.is(r.notebook))&&(r.language===void 0||ye.string(r.language))}e.is=t})(Ao||(u.NotebookCellTextDocumentFilter=Ao={}));var Fo;(function(e){function t(n){if(!Array.isArray(n))return!1;for(let r of n)if(!ye.string(r)&&!jo.is(r)&&!Ao.is(r))return!1;return!0}e.is=t})(Fo||(u.DocumentSelector=Fo={}));var Jc;(function(e){e.method="client/registerCapability",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolRequestType(e.method)})(Jc||(u.RegistrationRequest=Jc={}));var Wc;(function(e){e.method="client/unregisterCapability",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolRequestType(e.method)})(Wc||(u.UnregistrationRequest=Wc={}));var Hc;(function(e){e.Create="create",e.Rename="rename",e.Delete="delete"})(Hc||(u.ResourceOperationKind=Hc={}));var Uc;(function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"})(Uc||(u.FailureHandlingKind=Uc={}));var $c;(function(e){e.UTF8="utf-8",e.UTF16="utf-16",e.UTF32="utf-32"})($c||(u.PositionEncodingKind=$c={}));var zc;(function(e){function t(n){let r=n;return r&&ye.string(r.id)&&r.id.length>0}e.hasId=t})(zc||(u.StaticRegistrationOptions=zc={}));var Bc;(function(e){function t(n){let r=n;return r&&(r.documentSelector===null||Fo.is(r.documentSelector))}e.is=t})(Bc||(u.TextDocumentRegistrationOptions=Bc={}));var Vc;(function(e){function t(r){let i=r;return ye.objectLiteral(i)&&(i.workDoneProgress===void 0||ye.boolean(i.workDoneProgress))}e.is=t;function n(r){let i=r;return i&&ye.boolean(i.workDoneProgress)}e.hasWorkDoneProgress=n})(Vc||(u.WorkDoneProgressOptions=Vc={}));var Gc;(function(e){e.method="initialize",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Gc||(u.InitializeRequest=Gc={}));var Xc;(function(e){e.unknownProtocolVersion=1})(Xc||(u.InitializeErrorCodes=Xc={}));var Kc;(function(e){e.method="initialized",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType(e.method)})(Kc||(u.InitializedNotification=Kc={}));var Qc;(function(e){e.method="shutdown",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType0(e.method)})(Qc||(u.ShutdownRequest=Qc={}));var Zc;(function(e){e.method="exit",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType0(e.method)})(Zc||(u.ExitNotification=Zc={}));var Yc;(function(e){e.method="workspace/didChangeConfiguration",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType(e.method)})(Yc||(u.DidChangeConfigurationNotification=Yc={}));var eu;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5})(eu||(u.MessageType=eu={}));var tu;(function(e){e.method="window/showMessage",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolNotificationType(e.method)})(tu||(u.ShowMessageNotification=tu={}));var nu;(function(e){e.method="window/showMessageRequest",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolRequestType(e.method)})(nu||(u.ShowMessageRequest=nu={}));var ru;(function(e){e.method="window/logMessage",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolNotificationType(e.method)})(ru||(u.LogMessageNotification=ru={}));var iu;(function(e){e.method="telemetry/event",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolNotificationType(e.method)})(iu||(u.TelemetryEventNotification=iu={}));var ou;(function(e){e.None=0,e.Full=1,e.Incremental=2})(ou||(u.TextDocumentSyncKind=ou={}));var su;(function(e){e.method="textDocument/didOpen",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType(e.method)})(su||(u.DidOpenTextDocumentNotification=su={}));var au;(function(e){function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}e.isIncremental=t;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}e.isFull=n})(au||(u.TextDocumentContentChangeEvent=au={}));var cu;(function(e){e.method="textDocument/didChange",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType(e.method)})(cu||(u.DidChangeTextDocumentNotification=cu={}));var uu;(function(e){e.method="textDocument/didClose",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType(e.method)})(uu||(u.DidCloseTextDocumentNotification=uu={}));var lu;(function(e){e.method="textDocument/didSave",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType(e.method)})(lu||(u.DidSaveTextDocumentNotification=lu={}));var du;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3})(du||(u.TextDocumentSaveReason=du={}));var fu;(function(e){e.method="textDocument/willSave",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType(e.method)})(fu||(u.WillSaveTextDocumentNotification=fu={}));var hu;(function(e){e.method="textDocument/willSaveWaitUntil",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(hu||(u.WillSaveTextDocumentWaitUntilRequest=hu={}));var pu;(function(e){e.method="workspace/didChangeWatchedFiles",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType(e.method)})(pu||(u.DidChangeWatchedFilesNotification=pu={}));var mu;(function(e){e.Created=1,e.Changed=2,e.Deleted=3})(mu||(u.FileChangeType=mu={}));var gu;(function(e){function t(n){let r=n;return ye.objectLiteral(r)&&(Lc.URI.is(r.baseUri)||Lc.WorkspaceFolder.is(r.baseUri))&&ye.string(r.pattern)}e.is=t})(gu||(u.RelativePattern=gu={}));var yu;(function(e){e.Create=1,e.Change=2,e.Delete=4})(yu||(u.WatchKind=yu={}));var bu;(function(e){e.method="textDocument/publishDiagnostics",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolNotificationType(e.method)})(bu||(u.PublishDiagnosticsNotification=bu={}));var vu;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3})(vu||(u.CompletionTriggerKind=vu={}));var Tu;(function(e){e.method="textDocument/completion",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Tu||(u.CompletionRequest=Tu={}));var _u;(function(e){e.method="completionItem/resolve",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(_u||(u.CompletionResolveRequest=_u={}));var Du;(function(e){e.method="textDocument/hover",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Du||(u.HoverRequest=Du={}));var Ru;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3})(Ru||(u.SignatureHelpTriggerKind=Ru={}));var wu;(function(e){e.method="textDocument/signatureHelp",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(wu||(u.SignatureHelpRequest=wu={}));var Su;(function(e){e.method="textDocument/definition",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Su||(u.DefinitionRequest=Su={}));var Pu;(function(e){e.method="textDocument/references",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Pu||(u.ReferencesRequest=Pu={}));var Cu;(function(e){e.method="textDocument/documentHighlight",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Cu||(u.DocumentHighlightRequest=Cu={}));var ku;(function(e){e.method="textDocument/documentSymbol",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(ku||(u.DocumentSymbolRequest=ku={}));var qu;(function(e){e.method="textDocument/codeAction",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(qu||(u.CodeActionRequest=qu={}));var Nu;(function(e){e.method="codeAction/resolve",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Nu||(u.CodeActionResolveRequest=Nu={}));var Ou;(function(e){e.method="workspace/symbol",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Ou||(u.WorkspaceSymbolRequest=Ou={}));var xu;(function(e){e.method="workspaceSymbol/resolve",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(xu||(u.WorkspaceSymbolResolveRequest=xu={}));var Eu;(function(e){e.method="textDocument/codeLens",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Eu||(u.CodeLensRequest=Eu={}));var Mu;(function(e){e.method="codeLens/resolve",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Mu||(u.CodeLensResolveRequest=Mu={}));var ju;(function(e){e.method="workspace/codeLens/refresh",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolRequestType0(e.method)})(ju||(u.CodeLensRefreshRequest=ju={}));var Iu;(function(e){e.method="textDocument/documentLink",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Iu||(u.DocumentLinkRequest=Iu={}));var Au;(function(e){e.method="documentLink/resolve",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Au||(u.DocumentLinkResolveRequest=Au={}));var Fu;(function(e){e.method="textDocument/formatting",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Fu||(u.DocumentFormattingRequest=Fu={}));var Lu;(function(e){e.method="textDocument/rangeFormatting",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Lu||(u.DocumentRangeFormattingRequest=Lu={}));var Ju;(function(e){e.method="textDocument/rangesFormatting",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Ju||(u.DocumentRangesFormattingRequest=Ju={}));var Wu;(function(e){e.method="textDocument/onTypeFormatting",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Wu||(u.DocumentOnTypeFormattingRequest=Wu={}));var Hu;(function(e){e.Identifier=1})(Hu||(u.PrepareSupportDefaultBehavior=Hu={}));var Uu;(function(e){e.method="textDocument/rename",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Uu||(u.RenameRequest=Uu={}));var $u;(function(e){e.method="textDocument/prepareRename",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})($u||(u.PrepareRenameRequest=$u={}));var zu;(function(e){e.method="workspace/executeCommand",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(zu||(u.ExecuteCommandRequest=zu={}));var Bu;(function(e){e.method="workspace/applyEdit",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolRequestType("workspace/applyEdit")})(Bu||(u.ApplyWorkspaceEditRequest=Bu={}))});var Yu=O(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.createProtocolConnection=void 0;var Zu=kt();function yf(e,t,n,r){return Zu.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Zu.createMessageConnection)(e,t,n,r)}Mr.createProtocolConnection=yf});var tl=O(ke=>{"use strict";var bf=ke&&ke.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),jr=ke&&ke.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&bf(t,e,n)};Object.defineProperty(ke,"__esModule",{value:!0});ke.LSPErrorCodes=ke.createProtocolConnection=void 0;jr(kt(),ke);jr(br(),ke);jr(se(),ke);jr(Qu(),ke);var vf=Yu();Object.defineProperty(ke,"createProtocolConnection",{enumerable:!0,get:function(){return vf.createProtocolConnection}});var el;(function(e){e.lspReservedErrorRangeStart=-32899,e.RequestFailed=-32803,e.ServerCancelled=-32802,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800})(el||(ke.LSPErrorCodes=el={}))});var fe=O(Ke=>{"use strict";var Tf=Ke&&Ke.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),nl=Ke&&Ke.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Tf(t,e,n)};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.createProtocolConnection=void 0;var _f=Co();nl(Co(),Ke);nl(tl(),Ke);function Df(e,t,n,r){return(0,_f.createMessageConnection)(e,t,n,r)}Ke.createProtocolConnection=Df});var $o=O(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.generateUuid=je.parse=je.isUUID=je.v4=je.empty=void 0;var Sn=class{constructor(t){this._value=t}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}},Pn=class e extends Sn{static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return e._oneOf(e._chars)}constructor(){super([e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-","4",e._randomHex(),e._randomHex(),e._randomHex(),"-",e._oneOf(e._timeHighBits),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex()].join(""))}};Pn._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Pn._timeHighBits=["8","9","a","b"];je.empty=new Sn("00000000-0000-0000-0000-000000000000");function rl(){return new Pn}je.v4=rl;var Rf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function il(e){return Rf.test(e)}je.isUUID=il;function wf(e){if(!il(e))throw new Error("invalid uuid");return new Sn(e)}je.parse=wf;function Sf(){return rl().asHex()}je.generateUuid=Sf});var ol=O(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.attachPartialResult=yt.ProgressFeature=yt.attachWorkDone=void 0;var gt=fe(),Pf=$o(),Nt=class e{constructor(t,n){this._connection=t,this._token=n,e.Instances.set(this._token,this)}begin(t,n,r,i){let a={kind:"begin",title:t,percentage:n,message:r,cancellable:i};this._connection.sendProgress(gt.WorkDoneProgress.type,this._token,a)}report(t,n){let r={kind:"report"};typeof t=="number"?(r.percentage=t,n!==void 0&&(r.message=n)):r.message=t,this._connection.sendProgress(gt.WorkDoneProgress.type,this._token,r)}done(){e.Instances.delete(this._token),this._connection.sendProgress(gt.WorkDoneProgress.type,this._token,{kind:"end"})}};Nt.Instances=new Map;var Ir=class extends Nt{constructor(t,n){super(t,n),this._source=new gt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Cn=class{constructor(){}begin(){}report(){}done(){}},Ar=class extends Cn{constructor(){super(),this._source=new gt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Cf(e,t){if(t===void 0||t.workDoneToken===void 0)return new Cn;let n=t.workDoneToken;return delete t.workDoneToken,new Nt(e,n)}yt.attachWorkDone=Cf;var kf=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(t){super.initialize(t),t?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(gt.WorkDoneProgressCancelNotification.type,n=>{let r=Nt.Instances.get(n.token);(r instanceof Ir||r instanceof Ar)&&r.cancel()}))}attachWorkDoneProgress(t){return t===void 0?new Cn:new Nt(this.connection,t)}createWorkDoneProgress(){if(this._progressSupported){let t=(0,Pf.generateUuid)();return this.connection.sendRequest(gt.WorkDoneProgressCreateRequest.type,{token:t}).then(()=>new Ir(this.connection,t))}else return Promise.resolve(new Ar)}};yt.ProgressFeature=kf;var zo;(function(e){e.type=new gt.ProgressType})(zo||(zo={}));var Bo=class{constructor(t,n){this._connection=t,this._token=n}report(t){this._connection.sendProgress(zo.type,this._token,t)}};function qf(e,t){if(t===void 0||t.partialResultToken===void 0)return;let n=t.partialResultToken;return delete t.partialResultToken,new Bo(e,n)}yt.attachPartialResult=qf});var sl=O(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.ConfigurationFeature=void 0;var Nf=fe(),Of=Xn(),xf=e=>class extends e{getConfiguration(t){return t?Of.string(t)?this._getConfiguration({section:t}):this._getConfiguration(t):this._getConfiguration({})}_getConfiguration(t){let n={items:Array.isArray(t)?t:[t]};return this.connection.sendRequest(Nf.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(t)?r:r[0]:Array.isArray(t)?[]:null)}};Fr.ConfigurationFeature=xf});var al=O(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.WorkspaceFoldersFeature=void 0;var Lr=fe(),Ef=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(t){super.initialize(t);let n=t.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Lr.Emitter,this.connection.onNotification(Lr.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(t){super.fillServerCapabilities(t);let n=t.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Lr.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Lr.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Jr.WorkspaceFoldersFeature=Ef});var cl=O(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.CallHierarchyFeature=void 0;var Vo=fe(),Mf=e=>class extends e{get callHierarchy(){return{onPrepare:t=>this.connection.onRequest(Vo.CallHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:t=>{let n=Vo.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:t=>{let n=Vo.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Wr.CallHierarchyFeature=Mf});var Xo=O(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.SemanticTokensBuilder=bt.SemanticTokensDiff=bt.SemanticTokensFeature=void 0;var Hr=fe(),jf=e=>class extends e{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(Hr.SemanticTokensRefreshRequest.type),on:t=>{let n=Hr.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:t=>{let n=Hr.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:t=>{let n=Hr.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};bt.SemanticTokensFeature=jf;var Ur=class{constructor(t,n){this.originalSequence=t,this.modifiedSequence=n}computeDiff(){let t=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<t&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<t){let i=t-1,a=n-1;for(;i>=r&&a>=r&&this.originalSequence[i]===this.modifiedSequence[a];)i--,a--;(i<r||a<r)&&(i++,a++);let d=i-r+1,b=this.modifiedSequence.slice(r,a+1);return b.length===1&&b[0]===this.originalSequence[i]?[{start:r,deleteCount:d-1}]:[{start:r,deleteCount:d,data:b}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<t?[{start:r,deleteCount:t-r}]:[]}};bt.SemanticTokensDiff=Ur;var Go=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(t,n,r,i,a){let d=t,b=n;this._dataLen>0&&(d-=this._prevLine,d===0&&(b-=this._prevChar)),this._data[this._dataLen++]=d,this._data[this._dataLen++]=b,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=a,this._prevLine=t,this._prevChar=n}get id(){return this._id.toString()}previousResult(t){this.id===t&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Ur(this._prevData,this._data).computeDiff()}:this.build()}};bt.SemanticTokensBuilder=Go});var ul=O($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.ShowDocumentFeature=void 0;var If=fe(),Af=e=>class extends e{showDocument(t){return this.connection.sendRequest(If.ShowDocumentRequest.type,t)}};$r.ShowDocumentFeature=Af});var ll=O(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.FileOperationsFeature=void 0;var sn=fe(),Ff=e=>class extends e{onDidCreateFiles(t){return this.connection.onNotification(sn.DidCreateFilesNotification.type,n=>{t(n)})}onDidRenameFiles(t){return this.connection.onNotification(sn.DidRenameFilesNotification.type,n=>{t(n)})}onDidDeleteFiles(t){return this.connection.onNotification(sn.DidDeleteFilesNotification.type,n=>{t(n)})}onWillCreateFiles(t){return this.connection.onRequest(sn.WillCreateFilesRequest.type,(n,r)=>t(n,r))}onWillRenameFiles(t){return this.connection.onRequest(sn.WillRenameFilesRequest.type,(n,r)=>t(n,r))}onWillDeleteFiles(t){return this.connection.onRequest(sn.WillDeleteFilesRequest.type,(n,r)=>t(n,r))}};zr.FileOperationsFeature=Ff});var dl=O(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.LinkedEditingRangeFeature=void 0;var Lf=fe(),Jf=e=>class extends e{onLinkedEditingRange(t){return this.connection.onRequest(Lf.LinkedEditingRangeRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0))}};Br.LinkedEditingRangeFeature=Jf});var fl=O(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.TypeHierarchyFeature=void 0;var Ko=fe(),Wf=e=>class extends e{get typeHierarchy(){return{onPrepare:t=>this.connection.onRequest(Ko.TypeHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:t=>{let n=Ko.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:t=>{let n=Ko.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Vr.TypeHierarchyFeature=Wf});var pl=O(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.InlineValueFeature=void 0;var hl=fe(),Hf=e=>class extends e{get inlineValue(){return{refresh:()=>this.connection.sendRequest(hl.InlineValueRefreshRequest.type),on:t=>this.connection.onRequest(hl.InlineValueRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};Gr.InlineValueFeature=Hf});var gl=O(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.FoldingRangeFeature=void 0;var ml=fe(),Uf=e=>class extends e{get foldingRange(){return{refresh:()=>this.connection.sendRequest(ml.FoldingRangeRefreshRequest.type),on:t=>{let n=ml.FoldingRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Xr.FoldingRangeFeature=Uf});var yl=O(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.InlayHintFeature=void 0;var Qo=fe(),$f=e=>class extends e{get inlayHint(){return{refresh:()=>this.connection.sendRequest(Qo.InlayHintRefreshRequest.type),on:t=>this.connection.onRequest(Qo.InlayHintRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n))),resolve:t=>this.connection.onRequest(Qo.InlayHintResolveRequest.type,(n,r)=>t(n,r))}}};Kr.InlayHintFeature=$f});var bl=O(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.DiagnosticFeature=void 0;var kn=fe(),zf=e=>class extends e{get diagnostics(){return{refresh:()=>this.connection.sendRequest(kn.DiagnosticRefreshRequest.type),on:t=>this.connection.onRequest(kn.DocumentDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(kn.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:t=>this.connection.onRequest(kn.WorkspaceDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(kn.WorkspaceDiagnosticRequest.partialResult,n)))}}};Qr.DiagnosticFeature=zf});var Yo=O(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.TextDocuments=void 0;var Ot=fe(),Zo=class{constructor(t){this._configuration=t,this._syncedDocuments=new Map,this._onDidChangeContent=new Ot.Emitter,this._onDidOpen=new Ot.Emitter,this._onDidClose=new Ot.Emitter,this._onDidSave=new Ot.Emitter,this._onWillSave=new Ot.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(t){this._willSaveWaitUntil=t}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(t){return this._syncedDocuments.get(t)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(t){t.__textDocumentSync=Ot.TextDocumentSyncKind.Incremental;let n=[];return n.push(t.onDidOpenTextDocument(r=>{let i=r.textDocument,a=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,a);let d=Object.freeze({document:a});this._onDidOpen.fire(d),this._onDidChangeContent.fire(d)})),n.push(t.onDidChangeTextDocument(r=>{let i=r.textDocument,a=r.contentChanges;if(a.length===0)return;let{version:d}=i;if(d==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let b=this._syncedDocuments.get(i.uri);b!==void 0&&(b=this._configuration.update(b,a,d),this._syncedDocuments.set(i.uri,b),this._onDidChangeContent.fire(Object.freeze({document:b})))})),n.push(t.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(t.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(t.onWillSaveTextDocumentWaitUntil((r,i)=>{let a=this._syncedDocuments.get(r.textDocument.uri);return a!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:a,reason:r.reason}),i):[]})),n.push(t.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),Ot.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};Zr.TextDocuments=Zo});var ts=O(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.NotebookDocuments=an.NotebookSyncFeature=void 0;var Ie=fe(),vl=Yo(),Bf=e=>class extends e{get synchronization(){return{onDidOpenNotebookDocument:t=>this.connection.onNotification(Ie.DidOpenNotebookDocumentNotification.type,n=>{t(n)}),onDidChangeNotebookDocument:t=>this.connection.onNotification(Ie.DidChangeNotebookDocumentNotification.type,n=>{t(n)}),onDidSaveNotebookDocument:t=>this.connection.onNotification(Ie.DidSaveNotebookDocumentNotification.type,n=>{t(n)}),onDidCloseNotebookDocument:t=>this.connection.onNotification(Ie.DidCloseNotebookDocumentNotification.type,n=>{t(n)})}}};an.NotebookSyncFeature=Bf;var Yr=class e{onDidOpenTextDocument(t){return this.openHandler=t,Ie.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(t){this.openHandler&&this.openHandler(t)}onDidChangeTextDocument(t){return this.changeHandler=t,Ie.Disposable.create(()=>{this.changeHandler=t})}changeTextDocument(t){this.changeHandler&&this.changeHandler(t)}onDidCloseTextDocument(t){return this.closeHandler=t,Ie.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(t){this.closeHandler&&this.closeHandler(t)}onWillSaveTextDocument(){return e.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return e.NULL_DISPOSE}onDidSaveTextDocument(){return e.NULL_DISPOSE}};Yr.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var es=class{constructor(t){t instanceof vl.TextDocuments?this._cellTextDocuments=t:this._cellTextDocuments=new vl.TextDocuments(t),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Ie.Emitter,this._onDidChange=new Ie.Emitter,this._onDidSave=new Ie.Emitter,this._onDidClose=new Ie.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(t){return this._cellTextDocuments.get(t.document)}getNotebookDocument(t){return this.notebookDocuments.get(t)}getNotebookCell(t){let n=this.notebookCellMap.get(t);return n&&n[0]}findNotebookDocumentForCell(t){let n=typeof t=="string"?t:t.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(t){let n=new Yr,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(t.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let a of i.cellTextDocuments)n.openTextDocument({textDocument:a});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(t.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let a=this.notebookDocuments.get(i.notebookDocument.uri);if(a===void 0)return;a.version=i.notebookDocument.version;let d=a.metadata,b=!1,S=i.change;S.metadata!==void 0&&(b=!0,a.metadata=S.metadata);let D=[],w=[],C=[],E=[];if(S.cells!==void 0){let $=S.cells;if($.structure!==void 0){let v=$.structure.array;if(a.cells.splice(v.start,v.deleteCount,...v.cells!==void 0?v.cells:[]),$.structure.didOpen!==void 0)for(let y of $.structure.didOpen)n.openTextDocument({textDocument:y}),D.push(y.uri);if($.structure.didClose)for(let y of $.structure.didClose)n.closeTextDocument({textDocument:y}),w.push(y.uri)}if($.data!==void 0){let v=new Map($.data.map(y=>[y.document,y]));for(let y=0;y<=a.cells.length;y++){let k=v.get(a.cells[y].document);if(k!==void 0){let J=a.cells.splice(y,1,k);if(C.push({old:J[0],new:k}),v.delete(k.document),v.size===0)break}}}if($.textContent!==void 0)for(let v of $.textContent)n.changeTextDocument({textDocument:v.document,contentChanges:v.changes}),E.push(v.document.uri)}this.updateCellMap(a);let I={notebookDocument:a};b&&(I.metadata={old:d,new:a.metadata});let W=[];for(let $ of D)W.push(this.getNotebookCell($));let H=[];for(let $ of w)H.push(this.getNotebookCell($));let Z=[];for(let $ of E)Z.push(this.getNotebookCell($));(W.length>0||H.length>0||C.length>0||Z.length>0)&&(I.cells={added:W,removed:H,changed:{data:C,textContent:Z}}),(I.metadata!==void 0||I.cells!==void 0)&&this._onDidChange.fire(I)})),r.push(t.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let a=this.notebookDocuments.get(i.notebookDocument.uri);a!==void 0&&this._onDidSave.fire(a)})),r.push(t.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let a=this.notebookDocuments.get(i.notebookDocument.uri);if(a!==void 0){this._onDidClose.fire(a);for(let d of i.cellTextDocuments)n.closeTextDocument({textDocument:d});this.notebookDocuments.delete(i.notebookDocument.uri);for(let d of a.cells)this.notebookCellMap.delete(d.document)}})),Ie.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(t){for(let n of t.cells)this.notebookCellMap.set(n.document,[n,t])}};an.NotebookDocuments=es});var Tl=O(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.MonikerFeature=void 0;var Vf=fe(),Gf=e=>class extends e{get moniker(){return{on:t=>{let n=Vf.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};ei.MonikerFeature=Gf});var as=O(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.createConnection=G.combineFeatures=G.combineNotebooksFeatures=G.combineLanguagesFeatures=G.combineWorkspaceFeatures=G.combineWindowFeatures=G.combineClientFeatures=G.combineTracerFeatures=G.combineTelemetryFeatures=G.combineConsoleFeatures=G._NotebooksImpl=G._LanguagesImpl=G.BulkUnregistration=G.BulkRegistration=G.ErrorMessageTracker=void 0;var N=fe(),Ae=Xn(),rs=$o(),A=ol(),Xf=sl(),Kf=al(),Qf=cl(),Zf=Xo(),Yf=ul(),eh=ll(),th=dl(),nh=fl(),rh=pl(),ih=gl(),oh=yl(),sh=bl(),ah=ts(),ch=Tl();function ns(e){if(e!==null)return e}var is=class{constructor(){this._messages=Object.create(null)}add(t){let n=this._messages[t];n||(n=0),n++,this._messages[t]=n}sendErrors(t){Object.keys(this._messages).forEach(n=>{t.window.showErrorMessage(n)})}};G.ErrorMessageTracker=is;var ti=class{constructor(){}rawAttach(t){this._rawConnection=t}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(t){}initialize(t){}error(t){this.send(N.MessageType.Error,t)}warn(t){this.send(N.MessageType.Warning,t)}info(t){this.send(N.MessageType.Info,t)}log(t){this.send(N.MessageType.Log,t)}debug(t){this.send(N.MessageType.Debug,t)}send(t,n){this._rawConnection&&this._rawConnection.sendNotification(N.LogMessageNotification.type,{type:t,message:n}).catch(()=>{(0,N.RAL)().console.error("Sending log message failed")})}},os=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}showErrorMessage(t,...n){let r={type:N.MessageType.Error,message:t,actions:n};return this.connection.sendRequest(N.ShowMessageRequest.type,r).then(ns)}showWarningMessage(t,...n){let r={type:N.MessageType.Warning,message:t,actions:n};return this.connection.sendRequest(N.ShowMessageRequest.type,r).then(ns)}showInformationMessage(t,...n){let r={type:N.MessageType.Info,message:t,actions:n};return this.connection.sendRequest(N.ShowMessageRequest.type,r).then(ns)}},_l=(0,Yf.ShowDocumentFeature)((0,A.ProgressFeature)(os)),Dl;(function(e){function t(){return new ni}e.create=t})(Dl||(G.BulkRegistration=Dl={}));var ni=class{constructor(){this._registrations=[],this._registered=new Set}add(t,n){let r=Ae.string(t)?t:t.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=rs.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},Rl;(function(e){function t(){return new qn(void 0,[])}e.create=t})(Rl||(G.BulkUnregistration=Rl={}));var qn=class{constructor(t,n){this._connection=t,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(t){this._connection=t}add(t){this._unregistrations.set(t.method,t)}dispose(){let t=[];for(let r of this._unregistrations.values())t.push(r);let n={unregisterations:t};this._connection.sendRequest(N.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(t){let n=Ae.string(t)?t:t.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(N.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},a=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},ri=class{attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}register(t,n,r){return t instanceof ni?this.registerMany(t):t instanceof qn?this.registerSingle1(t,n,r):this.registerSingle2(t,n)}registerSingle1(t,n,r){let i=Ae.string(n)?n:n.method,a=rs.generateUuid(),d={registrations:[{id:a,method:i,registerOptions:r||{}}]};return t.isAttached||t.attach(this.connection),this.connection.sendRequest(N.RegistrationRequest.type,d).then(b=>(t.add({id:a,method:i}),t),b=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(b)))}registerSingle2(t,n){let r=Ae.string(t)?t:t.method,i=rs.generateUuid(),a={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(N.RegistrationRequest.type,a).then(d=>N.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),d=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(d)))}unregisterSingle(t,n){let r={unregisterations:[{id:t,method:n}]};return this.connection.sendRequest(N.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${t} failed.`)})}registerMany(t){let n=t.asRegistrationParams();return this.connection.sendRequest(N.RegistrationRequest.type,n).then(()=>new qn(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},ss=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}applyEdit(t){function n(i){return i&&!!i.edit}let r=n(t)?t:{edit:t};return this.connection.sendRequest(N.ApplyWorkspaceEditRequest.type,r)}},wl=(0,eh.FileOperationsFeature)((0,Kf.WorkspaceFoldersFeature)((0,Xf.ConfigurationFeature)(ss))),ii=class{constructor(){this._trace=N.Trace.Off}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}set trace(t){this._trace=t}log(t,n){this._trace!==N.Trace.Off&&this.connection.sendNotification(N.LogTraceNotification.type,{message:t,verbose:this._trace===N.Trace.Verbose?n:void 0}).catch(()=>{})}},oi=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}logEvent(t){this.connection.sendNotification(N.TelemetryEventNotification.type,t).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},si=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,A.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,A.attachPartialResult)(this.connection,n)}};G._LanguagesImpl=si;var Sl=(0,ih.FoldingRangeFeature)((0,ch.MonikerFeature)((0,sh.DiagnosticFeature)((0,oh.InlayHintFeature)((0,rh.InlineValueFeature)((0,nh.TypeHierarchyFeature)((0,th.LinkedEditingRangeFeature)((0,Zf.SemanticTokensFeature)((0,Qf.CallHierarchyFeature)(si))))))))),ai=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,A.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,A.attachPartialResult)(this.connection,n)}};G._NotebooksImpl=ai;var Pl=(0,ah.NotebookSyncFeature)(ai);function Cl(e,t){return function(n){return t(e(n))}}G.combineConsoleFeatures=Cl;function kl(e,t){return function(n){return t(e(n))}}G.combineTelemetryFeatures=kl;function ql(e,t){return function(n){return t(e(n))}}G.combineTracerFeatures=ql;function Nl(e,t){return function(n){return t(e(n))}}G.combineClientFeatures=Nl;function Ol(e,t){return function(n){return t(e(n))}}G.combineWindowFeatures=Ol;function xl(e,t){return function(n){return t(e(n))}}G.combineWorkspaceFeatures=xl;function El(e,t){return function(n){return t(e(n))}}G.combineLanguagesFeatures=El;function Ml(e,t){return function(n){return t(e(n))}}G.combineNotebooksFeatures=Ml;function uh(e,t){function n(i,a,d){return i&&a?d(i,a):i||a}return{__brand:"features",console:n(e.console,t.console,Cl),tracer:n(e.tracer,t.tracer,ql),telemetry:n(e.telemetry,t.telemetry,kl),client:n(e.client,t.client,Nl),window:n(e.window,t.window,Ol),workspace:n(e.workspace,t.workspace,xl),languages:n(e.languages,t.languages,El),notebooks:n(e.notebooks,t.notebooks,Ml)}}G.combineFeatures=uh;function lh(e,t,n){let r=n&&n.console?new(n.console(ti)):new ti,i=e(r);r.rawAttach(i);let a=n&&n.tracer?new(n.tracer(ii)):new ii,d=n&&n.telemetry?new(n.telemetry(oi)):new oi,b=n&&n.client?new(n.client(ri)):new ri,S=n&&n.window?new(n.window(_l)):new _l,D=n&&n.workspace?new(n.workspace(wl)):new wl,w=n&&n.languages?new(n.languages(Sl)):new Sl,C=n&&n.notebooks?new(n.notebooks(Pl)):new Pl,E=[r,a,d,b,S,D,w,C];function I(v){return v instanceof Promise?v:Ae.thenable(v)?new Promise((y,k)=>{v.then(J=>y(J),J=>k(J))}):Promise.resolve(v)}let W,H,Z,$={listen:()=>i.listen(),sendRequest:(v,...y)=>i.sendRequest(Ae.string(v)?v:v.method,...y),onRequest:(v,y)=>i.onRequest(v,y),sendNotification:(v,y)=>{let k=Ae.string(v)?v:v.method;return i.sendNotification(k,y)},onNotification:(v,y)=>i.onNotification(v,y),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:v=>(H=v,{dispose:()=>{H=void 0}}),onInitialized:v=>i.onNotification(N.InitializedNotification.type,v),onShutdown:v=>(W=v,{dispose:()=>{W=void 0}}),onExit:v=>(Z=v,{dispose:()=>{Z=void 0}}),get console(){return r},get telemetry(){return d},get tracer(){return a},get client(){return b},get window(){return S},get workspace(){return D},get languages(){return w},get notebooks(){return C},onDidChangeConfiguration:v=>i.onNotification(N.DidChangeConfigurationNotification.type,v),onDidChangeWatchedFiles:v=>i.onNotification(N.DidChangeWatchedFilesNotification.type,v),__textDocumentSync:void 0,onDidOpenTextDocument:v=>i.onNotification(N.DidOpenTextDocumentNotification.type,v),onDidChangeTextDocument:v=>i.onNotification(N.DidChangeTextDocumentNotification.type,v),onDidCloseTextDocument:v=>i.onNotification(N.DidCloseTextDocumentNotification.type,v),onWillSaveTextDocument:v=>i.onNotification(N.WillSaveTextDocumentNotification.type,v),onWillSaveTextDocumentWaitUntil:v=>i.onRequest(N.WillSaveTextDocumentWaitUntilRequest.type,v),onDidSaveTextDocument:v=>i.onNotification(N.DidSaveTextDocumentNotification.type,v),sendDiagnostics:v=>i.sendNotification(N.PublishDiagnosticsNotification.type,v),onHover:v=>i.onRequest(N.HoverRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),void 0)),onCompletion:v=>i.onRequest(N.CompletionRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),(0,A.attachPartialResult)(i,y))),onCompletionResolve:v=>i.onRequest(N.CompletionResolveRequest.type,v),onSignatureHelp:v=>i.onRequest(N.SignatureHelpRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),void 0)),onDeclaration:v=>i.onRequest(N.DeclarationRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),(0,A.attachPartialResult)(i,y))),onDefinition:v=>i.onRequest(N.DefinitionRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),(0,A.attachPartialResult)(i,y))),onTypeDefinition:v=>i.onRequest(N.TypeDefinitionRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),(0,A.attachPartialResult)(i,y))),onImplementation:v=>i.onRequest(N.ImplementationRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),(0,A.attachPartialResult)(i,y))),onReferences:v=>i.onRequest(N.ReferencesRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),(0,A.attachPartialResult)(i,y))),onDocumentHighlight:v=>i.onRequest(N.DocumentHighlightRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),(0,A.attachPartialResult)(i,y))),onDocumentSymbol:v=>i.onRequest(N.DocumentSymbolRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),(0,A.attachPartialResult)(i,y))),onWorkspaceSymbol:v=>i.onRequest(N.WorkspaceSymbolRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),(0,A.attachPartialResult)(i,y))),onWorkspaceSymbolResolve:v=>i.onRequest(N.WorkspaceSymbolResolveRequest.type,v),onCodeAction:v=>i.onRequest(N.CodeActionRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),(0,A.attachPartialResult)(i,y))),onCodeActionResolve:v=>i.onRequest(N.CodeActionResolveRequest.type,(y,k)=>v(y,k)),onCodeLens:v=>i.onRequest(N.CodeLensRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),(0,A.attachPartialResult)(i,y))),onCodeLensResolve:v=>i.onRequest(N.CodeLensResolveRequest.type,(y,k)=>v(y,k)),onDocumentFormatting:v=>i.onRequest(N.DocumentFormattingRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),void 0)),onDocumentRangeFormatting:v=>i.onRequest(N.DocumentRangeFormattingRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),void 0)),onDocumentOnTypeFormatting:v=>i.onRequest(N.DocumentOnTypeFormattingRequest.type,(y,k)=>v(y,k)),onRenameRequest:v=>i.onRequest(N.RenameRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),void 0)),onPrepareRename:v=>i.onRequest(N.PrepareRenameRequest.type,(y,k)=>v(y,k)),onDocumentLinks:v=>i.onRequest(N.DocumentLinkRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),(0,A.attachPartialResult)(i,y))),onDocumentLinkResolve:v=>i.onRequest(N.DocumentLinkResolveRequest.type,(y,k)=>v(y,k)),onDocumentColor:v=>i.onRequest(N.DocumentColorRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),(0,A.attachPartialResult)(i,y))),onColorPresentation:v=>i.onRequest(N.ColorPresentationRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),(0,A.attachPartialResult)(i,y))),onFoldingRanges:v=>i.onRequest(N.FoldingRangeRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),(0,A.attachPartialResult)(i,y))),onSelectionRanges:v=>i.onRequest(N.SelectionRangeRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),(0,A.attachPartialResult)(i,y))),onExecuteCommand:v=>i.onRequest(N.ExecuteCommandRequest.type,(y,k)=>v(y,k,(0,A.attachWorkDone)(i,y),void 0)),dispose:()=>i.dispose()};for(let v of E)v.attach($);return i.onRequest(N.InitializeRequest.type,v=>{t.initialize(v),Ae.string(v.trace)&&(a.trace=N.Trace.fromString(v.trace));for(let y of E)y.initialize(v.capabilities);if(H){let y=H(v,new N.CancellationTokenSource().token,(0,A.attachWorkDone)(i,v),void 0);return I(y).then(k=>{if(k instanceof N.ResponseError)return k;let J=k;J||(J={capabilities:{}});let ee=J.capabilities;ee||(ee={},J.capabilities=ee),ee.textDocumentSync===void 0||ee.textDocumentSync===null?ee.textDocumentSync=Ae.number($.__textDocumentSync)?$.__textDocumentSync:N.TextDocumentSyncKind.None:!Ae.number(ee.textDocumentSync)&&!Ae.number(ee.textDocumentSync.change)&&(ee.textDocumentSync.change=Ae.number($.__textDocumentSync)?$.__textDocumentSync:N.TextDocumentSyncKind.None);for(let ce of E)ce.fillServerCapabilities(ee);return J})}else{let y={capabilities:{textDocumentSync:N.TextDocumentSyncKind.None}};for(let k of E)k.fillServerCapabilities(y.capabilities);return y}}),i.onRequest(N.ShutdownRequest.type,()=>{if(t.shutdownReceived=!0,W)return W(new N.CancellationTokenSource().token)}),i.onNotification(N.ExitNotification.type,()=>{try{Z&&Z()}finally{t.shutdownReceived?t.exit(0):t.exit(1)}}),i.onNotification(N.SetTraceNotification.type,v=>{a.trace=N.Trace.fromString(v.value)}),$}G.createConnection=lh});var jl=O(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.resolveModulePath=qe.FileSystem=qe.resolveGlobalYarnPath=qe.resolveGlobalNodePath=qe.resolve=qe.uriToFilePath=void 0;var dh=require("url"),Be=require("path"),cs=require("fs"),fs=require("child_process");function fh(e){let t=dh.parse(e);if(t.protocol!=="file:"||!t.path)return;let n=t.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let a=n[0],d=n[1];a.length===0&&d.length>1&&d[1]===":"&&n.shift()}return Be.normalize(n.join("/"))}qe.uriToFilePath=fh;function us(){return process.platform==="win32"}function ci(e,t,n,r){let i="NODE_PATH",a=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((d,b)=>{let S=process.env,D=Object.create(null);Object.keys(S).forEach(w=>D[w]=S[w]),t&&cs.existsSync(t)&&(D[i]?D[i]=t+Be.delimiter+D[i]:D[i]=t,r&&r(`NODE_PATH value is: ${D[i]}`)),D.ELECTRON_RUN_AS_NODE="1";try{let w=(0,fs.fork)("",[],{cwd:n,env:D,execArgv:["-e",a]});if(w.pid===void 0){b(new Error(`Starting process to resolve node module  ${e} failed`));return}w.on("error",E=>{b(E)}),w.on("message",E=>{E.c==="r"&&(w.send({c:"e"}),E.s?d(E.r):b(new Error(`Failed to resolve module: ${e}`)))});let C={c:"rs",a:e};w.send(C)}catch(w){b(w)}})}qe.resolve=ci;function ls(e){let t="npm",n=Object.create(null);Object.keys(process.env).forEach(a=>n[a]=process.env[a]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};us()&&(t="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let a=(0,fs.spawnSync)(t,["config","get","prefix"],r).stdout;if(!a){e&&e("'npm config get prefix' didn't return a value.");return}let d=a.trim();return e&&e(`'npm config get prefix' value is: ${d}`),d.length>0?us()?Be.join(d,"node_modules"):Be.join(d,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}qe.resolveGlobalNodePath=ls;function hh(e){let t="yarn",n={encoding:"utf8"};us()&&(t="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,fs.spawnSync)(t,["global","dir","--json"],n),a=i.stdout;if(!a){e&&(e("'yarn global dir' didn't return a value."),i.stderr&&e(i.stderr));return}let d=a.trim().split(/\r?\n/);for(let b of d)try{let S=JSON.parse(b);if(S.type==="log")return Be.join(S.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}qe.resolveGlobalYarnPath=hh;var ds;(function(e){let t;function n(){return t!==void 0||(process.platform==="win32"?t=!1:t=!cs.existsSync(__filename.toUpperCase())||!cs.existsSync(__filename.toLowerCase())),t}e.isCaseSensitive=n;function r(i,a){return n()?Be.normalize(a).indexOf(Be.normalize(i))===0:Be.normalize(a).toLowerCase().indexOf(Be.normalize(i).toLowerCase())===0}e.isParent=r})(ds||(qe.FileSystem=ds={}));function ph(e,t,n,r){return n?(Be.isAbsolute(n)||(n=Be.join(e,n)),ci(t,n,n,r).then(i=>ds.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${t} from node path location.`))).then(void 0,i=>ci(t,ls(r),e,r))):ci(t,ls(r),e,r)}qe.resolveModulePath=ph});var hs=O((fm,Il)=>{"use strict";Il.exports=fe()});var Al=O(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.InlineCompletionFeature=void 0;var mh=fe(),gh=e=>class extends e{get inlineCompletion(){return{on:t=>this.connection.onRequest(mh.InlineCompletionRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};ui.InlineCompletionFeature=gh});var Jl=O(De=>{"use strict";var yh=De&&De.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Ll=De&&De.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&yh(t,e,n)};Object.defineProperty(De,"__esModule",{value:!0});De.ProposedFeatures=De.NotebookDocuments=De.TextDocuments=De.SemanticTokensBuilder=void 0;var bh=Xo();Object.defineProperty(De,"SemanticTokensBuilder",{enumerable:!0,get:function(){return bh.SemanticTokensBuilder}});var vh=Al();Ll(fe(),De);var Th=Yo();Object.defineProperty(De,"TextDocuments",{enumerable:!0,get:function(){return Th.TextDocuments}});var _h=ts();Object.defineProperty(De,"NotebookDocuments",{enumerable:!0,get:function(){return _h.NotebookDocuments}});Ll(as(),De);var Fl;(function(e){e.all={__brand:"features",languages:vh.InlineCompletionFeature}})(Fl||(De.ProposedFeatures=Fl={}))});var Bl=O(Fe=>{"use strict";var Dh=Fe&&Fe.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),$l=Fe&&Fe.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Dh(t,e,n)};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.createConnection=Fe.Files=void 0;var Wl=require("node:util"),ps=Xn(),Rh=as(),Nn=jl(),xt=hs();$l(hs(),Fe);$l(Jl(),Fe);var Hl;(function(e){e.uriToFilePath=Nn.uriToFilePath,e.resolveGlobalNodePath=Nn.resolveGlobalNodePath,e.resolveGlobalYarnPath=Nn.resolveGlobalYarnPath,e.resolve=Nn.resolve,e.resolveModulePath=Nn.resolveModulePath})(Hl||(Fe.Files=Hl={}));var Ul;function li(){if(Ul!==void 0)try{Ul.end()}catch{}}var cn=!1,zl;function wh(){let e="--clientProcessId";function t(n){try{let r=parseInt(n);isNaN(r)||(zl=setInterval(()=>{try{process.kill(r,0)}catch{li(),process.exit(cn?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===e&&n+1<process.argv.length){t(process.argv[n+1]);return}else{let i=r.split("=");i[0]===e&&t(i[1])}}}wh();var Sh={initialize:e=>{let t=e.processId;ps.number(t)&&zl===void 0&&setInterval(()=>{try{process.kill(t,0)}catch{process.exit(cn?0:1)}},3e3)},get shutdownReceived(){return cn},set shutdownReceived(e){cn=e},exit:e=>{li(),process.exit(e)}};function Ph(e,t,n,r){let i,a,d,b;return e!==void 0&&e.__brand==="features"&&(i=e,e=t,t=n,n=r),xt.ConnectionStrategy.is(e)||xt.ConnectionOptions.is(e)?b=e:(a=e,d=t,b=n),Ch(a,d,b,i)}Fe.createConnection=Ph;function Ch(e,t,n,r){let i=!1;if(!e&&!t&&process.argv.length>2){let S,D,w=process.argv.slice(2);for(let C=0;C<w.length;C++){let E=w[C];if(E==="--node-ipc"){e=new xt.IPCMessageReader(process),t=new xt.IPCMessageWriter(process);break}else if(E==="--stdio"){i=!0,e=process.stdin,t=process.stdout;break}else if(E==="--socket"){S=parseInt(w[C+1]);break}else if(E==="--pipe"){D=w[C+1];break}else{var a=E.split("=");if(a[0]==="--socket"){S=parseInt(a[1]);break}else if(a[0]==="--pipe"){D=a[1];break}}}if(S){let C=(0,xt.createServerSocketTransport)(S);e=C[0],t=C[1]}else if(D){let C=(0,xt.createServerPipeTransport)(D);e=C[0],t=C[1]}}var d="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+d);if(!t)throw new Error("Connection output stream is not set. "+d);if(ps.func(e.read)&&ps.func(e.on)){let S=e;S.on("end",()=>{li(),process.exit(cn?0:1)}),S.on("close",()=>{li(),process.exit(cn?0:1)})}let b=S=>{let D=(0,xt.createProtocolConnection)(e,t,S,n);return i&&kh(S),D};return(0,Rh.createConnection)(b,Sh,r)}function kh(e){function t(r){return r.map(i=>typeof i=="string"?i:(0,Wl.inspect)(i)).join(" ")}let n=new Map;console.assert=function(i,...a){if(!i)if(a.length===0)e.error("Assertion failed");else{let[d,...b]=a;e.error(`Assertion failed: ${d} ${t(b)}`)}},console.count=function(i="default"){let a=String(i),d=n.get(a)??0;d+=1,n.set(a,d),e.log(`${a}: ${a}`)},console.countReset=function(i){i===void 0?n.clear():n.delete(String(i))},console.debug=function(...i){e.log(t(i))},console.dir=function(i,a){e.log((0,Wl.inspect)(i,a))},console.log=function(...i){e.log(t(i))},console.error=function(...i){e.error(t(i))},console.trace=function(...i){let a=new Error().stack.replace(/(.+\n){2}/,""),d="Trace";i.length!==0&&(d+=`: ${t(i)}`),e.log(`${d}
${a}`)},console.warn=function(...i){e.warn(t(i))}}});var ms=O((ym,Vl)=>{"use strict";Vl.exports=Bl()});var ed=O(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.DiagnosticSeverity=vt.SymbolKind=vt.JyroType=void 0;var Ql;(function(e){e.Null="null",e.Number="number",e.String="string",e.Boolean="boolean",e.Object="object",e.Array="array"})(Ql||(vt.JyroType=Ql={}));var Zl;(function(e){e.Variable="variable",e.Function="function",e.Parameter="parameter",e.Property="property"})(Zl||(vt.SymbolKind=Zl={}));var Yl;(function(e){e[e.Error=1]="Error",e[e.Warning=2]="Warning",e[e.Information=3]="Information",e[e.Hint=4]="Hint"})(Yl||(vt.DiagnosticSeverity=Yl={}))});var ys=O(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.FUNCTION_CATEGORIES=Le.STDLIB_FUNCTIONS=void 0;Le.getFunctionSignature=Nh;Le.getAllFunctionNames=Oh;Le.getFunctionsByCategory=xh;var l=ed();Le.STDLIB_FUNCTIONS=[{name:"Upper",category:"String",parameters:[{name:"str",type:l.JyroType.String,description:"The string to convert"}],returnType:l.JyroType.String,description:"Converts a string to uppercase",examples:['Upper("hello") # Returns "HELLO"']},{name:"Lower",category:"String",parameters:[{name:"str",type:l.JyroType.String,description:"The string to convert"}],returnType:l.JyroType.String,description:"Converts a string to lowercase",examples:['Lower("HELLO") # Returns "hello"']},{name:"Trim",category:"String",parameters:[{name:"str",type:l.JyroType.String,description:"The string to trim"}],returnType:l.JyroType.String,description:"Removes leading and trailing whitespace from a string",examples:['Trim("  hello  ") # Returns "hello"']},{name:"Replace",category:"String",parameters:[{name:"str",type:l.JyroType.String,description:"The input string"},{name:"search",type:l.JyroType.String,description:"The substring to search for"},{name:"replace",type:l.JyroType.String,description:"The replacement string"}],returnType:l.JyroType.String,description:"Replaces all occurrences of a substring with another string",examples:['Replace("hello world", "world", "there") # Returns "hello there"']},{name:"Contains",category:"String",parameters:[{name:"str",type:l.JyroType.String,description:"The string to search in"},{name:"search",type:l.JyroType.String,description:"The substring to search for"}],returnType:l.JyroType.Boolean,description:"Checks if a string contains a substring",examples:['Contains("hello", "ell") # Returns true']},{name:"StartsWith",category:"String",parameters:[{name:"str",type:l.JyroType.String,description:"The string to check"},{name:"prefix",type:l.JyroType.String,description:"The prefix to check for"}],returnType:l.JyroType.Boolean,description:"Checks if a string starts with a specific prefix",examples:['StartsWith("hello", "hel") # Returns true']},{name:"EndsWith",category:"String",parameters:[{name:"str",type:l.JyroType.String,description:"The string to check"},{name:"suffix",type:l.JyroType.String,description:"The suffix to check for"}],returnType:l.JyroType.Boolean,description:"Checks if a string ends with a specific suffix",examples:['EndsWith("hello", "lo") # Returns true']},{name:"Split",category:"String",parameters:[{name:"str",type:l.JyroType.String,description:"The string to split"},{name:"delimiter",type:l.JyroType.String,description:"The delimiter to split on"}],returnType:l.JyroType.Array,description:"Splits a string into an array using a delimiter",examples:['Split("a,b,c", ",") # Returns ["a", "b", "c"]']},{name:"Join",category:"String",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array to join"},{name:"separator",type:l.JyroType.String,description:"The separator between elements"}],returnType:l.JyroType.String,description:"Joins an array into a string with a separator",examples:['Join(["a", "b", "c"], ",") # Returns "a,b,c"']},{name:"ToNumber",category:"String",parameters:[{name:"str",type:l.JyroType.String,description:"The string to convert"}],returnType:l.JyroType.Number,description:"Converts a string to a number",examples:['ToNumber("42") # Returns 42','ToNumber("3.14") # Returns 3.14']},{name:"RandomString",category:"String",parameters:[{name:"length",type:l.JyroType.Number,description:"The length of the string to generate"},{name:"characterSet",type:l.JyroType.String,description:"The set of characters to select from (defaults to alphanumeric)",optional:!0}],returnType:l.JyroType.String,description:"Generates a cryptographically secure random string of specified length from a character set",examples:['RandomString(8) # Returns "aB3xK9mP"','RandomString(6, "0123456789") # Returns "483921"']},{name:"Length",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array to measure"}],returnType:l.JyroType.Number,description:"Returns the number of elements in an array",examples:["Length([1, 2, 3]) # Returns 3"]},{name:"First",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array to get first element from"}],returnType:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean,l.JyroType.Object,l.JyroType.Array],description:"Returns the first element of an array, or null if empty",examples:["First([1, 2, 3]) # Returns 1"]},{name:"Last",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array to get last element from"}],returnType:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean,l.JyroType.Object,l.JyroType.Array],description:"Returns the last element of an array, or null if empty",examples:["Last([1, 2, 3]) # Returns 3"]},{name:"Append",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array to append to"},{name:"value",type:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean,l.JyroType.Object,l.JyroType.Array],description:"The value to append"}],returnType:l.JyroType.Array,description:"Adds a value to the end of an array and returns the modified array",examples:["Append([1, 2], 3) # Returns [1, 2, 3]"]},{name:"Pop",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array to remove from"}],returnType:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean,l.JyroType.Object,l.JyroType.Array],description:"Removes and returns the last element from an array",examples:["Pop([1, 2, 3]) # Returns 3 and modifies array to [1, 2]"]},{name:"IndexOf",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array to search"},{name:"value",type:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean,l.JyroType.Object,l.JyroType.Array],description:"The value to find"}],returnType:l.JyroType.Number,description:"Returns the index of the first occurrence of a value, or -1 if not found",examples:["IndexOf([1, 2, 3], 2) # Returns 1"]},{name:"Insert",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array to insert into"},{name:"index",type:l.JyroType.Number,description:"The index to insert at"},{name:"value",type:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean,l.JyroType.Object,l.JyroType.Array],description:"The value to insert"}],returnType:l.JyroType.Array,description:"Inserts a value at a specific index in an array",examples:["Insert([1, 3], 1, 2) # Returns [1, 2, 3]"]},{name:"RemoveAt",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array to remove from"},{name:"index",type:l.JyroType.Number,description:"The index to remove"}],returnType:l.JyroType.Array,description:"Removes the element at a specific index from an array",examples:["RemoveAt([1, 2, 3], 1) # Returns [1, 3]"]},{name:"RemoveLast",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array to remove from"}],returnType:l.JyroType.Array,description:"Removes the last element from an array and returns the modified array",examples:["RemoveLast([1, 2, 3]) # Returns [1, 2]"]},{name:"Clear",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array to clear"}],returnType:l.JyroType.Array,description:"Removes all elements from an array",examples:["Clear([1, 2, 3]) # Returns []"]},{name:"Filter",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array to filter"},{name:"field",type:l.JyroType.String,description:"The field name to check"},{name:"operator",type:l.JyroType.String,description:"The comparison operator (==, !=, <, >, <=, >=)"},{name:"value",type:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean],description:"The value to compare against"}],returnType:l.JyroType.Array,description:"Filters array elements based on a field condition",examples:['Filter(Data.users, "age", ">=", 18) # Returns users 18 or older']},{name:"CountIf",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array to count"},{name:"field",type:l.JyroType.String,description:"The field name to check"},{name:"operator",type:l.JyroType.String,description:"The comparison operator"},{name:"value",type:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean],description:"The value to compare against"}],returnType:l.JyroType.Number,description:"Counts array elements that match a field condition",examples:['CountIf(Data.users, "active", "==", true) # Returns count of active users']},{name:"Sort",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array to sort"}],returnType:l.JyroType.Array,description:"Sorts an array in ascending order (numbers or strings)",examples:["Sort([3, 1, 2]) # Returns [1, 2, 3]"]},{name:"SortByField",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array of objects to sort"},{name:"field",type:l.JyroType.String,description:"The field name to sort by"},{name:"direction",type:l.JyroType.String,description:'Sort direction ("asc" or "desc")'}],returnType:l.JyroType.Array,description:"Sorts an array of objects by a specific field",examples:['SortByField(Data.users, "age", "desc") # Sorts by age descending']},{name:"Reverse",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array to reverse"}],returnType:l.JyroType.Array,description:"Reverses the order of elements in an array",examples:["Reverse([1, 2, 3]) # Returns [3, 2, 1]"]},{name:"MergeArrays",category:"Array",parameters:[{name:"arrays",type:l.JyroType.Array,description:"Multiple arrays to merge (variadic)"}],returnType:l.JyroType.Array,description:"Merges multiple arrays into a single array, concatenating all elements in order",examples:["MergeArrays([1, 2], [3, 4], [5]) # Returns [1, 2, 3, 4, 5]"]},{name:"Take",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The source array to take elements from"},{name:"count",type:l.JyroType.Number,description:"The number of elements to take from the beginning"}],returnType:l.JyroType.Array,description:"Returns a new array containing the first n elements from a source array without modifying the original",examples:["Take([1, 2, 3, 4, 5], 3) # Returns [1, 2, 3]"]},{name:"GroupBy",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array of objects to group"},{name:"fieldName",type:l.JyroType.String,description:'The field name or nested path to group by (e.g., "status" or "address.city")'}],returnType:l.JyroType.Object,description:"Groups an array of objects by a specified field, returning an object where keys are the distinct field values and values are arrays of matching items",examples:['GroupBy(orders, "status") # Returns { "pending": [...], "completed": [...] }']},{name:"RandomChoice",category:"Array",parameters:[{name:"arr",type:l.JyroType.Array,description:"The array to select a random element from (must not be empty)"}],returnType:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean,l.JyroType.Object,l.JyroType.Array],description:"Selects a random element from an array using cryptographically secure randomization",examples:['RandomChoice(["red", "blue", "green"]) # Returns a random color']},{name:"Min",category:"Math",parameters:[{name:"a",type:l.JyroType.Number,description:"First number"},{name:"b",type:l.JyroType.Number,description:"Second number"}],returnType:l.JyroType.Number,description:"Returns the smaller of two numbers",examples:["Min(5, 10) # Returns 5"]},{name:"Max",category:"Math",parameters:[{name:"a",type:l.JyroType.Number,description:"First number"},{name:"b",type:l.JyroType.Number,description:"Second number"}],returnType:l.JyroType.Number,description:"Returns the larger of two numbers",examples:["Max(5, 10) # Returns 10"]},{name:"Sum",category:"Math",parameters:[{name:"values",type:l.JyroType.Number,description:"Numbers to sum (variadic)"}],returnType:l.JyroType.Number,description:"Returns the sum of all provided numbers",examples:["Sum(1, 2, 3, 4) # Returns 10"]},{name:"Abs",category:"Math",parameters:[{name:"num",type:l.JyroType.Number,description:"The number"}],returnType:l.JyroType.Number,description:"Returns the absolute value of a number",examples:["Abs(-5) # Returns 5"]},{name:"Round",category:"Math",parameters:[{name:"num",type:l.JyroType.Number,description:"The number to round"},{name:"decimals",type:l.JyroType.Number,description:"Number of decimal places"}],returnType:l.JyroType.Number,description:"Rounds a number to a specified number of decimal places",examples:["Round(3.14159, 2) # Returns 3.14"]},{name:"RandomInt",category:"Math",parameters:[{name:"min",type:l.JyroType.Number,description:"The inclusive lower bound (or exclusive upper bound if only one argument)",optional:!0},{name:"max",type:l.JyroType.Number,description:"The exclusive upper bound"}],returnType:l.JyroType.Number,description:"Generates a cryptographically secure random integer. RandomInt(max) returns [0, max). RandomInt(min, max) returns [min, max).",examples:["RandomInt(10) # Returns 0-9","RandomInt(1, 7) # Returns 1-6 (dice roll)"]},{name:"Now",category:"DateTime",parameters:[],returnType:l.JyroType.String,description:"Returns the current UTC date and time in ISO 8601 format",examples:['Now() # Returns "2025-11-17T12:00:00Z"']},{name:"Today",category:"DateTime",parameters:[],returnType:l.JyroType.String,description:"Returns the current UTC date at midnight in ISO 8601 format",examples:['Today() # Returns "2025-11-17T00:00:00Z"']},{name:"ParseDate",category:"DateTime",parameters:[{name:"str",type:l.JyroType.String,description:"The date string to parse"}],returnType:l.JyroType.String,description:"Parses a date string and returns it in ISO 8601 format",examples:['ParseDate("2025-11-17") # Returns ISO 8601 date']},{name:"FormatDate",category:"DateTime",parameters:[{name:"date",type:l.JyroType.String,description:"The date in ISO format"},{name:"format",type:l.JyroType.String,description:".NET date format pattern"}],returnType:l.JyroType.String,description:"Formats a date using a .NET format pattern",examples:['FormatDate(Now(), "yyyy-MM-dd") # Returns "2025-11-17"']},{name:"DateAdd",category:"DateTime",parameters:[{name:"date",type:l.JyroType.String,description:"The date in ISO format"},{name:"unit",type:l.JyroType.String,description:"Unit: days, weeks, months, years, hours, minutes, seconds"},{name:"amount",type:l.JyroType.Number,description:"Amount to add (can be negative)"}],returnType:l.JyroType.String,description:"Adds a time interval to a date",examples:['DateAdd(Today(), "days", 7) # Adds 7 days']},{name:"DateDiff",category:"DateTime",parameters:[{name:"endDate",type:l.JyroType.String,description:"The end date"},{name:"startDate",type:l.JyroType.String,description:"The start date"},{name:"unit",type:l.JyroType.String,description:"Unit to return difference in"}],returnType:l.JyroType.Number,description:"Calculates the difference between two dates",examples:['DateDiff("2025-12-31", "2025-01-01", "days") # Returns 364']},{name:"DatePart",category:"DateTime",parameters:[{name:"date",type:l.JyroType.String,description:"The date in ISO format"},{name:"part",type:l.JyroType.String,description:"Part: year, month, day, hour, minute, second, dayofweek, dayofyear"}],returnType:l.JyroType.Number,description:"Extracts a specific part from a date",examples:['DatePart(Now(), "year") # Returns 2025']},{name:"TypeOf",category:"Utility",parameters:[{name:"value",type:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean,l.JyroType.Object,l.JyroType.Array],description:"The value to check"}],returnType:l.JyroType.String,description:"Returns the type name of a value",examples:['TypeOf(42) # Returns "number"','TypeOf([1, 2]) # Returns "array"']},{name:"IsNull",category:"Utility",parameters:[{name:"value",type:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean,l.JyroType.Object,l.JyroType.Array],description:"The value to check"}],returnType:l.JyroType.Boolean,description:"Returns true if the value is null",examples:["IsNull(null) # Returns true"]},{name:"Exists",category:"Utility",parameters:[{name:"value",type:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean,l.JyroType.Object,l.JyroType.Array],description:"The value to check"}],returnType:l.JyroType.Boolean,description:"Returns true if the value is not null",examples:["Exists(Data.user) # Returns true if user exists"]},{name:"Equal",category:"Utility",parameters:[{name:"a",type:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean,l.JyroType.Object,l.JyroType.Array],description:"First value"},{name:"b",type:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean,l.JyroType.Object,l.JyroType.Array],description:"Second value"}],returnType:l.JyroType.Boolean,description:"Performs deep equality comparison",examples:["Equal([1, 2], [1, 2]) # Returns true"]},{name:"NotEqual",category:"Utility",parameters:[{name:"a",type:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean,l.JyroType.Object,l.JyroType.Array],description:"First value"},{name:"b",type:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean,l.JyroType.Object,l.JyroType.Array],description:"Second value"}],returnType:l.JyroType.Boolean,description:"Returns true if values are not deeply equal",examples:["NotEqual([1, 2], [1, 3]) # Returns true"]},{name:"Base64Encode",category:"Utility",parameters:[{name:"str",type:l.JyroType.String,description:"The string to encode"}],returnType:l.JyroType.String,description:"Encodes a string to Base64",examples:['Base64Encode("hello") # Returns "aGVsbG8="']},{name:"Base64Decode",category:"Utility",parameters:[{name:"str",type:l.JyroType.String,description:"The Base64 string to decode"}],returnType:l.JyroType.String,description:"Decodes a Base64 string",examples:['Base64Decode("aGVsbG8=") # Returns "hello"']},{name:"NewGuid",category:"Utility",parameters:[],returnType:l.JyroType.String,description:"Generates a new GUID string",examples:['NewGuid() # Returns "a1b2c3d4-e5f6-7890-abcd-ef1234567890"']},{name:"CallScript",category:"Utility",parameters:[{name:"source",type:l.JyroType.String,description:"The script source code"},{name:"data",type:l.JyroType.Object,description:"The data object to pass"}],returnType:l.JyroType.Object,description:"Executes a child script with cycle detection",examples:['CallScript("Data.result = Data.value * 2", { "value": 5 })']},{name:"Keys",category:"Utility",parameters:[{name:"obj",type:l.JyroType.Object,description:"The object to extract keys from"}],returnType:l.JyroType.Array,description:"Returns an array containing all property names (keys) of an object",examples:['Keys({"name": "Alice", "age": 30}) # Returns ["name", "age"]']},{name:"InvokeRestMethod",category:"Utility",parameters:[{name:"url",type:l.JyroType.String,description:"The URL to call"},{name:"method",type:l.JyroType.String,description:"HTTP method (GET, POST, PUT, DELETE). Defaults to GET",optional:!0},{name:"headers",type:l.JyroType.Object,description:"Request headers as key-value pairs",optional:!0},{name:"body",type:[l.JyroType.Null,l.JyroType.Number,l.JyroType.String,l.JyroType.Boolean,l.JyroType.Object,l.JyroType.Array],description:"Request body (automatically JSON-serialized)",optional:!0}],returnType:l.JyroType.Object,description:"Executes HTTP REST API calls. Returns object with statusCode, isSuccessStatusCode, content, headers. Must be enabled via .WithRestApi()",examples:['InvokeRestMethod("https://api.example.com/users", "GET")','InvokeRestMethod("https://api.example.com/users", "POST", {"Content-Type": "application/json"}, newUser)']}];function Nh(e){return Le.STDLIB_FUNCTIONS.find(t=>t.name.toLowerCase()===e.toLowerCase())}function Oh(){return Le.STDLIB_FUNCTIONS.map(e=>e.name)}function xh(e){return Le.STDLIB_FUNCTIONS.filter(t=>t.category===e)}Le.FUNCTION_CATEGORIES=["String","Array","Math","DateTime","Utility"]});var Re=Gn(ms());var di=class e{constructor(t,n,r,i){this._uri=t,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let n=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(n,r)}return this._content}update(t,n){for(let r of t)if(e.isIncremental(r)){let i=Kl(r.range),a=this.offsetAt(i.start),d=this.offsetAt(i.end);this._content=this._content.substring(0,a)+r.text+this._content.substring(d,this._content.length);let b=Math.max(i.start.line,0),S=Math.max(i.end.line,0),D=this._lineOffsets,w=Gl(r.text,!1,a);if(S-b===w.length)for(let E=0,I=w.length;E<I;E++)D[E+b+1]=w[E];else w.length<1e4?D.splice(b+1,S-b,...w):this._lineOffsets=D=D.slice(0,b+1).concat(w,D.slice(S+1));let C=r.text.length-(d-a);if(C!==0)for(let E=b+1+w.length,I=D.length;E<I;E++)D[E]=D[E]+C}else if(e.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=Gl(this._content,!0)),this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:t};for(;r<i;){let d=Math.floor((r+i)/2);n[d]>t?i=d:r=d+1}let a=r-1;return t=this.ensureBeforeEOL(t,n[a]),{line:a,character:t-n[a]}}offsetAt(t){let n=this.getLineOffsets();if(t.line>=n.length)return this._content.length;if(t.line<0)return 0;let r=n[t.line];if(t.character<=0)return r;let i=t.line+1<n.length?n[t.line+1]:this._content.length,a=Math.min(r+t.character,i);return this.ensureBeforeEOL(a,r)}ensureBeforeEOL(t,n){for(;t>n&&Xl(this._content.charCodeAt(t-1));)t--;return t}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}},fi;(function(e){function t(i,a,d,b){return new di(i,a,d,b)}e.create=t;function n(i,a,d){if(i instanceof di)return i.update(a,d),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}e.update=n;function r(i,a){let d=i.getText(),b=gs(a.map(qh),(w,C)=>{let E=w.range.start.line-C.range.start.line;return E===0?w.range.start.character-C.range.start.character:E}),S=0,D=[];for(let w of b){let C=i.offsetAt(w.range.start);if(C<S)throw new Error("Overlapping edit");C>S&&D.push(d.substring(S,C)),w.newText.length&&D.push(w.newText),S=i.offsetAt(w.range.end)}return D.push(d.substr(S)),D.join("")}e.applyEdits=r})(fi||(fi={}));function gs(e,t){if(e.length<=1)return e;let n=e.length/2|0,r=e.slice(0,n),i=e.slice(n);gs(r,t),gs(i,t);let a=0,d=0,b=0;for(;a<r.length&&d<i.length;)t(r[a],i[d])<=0?e[b++]=r[a++]:e[b++]=i[d++];for(;a<r.length;)e[b++]=r[a++];for(;d<i.length;)e[b++]=i[d++];return e}function Gl(e,t,n=0){let r=t?[n]:[];for(let i=0;i<e.length;i++){let a=e.charCodeAt(i);Xl(a)&&(a===13&&i+1<e.length&&e.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}function Xl(e){return e===13||e===10}function Kl(e){let t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function qh(e){let t=Kl(e.range);return t!==e.range?{newText:e.newText,range:t}:e}var On=Gn(ys());var Tt=Gn(ms()),td=Gn(ys()),un=class{constructor(t,n,r={warnOnHostFunctions:!0}){this.diagnostics=[];this.symbols=[];this.keywords=["var","if","then","else","end","switch","do","case","default","while","foreach","in","return","fail","break","continue","true","false","null","and","or","not","is","Data"];this.typeKeywords=["number","string","boolean","object","array"];this.functionNames=(0,td.getAllFunctionNames)();this.text=t,this.uri=n,this.options=r,this.lines=t.split(`
`).map(i=>i.replace(/\r$/,""))}analyze(){return this.diagnostics=[],this.symbols=[],this.checkSyntax(),this.extractSymbols(),this.validateSemantics(),this.diagnostics}getSymbols(){return this.symbols.length===0&&this.extractSymbols(),this.symbols}checkSyntax(){let t=[],n=0;if(this.lines.forEach((r,i)=>{let a=r.trim();if(a.startsWith("#")||a.length===0)return;let d=a.replace(/"[^"]*"/g,'""'),b=r.match(/"/g);b&&b.length%2!==0&&this.addDiagnostic(i,0,i,r.length,"Unclosed string literal",Tt.DiagnosticSeverity.Error);let S=(r.match(/\(/g)||[]).length,D=(r.match(/\)/g)||[]).length,w=(r.match(/\{/g)||[]).length,C=(r.match(/\}/g)||[]).length,E=(r.match(/\[/g)||[]).length,I=(r.match(/\]/g)||[]).length;if(/\b(if|while|foreach|switch)\b/.test(d)&&!/\belse\s+if\b/.test(d)){let W=d.match(/\b(if|while|foreach|switch)\b/);W&&(t.push({type:W[1],line:i}),(W[1]==="while"||W[1]==="foreach")&&n++)}if(/\bend\b/.test(d))if(t.length===0)this.addDiagnostic(i,0,i,a.length,'Unexpected "end" without matching block start',Tt.DiagnosticSeverity.Error);else{let W=t.pop();(W.type==="while"||W.type==="foreach")&&n--}if(/\b(break|continue)\b/.test(d)&&n===0&&this.addDiagnostic(i,0,i,a.length,`"${d.includes("break")?"break":"continue"}" can only be used inside loops`,Tt.DiagnosticSeverity.Error),/^\s*var\s+/.test(a)){let W=a.match(/^var\s+\w+\s*:\s*(\w+)/);if(W&&!this.typeKeywords.includes(W[1])){let H=r.indexOf(W[1]);this.addDiagnostic(i,H,i,H+W[1].length,`Unknown type "${W[1]}". Expected: number, string, boolean, object, or array`,Tt.DiagnosticSeverity.Error)}}if(/=[^=]/.test(a)&&/==/.test(a),this.options.warnOnHostFunctions){let W=/\b([A-Z][a-zA-Z0-9]*)\s*\(/g,H;for(;(H=W.exec(d))!==null;){let Z=H[1];if(!this.keywords.includes(Z)&&!this.functionNames.includes(Z)){let v=r.length-r.trimStart().length+H.index;this.addDiagnostic(i,v,i,v+Z.length,`Referenced function "${Z}" will need to be made available at runtime`,Tt.DiagnosticSeverity.Information)}}}}),t.length>0){let r=t[t.length-1];this.addDiagnostic(r.line,0,r.line,this.lines[r.line].length,`Unclosed "${r.type}" block - missing "end"`,Tt.DiagnosticSeverity.Error)}}extractSymbols(){let t=new Set;this.lines.forEach((n,r)=>{let i=n.trim();if(i.startsWith("#")||i.length===0)return;let a=/\bvar\s+(\w+)(?:\s*:\s*(\w+))?/g,d;for(;(d=a.exec(i))!==null;){let w=d[1],C=d[2],E=n.indexOf(w,d.index);this.symbols.push({name:w,type:C,line:r,character:E})}let b=i.match(/\bforeach\s+(\w+)\s+in\b/);if(b){let w=b[1],C=n.indexOf(w);this.symbols.push({name:w,type:"iterator",line:r,character:C})}let S=/\b([a-zA-Z_]\w*(?:\.[a-zA-Z_]\w*)+)\s*=/g,D;for(;(D=S.exec(i))!==null;){let w=D[1];if(!t.has(w)){t.add(w);let C=n.indexOf(w);this.symbols.push({name:w,type:"property",line:r,character:C})}}})}validateSemantics(){let t=new Set(this.symbols.map(n=>n.name));t.add("Data"),this.lines.forEach((n,r)=>{let i=n.trim();if(i.startsWith("#")||i.length===0)return;let d=n.replace(/"[^"]*"/g,'""').replace(/#.*$/,""),b=/\b([a-zA-Z_]\w*)\b/g,S;for(;(S=b.exec(d))!==null;){let D=S[1],w=S.index,C=w+D.length;w>0&&d[w-1]==="."||d.substring(C).match(/^\s*\(/)||this.keywords.includes(D)||this.typeKeywords.includes(D)||this.functionNames.some(I=>I.toLowerCase()===D.toLowerCase())||t.has(D)||this.addDiagnostic(r,w,r,w+D.length,`Undefined variable "${D}"`,Tt.DiagnosticSeverity.Warning)}})}addDiagnostic(t,n,r,i,a,d){this.diagnostics.push({severity:d,range:{start:{line:t,character:n},end:{line:r,character:i}},message:a,source:"jyro"})}};var me=(0,Re.createConnection)(Re.ProposedFeatures.all),rt=new Re.TextDocuments(fi),rd={maxNumberOfProblems:100,warnOnHostFunctions:!0,trace:{server:"off"}},id=rd,hi=new Map,pi=!1,bs=!1,Eh=!1;me.onInitialize(e=>{me.console.log("Jyro Language Server initializing...");let t=e.capabilities;pi=!!(t.workspace&&t.workspace.configuration),bs=!!(t.workspace&&t.workspace.workspaceFolders),Eh=!!(t.textDocument&&t.textDocument.publishDiagnostics&&t.textDocument.publishDiagnostics.relatedInformation);let n={capabilities:{textDocumentSync:Re.TextDocumentSyncKind.Incremental,completionProvider:{resolveProvider:!0,triggerCharacters:[".","("]},hoverProvider:!0,signatureHelpProvider:{triggerCharacters:["(",","]},definitionProvider:!0,documentFormattingProvider:!0}};return bs&&(n.capabilities.workspace={workspaceFolders:{supported:!0}}),me.console.log("Server capabilities: "+JSON.stringify(n.capabilities)),n});me.onInitialized(()=>{pi&&me.client.register(Re.DidChangeConfigurationNotification.type,void 0),bs&&me.workspace.onDidChangeWorkspaceFolders(e=>{me.console.log("Workspace folder change event received.")})});me.onDidChangeConfiguration(e=>{pi?hi.clear():id=e.settings.jyro||rd,rt.all().forEach(od)});function Mh(e){if(!pi)return Promise.resolve(id);let t=hi.get(e);return t||(t=me.workspace.getConfiguration({scopeUri:e,section:"jyro"}),hi.set(e,t)),t}rt.onDidClose(e=>{hi.delete(e.document.uri)});rt.onDidChangeContent(e=>{od(e.document)});async function od(e){let t=await Mh(e.uri),n=e.getText(),a=new un(n,e.uri,{warnOnHostFunctions:t.warnOnHostFunctions}).analyze().slice(0,t.maxNumberOfProblems);me.sendDiagnostics({uri:e.uri,diagnostics:a})}me.onCompletion(e=>{let t=rt.get(e.textDocument.uri);if(!t)return[];let n=t.getText(),r=t.offsetAt(e.position),i=e.position.line,a=t.getText({start:{line:i,character:0},end:{line:i,character:Number.MAX_SAFE_INTEGER}}),d=[];return["var","if","then","else","end","switch","do","case","default","while","foreach","in","return","fail","break","continue","true","false","null","and","or","not","is"].forEach(C=>{d.push({label:C,kind:Re.CompletionItemKind.Keyword,data:{type:"keyword",value:C}})}),["number","string","boolean","object","array"].forEach(C=>{d.push({label:C,kind:Re.CompletionItemKind.TypeParameter,data:{type:"type",value:C}})}),On.STDLIB_FUNCTIONS.forEach(C=>{let E=C.parameters.map(I=>I.name).join(", ");d.push({label:C.name,kind:Re.CompletionItemKind.Function,detail:`${C.name}(${E})`,documentation:C.description,insertText:`${C.name}($1)`,insertTextFormat:2,data:{type:"function",signature:C}})}),d.push({label:"Data",kind:Re.CompletionItemKind.Variable,detail:"Root data object",documentation:"The root data object for accessing input data",data:{type:"data"}}),new un(n,t.uri).getSymbols().forEach(C=>{d.push({label:C.name,kind:Re.CompletionItemKind.Variable,detail:C.type||"unknown",data:{type:"variable",symbol:C}})}),d});me.onCompletionResolve(e=>{if(e.data&&e.data.type==="function"){let t=e.data.signature;e.documentation={kind:"markdown",value:[`**${t.name}** - ${t.category}`,"",t.description,"","**Parameters:**",...t.parameters.map(n=>`- \`${n.name}\` (${Array.isArray(n.type)?n.type.join(" | "):n.type}): ${n.description}`),"","**Returns:** "+(Array.isArray(t.returnType)?t.returnType.join(" | "):t.returnType),...t.examples?["","**Examples:**",...t.examples.map(n=>`\`\`\`jyro
${n}
\`\`\``)]:[]].join(`
`)}}return e});me.onHover(e=>{let t=rt.get(e.textDocument.uri);if(!t)return null;let n=t.getText(),r=t.offsetAt(e.position),i=jh(t,e.position);if(!i)return null;let a=t.getText(i),d=(0,On.getFunctionSignature)(a);if(d){let D=d.parameters.map(w=>`${w.name}: ${Array.isArray(w.type)?w.type.join(" | "):w.type}`).join(", ");return{contents:{kind:"markdown",value:[`**${d.name}**(${D})`,"",d.description,"",`*Category: ${d.category}*`,"","**Returns:** "+(Array.isArray(d.returnType)?d.returnType.join(" | "):d.returnType),...d.examples?["","**Example:**",`\`\`\`jyro
${d.examples[0]}
\`\`\``]:[]].join(`
`)},range:i}}let S=[{word:"var",desc:"Variable declaration keyword"},{word:"if",desc:"Conditional statement"},{word:"then",desc:"Used after condition in if/case statements"},{word:"else",desc:"Alternative branch in conditional"},{word:"end",desc:"Ends a block (if/while/foreach/switch)"},{word:"while",desc:"While loop statement"},{word:"do",desc:"Marks the start of a loop body (while/foreach)"},{word:"foreach",desc:"Foreach loop for iterating arrays/objects"},{word:"in",desc:"Separates iterator variable from collection in foreach"},{word:"switch",desc:"Switch statement for multiple conditions"},{word:"case",desc:"Case in switch statement"},{word:"default",desc:"Default case in switch statement"},{word:"break",desc:"Exits the current loop"},{word:"continue",desc:"Skips to the next iteration of the loop"},{word:"return",desc:"Returns from the script with an optional value"},{word:"fail",desc:"Terminates script execution with an error. Can include an optional message."},{word:"Data",desc:"The shared data context between the script and its host"}].find(D=>D.word===a);return S?{contents:{kind:"markdown",value:`**${S.word}**

${S.desc}`},range:i}:null});me.onSignatureHelp(e=>{let t=rt.get(e.textDocument.uri);if(!t)return null;let n=t.getText(),r=t.offsetAt(e.position),i=0,a=-1;for(let I=r-1;I>=0;I--)if(n[I]===")")i++;else if(n[I]==="("){if(i===0){a=I;break}i--}if(a===-1)return null;let b=n.substring(0,a).trim().match(/(\w+)\s*$/);if(!b)return null;let S=b[1],D=(0,On.getFunctionSignature)(S);if(!D)return null;let C=(n.substring(a+1,r).match(/,/g)||[]).length,E=Math.min(C,D.parameters.length-1);return{signatures:[{label:`${D.name}(${D.parameters.map(I=>`${I.name}: ${Array.isArray(I.type)?I.type.join(" | "):I.type}`).join(", ")})`,documentation:D.description,parameters:D.parameters.map(I=>({label:I.name,documentation:I.description}))}],activeSignature:0,activeParameter:E}});me.onDefinition(e=>{let t=rt.get(e.textDocument.uri);if(!t)return null;let n=t.getText(),r=Ih(t,e.position);if(!r)return null;let a=new un(n,e.textDocument.uri).getSymbols(),d=a.find(b=>b.name===r.fullPath);return d||(d=a.find(b=>b.name===r.word)),d?{uri:e.textDocument.uri,range:{start:{line:d.line,character:d.character},end:{line:d.line,character:d.character+d.name.length}}}:null});function jh(e,t){let n=e.getText(),r=e.offsetAt(t),i=r,a=r;for(;i>0&&/\w/.test(n[i-1]);)i--;for(;a<n.length&&/\w/.test(n[a]);)a++;return i===a?null:{start:e.positionAt(i),end:e.positionAt(a)}}function Ih(e,t){let r=e.getText().split(`
`);if(t.line>=r.length)return null;let i=r[t.line],a=t.character,d=a,b=a;for(;d>0&&/\w/.test(i[d-1]);)d--;for(;b<i.length&&/\w/.test(i[b]);)b++;if(d===b)return null;let S=i.substring(d,b),D=d,w=b;for(;D>1&&i[D-1]==="."&&/\w/.test(i[D-2]);)for(D-=2;D>0&&/\w/.test(i[D-1]);)D--;for(;w<i.length-1&&i[w]==="."&&/\w/.test(i[w+1]);)for(w++;w<i.length&&/\w/.test(i[w]);)w++;let C=i.substring(D,w);return{word:S,fullPath:C}}function Ah(e,t){let n=e.split(/\r?\n/),r=[],i=t.insertSpaces?" ".repeat(t.tabSize):"	",a=0,d=/^(if|while|foreach|switch)\b/,b=/^(else|case|default)\b/,S=/^end\b/,D=/\b(then|do)\b/,w=/\bend\b/,C=[];for(let E of n){let I=Fh(E);C.push(...I)}for(let E=0;E<C.length;E++){let I=C[E];if(I.trim()===""){r.push("");continue}let W=I.trim();W=Lh(W);let H=W.toLowerCase(),Z=nd(W,"{"),$=nd(W,"}"),v=w.test(H)&&!S.test(H);(S.test(H)||b.test(H))&&(a=Math.max(0,a-1)),W.startsWith("}")&&(a=Math.max(0,a-$));let y=i.repeat(a)+W;r.push(y),/^else\s+if\b/.test(H)&&D.test(H)?v?a++:a+=2:v||(d.test(H)&&D.test(H)||b.test(H))&&a++,W.startsWith("}")?a=a+Z:a=Math.max(0,a+Z-$)}return r.join(`
`)}function nd(e,t){let n=0,r=!1;for(let i=0;i<e.length;i++){let a=e[i];if(a==='"'&&(i===0||e[i-1]!=="\\")){r=!r;continue}!r&&a===t&&n++}return n}function Fh(e){let t=e.trim();if(t===""||t.startsWith("#"))return[e];let n=t.toLowerCase(),r=/^(if|while|foreach|switch|else|case|default)\b/.test(n)&&/\b(then|do)\b/.test(n)&&/\bend\s*$/.test(n),i=[],a="",d=!1,b=0;for(;b<t.length;){let S=t[b];if(S==='"'&&(b===0||t[b-1]!=="\\")){d=!d,a+=S,b++;continue}if(d){a+=S,b++;continue}if(b===0||/\s/.test(t[b-1])){let w=t.slice(b),C=w.match(/^(var|if|while|foreach|switch|return|fail|break|continue)\b/i);C&&a.trim()!==""&&(C[1].toLowerCase()==="if"&&/\belse\s*$/i.test(a)||(i.push(a.trim()),a="")),r||w.match(/^end\b/i)&&a.trim()!==""&&(i.push(a.trim()),a="")}a+=S,b++}return a.trim()!==""&&i.push(a.trim()),i.length>0?i:[e]}function Lh(e){if(e.trim().startsWith("#"))return e;let t="",n=!1,r=0;for(;r<e.length;){let d=e[r],b=e[r+1]||"",S=t[t.length-1]||"";if(d==='"'&&(r===0||e[r-1]!=="\\")){n=!n,t+=d,r++;continue}if(n){t+=d,r++;continue}if(d==="#"){t+=e.substring(r);break}let D=d+b;if(["==","!=","<=",">=","++","--"].includes(D)){t.endsWith(" ")&&(t=t.slice(0,-1)),D==="++"||D==="--"?t+=D:t+=" "+D+" ",r+=2;continue}if(["+","-","*","/","%","<",">","="].includes(d)){if((d==="-"||d==="+")&&(S===""||S==="("||S===","||S==="="||S===" "&&/[=<>!+\-*/%,(]/.test(t[t.length-2]||""))&&/\d/.test(b)){t+=d,r++;continue}t.endsWith(" ")&&(t=t.slice(0,-1)),t+=" "+d+" ",r++;continue}t+=d,r++}let i=t.match(/^(\s*)/)?.[1]||"",a=t.substring(i.length);return a=a.replace(/  +/g," "),a=a.replace(/\b(\w+)\s+\(/g,(d,b)=>["if","while","foreach","switch"].includes(b)?b+" (":b+"("),i+a.trim()}me.onDocumentFormatting(e=>{me.console.log("Document formatting requested");let t=rt.get(e.textDocument.uri);if(!t)return me.console.log("Document not found"),[];let n=t.getText(),r=Ah(n,{tabSize:e.options.tabSize,insertSpaces:e.options.insertSpaces}),i=t.lineCount-1,a=t.getText({start:{line:i,character:0},end:{line:i,character:Number.MAX_SAFE_INTEGER}}).length;return[{range:{start:{line:0,character:0},end:{line:i,character:a}},newText:r}]});rt.listen(me);me.listen();
