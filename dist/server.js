"use strict";var ad=Object.create;var ws=Object.defineProperty;var cd=Object.getOwnPropertyDescriptor;var ud=Object.getOwnPropertyNames;var ld=Object.getPrototypeOf,dd=Object.prototype.hasOwnProperty;var x=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var fd=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ud(t))!dd.call(e,i)&&i!==n&&ws(e,i,{get:()=>t[i],enumerable:!(r=cd(t,i))||r.enumerable});return e};var Gn=(e,t,n)=>(n=e!=null?ad(ld(e)):{},fd(t||!e||!e.__esModule?ws(n,"default",{value:e,enumerable:!0}):n,e));var Xn=x(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.thenable=pe.typedArray=pe.stringArray=pe.array=pe.func=pe.error=pe.number=pe.string=pe.boolean=void 0;function pd(e){return e===!0||e===!1}pe.boolean=pd;function Ss(e){return typeof e=="string"||e instanceof String}pe.string=Ss;function hd(e){return typeof e=="number"||e instanceof Number}pe.number=hd;function md(e){return e instanceof Error}pe.error=md;function Ps(e){return typeof e=="function"}pe.func=Ps;function Cs(e){return Array.isArray(e)}pe.array=Cs;function gd(e){return Cs(e)&&e.every(t=>Ss(t))}pe.stringArray=gd;function yd(e,t){return Array.isArray(e)&&e.every(t)}pe.typedArray=yd;function bd(e){return e&&Ps(e.then)}pe.thenable=bd});var Lt=x(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.stringArray=ve.array=ve.func=ve.error=ve.number=ve.string=ve.boolean=void 0;function vd(e){return e===!0||e===!1}ve.boolean=vd;function ks(e){return typeof e=="string"||e instanceof String}ve.string=ks;function Td(e){return typeof e=="number"||e instanceof Number}ve.number=Td;function _d(e){return e instanceof Error}ve.error=_d;function Rd(e){return typeof e=="function"}ve.func=Rd;function qs(e){return Array.isArray(e)}ve.array=qs;function Dd(e){return qs(e)&&e.every(t=>ks(t))}ve.stringArray=Dd});var Li=x(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.Message=E.NotificationType9=E.NotificationType8=E.NotificationType7=E.NotificationType6=E.NotificationType5=E.NotificationType4=E.NotificationType3=E.NotificationType2=E.NotificationType1=E.NotificationType0=E.NotificationType=E.RequestType9=E.RequestType8=E.RequestType7=E.RequestType6=E.RequestType5=E.RequestType4=E.RequestType3=E.RequestType2=E.RequestType1=E.RequestType=E.RequestType0=E.AbstractMessageSignature=E.ParameterStructures=E.ResponseError=E.ErrorCodes=void 0;var St=Lt(),gi;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3})(gi||(E.ErrorCodes=gi={}));var yi=class e extends Error{constructor(t,n,r){super(n),this.code=St.number(t)?t:gi.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,e.prototype)}toJson(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),t}};E.ResponseError=yi;var Se=class e{constructor(t){this.kind=t}static is(t){return t===e.auto||t===e.byName||t===e.byPosition}toString(){return this.kind}};E.ParameterStructures=Se;Se.auto=new Se("auto");Se.byPosition=new Se("byPosition");Se.byName=new Se("byName");var ie=class{constructor(t,n){this.method=t,this.numberOfParams=n}get parameterStructures(){return Se.auto}};E.AbstractMessageSignature=ie;var bi=class extends ie{constructor(t){super(t,0)}};E.RequestType0=bi;var vi=class extends ie{constructor(t,n=Se.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};E.RequestType=vi;var Ti=class extends ie{constructor(t,n=Se.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};E.RequestType1=Ti;var _i=class extends ie{constructor(t){super(t,2)}};E.RequestType2=_i;var Ri=class extends ie{constructor(t){super(t,3)}};E.RequestType3=Ri;var Di=class extends ie{constructor(t){super(t,4)}};E.RequestType4=Di;var wi=class extends ie{constructor(t){super(t,5)}};E.RequestType5=wi;var Si=class extends ie{constructor(t){super(t,6)}};E.RequestType6=Si;var Pi=class extends ie{constructor(t){super(t,7)}};E.RequestType7=Pi;var Ci=class extends ie{constructor(t){super(t,8)}};E.RequestType8=Ci;var ki=class extends ie{constructor(t){super(t,9)}};E.RequestType9=ki;var qi=class extends ie{constructor(t,n=Se.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};E.NotificationType=qi;var Ni=class extends ie{constructor(t){super(t,0)}};E.NotificationType0=Ni;var xi=class extends ie{constructor(t,n=Se.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};E.NotificationType1=xi;var Oi=class extends ie{constructor(t){super(t,2)}};E.NotificationType2=Oi;var Mi=class extends ie{constructor(t){super(t,3)}};E.NotificationType3=Mi;var Ei=class extends ie{constructor(t){super(t,4)}};E.NotificationType4=Ei;var ji=class extends ie{constructor(t){super(t,5)}};E.NotificationType5=ji;var Ai=class extends ie{constructor(t){super(t,6)}};E.NotificationType6=Ai;var Ii=class extends ie{constructor(t){super(t,7)}};E.NotificationType7=Ii;var Fi=class extends ie{constructor(t){super(t,8)}};E.NotificationType8=Fi;var Ji=class extends ie{constructor(t){super(t,9)}};E.NotificationType9=Ji;var Ns;(function(e){function t(i){let a=i;return a&&St.string(a.method)&&(St.string(a.id)||St.number(a.id))}e.isRequest=t;function n(i){let a=i;return a&&St.string(a.method)&&i.id===void 0}e.isNotification=n;function r(i){let a=i;return a&&(a.result!==void 0||!!a.error)&&(St.string(a.id)||St.number(a.id)||a.id===null)}e.isResponse=r})(Ns||(E.Message=Ns={}))});var Hi=x(at=>{"use strict";var xs;Object.defineProperty(at,"__esModule",{value:!0});at.LRUCache=at.LinkedMap=at.Touch=void 0;var Te;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(Te||(at.Touch=Te={}));var Kn=class{constructor(){this[xs]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(t){return this._map.has(t)}get(t,n=Te.None){let r=this._map.get(t);if(r)return n!==Te.None&&this.touch(r,n),r.value}set(t,n,r=Te.None){let i=this._map.get(t);if(i)i.value=n,r!==Te.None&&this.touch(i,r);else{switch(i={key:t,value:n,next:void 0,previous:void 0},r){case Te.None:this.addItemLast(i);break;case Te.First:this.addItemFirst(i);break;case Te.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(t,i),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){let n=this._map.get(t);if(n)return this._map.delete(t),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,n){let r=this._state,i=this._head;for(;i;){if(n?t.bind(n)(i.value,i.key,this):t(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(xs=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>t;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{let n=t.next,r=t.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}t.next=void 0,t.previous=void 0,this._state++}touch(t,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Te.First&&n!==Te.Last)){if(n===Te.First){if(t===this._head)return;let r=t.next,i=t.previous;t===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(n===Te.Last){if(t===this._tail)return;let r=t.next,i=t.previous;t===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){let t=[];return this.forEach((n,r)=>{t.push([r,n])}),t}fromJSON(t){this.clear();for(let[n,r]of t)this.set(n,r)}};at.LinkedMap=Kn;var Wi=class extends Kn{constructor(t,n=1){super(),this._limit=t,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,n=Te.AsNew){return super.get(t,n)}peek(t){return super.get(t,Te.None)}set(t,n){return super.set(t,n,Te.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};at.LRUCache=Wi});var Ms=x(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.Disposable=void 0;var Os;(function(e){function t(n){return{dispose:n}}e.create=t})(Os||(Qn.Disposable=Os={}))});var ct=x(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});var Ui;function $i(){if(Ui===void 0)throw new Error("No runtime abstraction layer installed");return Ui}(function(e){function t(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Ui=n}e.install=t})($i||($i={}));Bi.default=$i});var Ht=x(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.Emitter=Wt.Event=void 0;var wd=ct(),Es;(function(e){let t={dispose(){}};e.None=function(){return t}})(Es||(Wt.Event=Es={}));var zi=class{add(t,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(t,n)})}remove(t,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,a=this._callbacks.length;i<a;i++)if(this._callbacks[i]===t)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let a=0,d=r.length;a<d;a++)try{n.push(r[a].apply(i[a],t))}catch(m){(0,wd.default)().console.error(m)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Zn=class e{constructor(t){this._options=t}get event(){return this._event||(this._event=(t,n,r)=>{this._callbacks||(this._callbacks=new zi),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,n);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(t,n),i.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Wt.Emitter=Zn;Zn._noop=function(){}});var tr=x(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.CancellationTokenSource=Ut.CancellationToken=void 0;var Sd=ct(),Pd=Lt(),Vi=Ht(),Yn;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Vi.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Vi.Event.None});function t(n){let r=n;return r&&(r===e.None||r===e.Cancelled||Pd.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}e.is=t})(Yn||(Ut.CancellationToken=Yn={}));var Cd=Object.freeze(function(e,t){let n=(0,Sd.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}),er=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Cd:(this._emitter||(this._emitter=new Vi.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Gi=class{get token(){return this._token||(this._token=new er),this._token}cancel(){this._token?this._token.cancel():this._token=Yn.Cancelled}dispose(){this._token?this._token instanceof er&&this._token.dispose():this._token=Yn.None}};Ut.CancellationTokenSource=Gi});var js=x($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.SharedArrayReceiverStrategy=$t.SharedArraySenderStrategy=void 0;var kd=tr(),gn;(function(e){e.Continue=0,e.Cancelled=1})(gn||(gn={}));var Xi=class{constructor(){this.buffers=new Map}enableCancellation(t){if(t.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=gn.Continue,this.buffers.set(t.id,n),t.$cancellationData=n}async sendCancellation(t,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,gn.Cancelled)}cleanup(t){this.buffers.delete(t)}dispose(){this.buffers.clear()}};$t.SharedArraySenderStrategy=Xi;var Ki=class{constructor(t){this.data=new Int32Array(t,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===gn.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Qi=class{constructor(t){this.token=new Ki(t)}cancel(){}dispose(){}},Zi=class{constructor(){this.kind="request"}createCancellationTokenSource(t){let n=t.$cancellationData;return n===void 0?new kd.CancellationTokenSource:new Qi(n)}};$t.SharedArrayReceiverStrategy=Zi});var eo=x(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.Semaphore=void 0;var qd=ct(),Yi=class{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((n,r)=>{this._waiting.push({thunk:t,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,qd.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=t.thunk();n instanceof Promise?n.then(r=>{this._active--,t.resolve(r),this.runNext()},r=>{this._active--,t.reject(r),this.runNext()}):(this._active--,t.resolve(n),this.runNext())}catch(n){this._active--,t.reject(n),this.runNext()}}};nr.Semaphore=Yi});var Is=x(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.ReadableStreamMessageReader=ut.AbstractMessageReader=ut.MessageReader=void 0;var no=ct(),Bt=Lt(),to=Ht(),Nd=eo(),As;(function(e){function t(n){let r=n;return r&&Bt.func(r.listen)&&Bt.func(r.dispose)&&Bt.func(r.onError)&&Bt.func(r.onClose)&&Bt.func(r.onPartialMessage)}e.is=t})(As||(ut.MessageReader=As={}));var rr=class{constructor(){this.errorEmitter=new to.Emitter,this.closeEmitter=new to.Emitter,this.partialMessageEmitter=new to.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t){this.errorEmitter.fire(this.asError(t))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(t){this.partialMessageEmitter.fire(t)}asError(t){return t instanceof Error?t:new Error(`Reader received error. Reason: ${Bt.string(t.message)?t.message:"unknown"}`)}};ut.AbstractMessageReader=rr;var ro;(function(e){function t(n){let r,i,a,d=new Map,m,S=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(a=n.contentDecoder,d.set(a.name,a)),n.contentDecoders!==void 0)for(let D of n.contentDecoders)d.set(D.name,D);if(n.contentTypeDecoder!==void 0&&(m=n.contentTypeDecoder,S.set(m.name,m)),n.contentTypeDecoders!==void 0)for(let D of n.contentTypeDecoders)S.set(D.name,D)}return m===void 0&&(m=(0,no.default)().applicationJson.decoder,S.set(m.name,m)),{charset:r,contentDecoder:a,contentDecoders:d,contentTypeDecoder:m,contentTypeDecoders:S}}e.fromOptions=t})(ro||(ro={}));var io=class extends rr{constructor(t,n){super(),this.readable=t,this.options=ro.fromOptions(n),this.buffer=(0,no.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new Nd.Semaphore(1)}set partialMessageTimeout(t){this._partialMessageTimeout=t}get partialMessageTimeout(){return this._partialMessageTimeout}listen(t){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(t){try{for(this.buffer.append(t);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let a=parseInt(i);if(isNaN(a)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=a}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,no.default)().timer.setTimeout((t,n)=>{this.partialMessageTimer=void 0,t===this.messageToken&&(this.firePartialMessage({messageToken:t,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};ut.ReadableStreamMessageReader=io});var Hs=x(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.WriteableStreamMessageWriter=lt.AbstractMessageWriter=lt.MessageWriter=void 0;var Fs=ct(),yn=Lt(),xd=eo(),Js=Ht(),Od="Content-Length: ",Ls=`\r
`,Ws;(function(e){function t(n){let r=n;return r&&yn.func(r.dispose)&&yn.func(r.onClose)&&yn.func(r.onError)&&yn.func(r.write)}e.is=t})(Ws||(lt.MessageWriter=Ws={}));var ir=class{constructor(){this.errorEmitter=new Js.Emitter,this.closeEmitter=new Js.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t,n,r){this.errorEmitter.fire([this.asError(t),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(t){return t instanceof Error?t:new Error(`Writer received error. Reason: ${yn.string(t.message)?t.message:"unknown"}`)}};lt.AbstractMessageWriter=ir;var oo;(function(e){function t(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Fs.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Fs.default)().applicationJson.encoder}}e.fromOptions=t})(oo||(oo={}));var so=class extends ir{constructor(t,n){super(),this.writable=t,this.options=oo.fromOptions(n),this.errorCount=0,this.writeSemaphore=new xd.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(t){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(t,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(Od,r.byteLength.toString(),Ls),i.push(Ls),this.doWrite(t,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(t,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,t),Promise.reject(i)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){this.writable.end()}};lt.WriteableStreamMessageWriter=so});var Us=x(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.AbstractMessageBuffer=void 0;var Md=13,Ed=10,jd=`\r
`,ao=class{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(t){let n=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(t=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,a=0;e:for(;r<this._chunks.length;){let D=this._chunks[r];for(i=0;i<D.length;){switch(D[i]){case Md:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case Ed:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}a+=D.byteLength,r++}if(n!==4)return;let d=this._read(a+i),m=new Map,S=this.toString(d,"ascii").split(jd);if(S.length<2)return m;for(let D=0;D<S.length-2;D++){let w=S[D],k=w.indexOf(":");if(k===-1)throw new Error(`Message header must separate key and value using ':'
${w}`);let M=w.substr(0,k),A=w.substr(k+1).trim();m.set(t?M.toLowerCase():M,A)}return m}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){let a=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(a)}if(this._chunks[0].byteLength>t){let a=this._chunks[0],d=this.asNative(a,t);return this._chunks[0]=a.slice(t),this._totalLength-=t,d}let n=this.allocNative(t),r=0,i=0;for(;t>0;){let a=this._chunks[i];if(a.byteLength>t){let d=a.slice(0,t);n.set(d,r),r+=t,this._chunks[i]=a.slice(t),this._totalLength-=t,t-=t}else n.set(a,r),r+=a.byteLength,this._chunks.shift(),this._totalLength-=a.byteLength,t-=a.byteLength}return n}};or.AbstractMessageBuffer=ao});var Gs=x(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.createMessageConnection=L.ConnectionOptions=L.MessageStrategy=L.CancellationStrategy=L.CancellationSenderStrategy=L.CancellationReceiverStrategy=L.RequestCancellationReceiverStrategy=L.IdCancellationReceiverStrategy=L.ConnectionStrategy=L.ConnectionError=L.ConnectionErrors=L.LogTraceNotification=L.SetTraceNotification=L.TraceFormat=L.TraceValues=L.Trace=L.NullLogger=L.ProgressType=L.ProgressToken=void 0;var $s=ct(),ae=Lt(),j=Li(),Bs=Hi(),bn=Ht(),co=tr(),_n;(function(e){e.type=new j.NotificationType("$/cancelRequest")})(_n||(_n={}));var uo;(function(e){function t(n){return typeof n=="string"||typeof n=="number"}e.is=t})(uo||(L.ProgressToken=uo={}));var vn;(function(e){e.type=new j.NotificationType("$/progress")})(vn||(vn={}));var lo=class{constructor(){}};L.ProgressType=lo;var fo;(function(e){function t(n){return ae.func(n)}e.is=t})(fo||(fo={}));L.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var G;(function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"})(G||(L.Trace=G={}));var zs;(function(e){e.Off="off",e.Messages="messages",e.Compact="compact",e.Verbose="verbose"})(zs||(L.TraceValues=zs={}));(function(e){function t(r){if(!ae.string(r))return e.Off;switch(r=r.toLowerCase(),r){case"off":return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=t;function n(r){switch(r){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}e.toString=n})(G||(L.Trace=G={}));var xe;(function(e){e.Text="text",e.JSON="json"})(xe||(L.TraceFormat=xe={}));(function(e){function t(n){return ae.string(n)?(n=n.toLowerCase(),n==="json"?e.JSON:e.Text):e.Text}e.fromString=t})(xe||(L.TraceFormat=xe={}));var po;(function(e){e.type=new j.NotificationType("$/setTrace")})(po||(L.SetTraceNotification=po={}));var sr;(function(e){e.type=new j.NotificationType("$/logTrace")})(sr||(L.LogTraceNotification=sr={}));var Tn;(function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"})(Tn||(L.ConnectionErrors=Tn={}));var zt=class e extends Error{constructor(t,n){super(n),this.code=t,Object.setPrototypeOf(this,e.prototype)}};L.ConnectionError=zt;var ho;(function(e){function t(n){let r=n;return r&&ae.func(r.cancelUndispatched)}e.is=t})(ho||(L.ConnectionStrategy=ho={}));var ar;(function(e){function t(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&ae.func(r.createCancellationTokenSource)&&(r.dispose===void 0||ae.func(r.dispose))}e.is=t})(ar||(L.IdCancellationReceiverStrategy=ar={}));var mo;(function(e){function t(n){let r=n;return r&&r.kind==="request"&&ae.func(r.createCancellationTokenSource)&&(r.dispose===void 0||ae.func(r.dispose))}e.is=t})(mo||(L.RequestCancellationReceiverStrategy=mo={}));var cr;(function(e){e.Message=Object.freeze({createCancellationTokenSource(n){return new co.CancellationTokenSource}});function t(n){return ar.is(n)||mo.is(n)}e.is=t})(cr||(L.CancellationReceiverStrategy=cr={}));var ur;(function(e){e.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(_n.type,{id:r})},cleanup(n){}});function t(n){let r=n;return r&&ae.func(r.sendCancellation)&&ae.func(r.cleanup)}e.is=t})(ur||(L.CancellationSenderStrategy=ur={}));var lr;(function(e){e.Message=Object.freeze({receiver:cr.Message,sender:ur.Message});function t(n){let r=n;return r&&cr.is(r.receiver)&&ur.is(r.sender)}e.is=t})(lr||(L.CancellationStrategy=lr={}));var dr;(function(e){function t(n){let r=n;return r&&ae.func(r.handleMessage)}e.is=t})(dr||(L.MessageStrategy=dr={}));var Vs;(function(e){function t(n){let r=n;return r&&(lr.is(r.cancellationStrategy)||ho.is(r.connectionStrategy)||dr.is(r.messageStrategy))}e.is=t})(Vs||(L.ConnectionOptions=Vs={}));var $e;(function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"})($e||($e={}));function Ad(e,t,n,r){let i=n!==void 0?n:L.NullLogger,a=0,d=0,m=0,S="2.0",D,w=new Map,k,M=new Map,A=new Map,ne,I=new Bs.LinkedMap,K=new Map,H=new Set,v=new Map,y=G.Off,C=xe.Text,W,Y=$e.New,ce=new bn.Emitter,Le=new bn.Emitter,_t=new bn.Emitter,it=new bn.Emitter,ot=new bn.Emitter,we=r&&r.cancellationStrategy?r.cancellationStrategy:lr.Message;function Mt(f){if(f===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+f.toString()}function Et(f){return f===null?"res-unknown-"+(++m).toString():"res-"+f.toString()}function On(){return"not-"+(++d).toString()}function mi(f,_){j.Message.isRequest(_)?f.set(Mt(_.id),_):j.Message.isResponse(_)?f.set(Et(_.id),_):f.set(On(),_)}function Mn(f){}function ln(){return Y===$e.Listening}function Rt(){return Y===$e.Closed}function Qe(){return Y===$e.Disposed}function jt(){(Y===$e.New||Y===$e.Listening)&&(Y=$e.Closed,Le.fire(void 0))}function Dt(f){ce.fire([f,void 0,void 0])}function En(f){ce.fire(f)}e.onClose(jt),e.onError(Dt),t.onClose(jt),t.onError(En);function dn(){ne||I.size===0||(ne=(0,$s.default)().timer.setImmediate(()=>{ne=void 0,jn()}))}function fn(f){j.Message.isRequest(f)?In(f):j.Message.isNotification(f)?Jn(f):j.Message.isResponse(f)?Fn(f):At(f)}function jn(){if(I.size===0)return;let f=I.shift();try{let _=r?.messageStrategy;dr.is(_)?_.handleMessage(f,fn):fn(f)}finally{dn()}}let An=f=>{try{if(j.Message.isNotification(f)&&f.method===_n.type.method){let _=f.params.id,q=Mt(_),O=I.get(q);if(j.Message.isRequest(O)){let X=r?.connectionStrategy,re=X&&X.cancelUndispatched?X.cancelUndispatched(O,Mn):void 0;if(re&&(re.error!==void 0||re.result!==void 0)){I.delete(q),v.delete(_),re.id=O.id,wt(re,f.method,Date.now()),t.write(re).catch(()=>i.error("Sending response for canceled message failed."));return}}let Q=v.get(_);if(Q!==void 0){Q.cancel(),It(f);return}else H.add(_)}mi(I,f)}finally{dn()}};function In(f){if(Qe())return;function _(U,Z,z){let ue={jsonrpc:S,id:f.id};U instanceof j.ResponseError?ue.error=U.toJson():ue.result=U===void 0?null:U,wt(ue,Z,z),t.write(ue).catch(()=>i.error("Sending response failed."))}function q(U,Z,z){let ue={jsonrpc:S,id:f.id,error:U.toJson()};wt(ue,Z,z),t.write(ue).catch(()=>i.error("Sending response failed."))}function O(U,Z,z){U===void 0&&(U=null);let ue={jsonrpc:S,id:f.id,result:U};wt(ue,Z,z),t.write(ue).catch(()=>i.error("Sending response failed."))}Hn(f);let Q=w.get(f.method),X,re;Q&&(X=Q.type,re=Q.handler);let oe=Date.now();if(re||D){let U=f.id??String(Date.now()),Z=ar.is(we.receiver)?we.receiver.createCancellationTokenSource(U):we.receiver.createCancellationTokenSource(f);f.id!==null&&H.has(f.id)&&Z.cancel(),f.id!==null&&v.set(U,Z);try{let z;if(re)if(f.params===void 0){if(X!==void 0&&X.numberOfParams!==0){q(new j.ResponseError(j.ErrorCodes.InvalidParams,`Request ${f.method} defines ${X.numberOfParams} params but received none.`),f.method,oe);return}z=re(Z.token)}else if(Array.isArray(f.params)){if(X!==void 0&&X.parameterStructures===j.ParameterStructures.byName){q(new j.ResponseError(j.ErrorCodes.InvalidParams,`Request ${f.method} defines parameters by name but received parameters by position`),f.method,oe);return}z=re(...f.params,Z.token)}else{if(X!==void 0&&X.parameterStructures===j.ParameterStructures.byPosition){q(new j.ResponseError(j.ErrorCodes.InvalidParams,`Request ${f.method} defines parameters by position but received parameters by name`),f.method,oe);return}z=re(f.params,Z.token)}else D&&(z=D(f.method,f.params,Z.token));let ue=z;z?ue.then?ue.then(ge=>{v.delete(U),_(ge,f.method,oe)},ge=>{v.delete(U),ge instanceof j.ResponseError?q(ge,f.method,oe):ge&&ae.string(ge.message)?q(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${f.method} failed with message: ${ge.message}`),f.method,oe):q(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${f.method} failed unexpectedly without providing any details.`),f.method,oe)}):(v.delete(U),_(z,f.method,oe)):(v.delete(U),O(z,f.method,oe))}catch(z){v.delete(U),z instanceof j.ResponseError?_(z,f.method,oe):z&&ae.string(z.message)?q(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${f.method} failed with message: ${z.message}`),f.method,oe):q(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${f.method} failed unexpectedly without providing any details.`),f.method,oe)}}else q(new j.ResponseError(j.ErrorCodes.MethodNotFound,`Unhandled method ${f.method}`),f.method,oe)}function Fn(f){if(!Qe())if(f.id===null)f.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(f.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let _=f.id,q=K.get(_);if(Un(f,q),q!==void 0){K.delete(_);try{if(f.error){let O=f.error;q.reject(new j.ResponseError(O.code,O.message,O.data))}else if(f.result!==void 0)q.resolve(f.result);else throw new Error("Should never happen.")}catch(O){O.message?i.error(`Response handler '${q.method}' failed with message: ${O.message}`):i.error(`Response handler '${q.method}' failed unexpectedly.`)}}}}function Jn(f){if(Qe())return;let _,q;if(f.method===_n.type.method){let O=f.params.id;H.delete(O),It(f);return}else{let O=M.get(f.method);O&&(q=O.handler,_=O.type)}if(q||k)try{if(It(f),q)if(f.params===void 0)_!==void 0&&_.numberOfParams!==0&&_.parameterStructures!==j.ParameterStructures.byName&&i.error(`Notification ${f.method} defines ${_.numberOfParams} params but received none.`),q();else if(Array.isArray(f.params)){let O=f.params;f.method===vn.type.method&&O.length===2&&uo.is(O[0])?q({token:O[0],value:O[1]}):(_!==void 0&&(_.parameterStructures===j.ParameterStructures.byName&&i.error(`Notification ${f.method} defines parameters by name but received parameters by position`),_.numberOfParams!==f.params.length&&i.error(`Notification ${f.method} defines ${_.numberOfParams} params but received ${O.length} arguments`)),q(...O))}else _!==void 0&&_.parameterStructures===j.ParameterStructures.byPosition&&i.error(`Notification ${f.method} defines parameters by position but received parameters by name`),q(f.params);else k&&k(f.method,f.params)}catch(O){O.message?i.error(`Notification handler '${f.method}' failed with message: ${O.message}`):i.error(`Notification handler '${f.method}' failed unexpectedly.`)}else _t.fire(f)}function At(f){if(!f){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(f,null,4)}`);let _=f;if(ae.string(_.id)||ae.number(_.id)){let q=_.id,O=K.get(q);O&&O.reject(new Error("The received response has neither a result nor an error property."))}}function We(f){if(f!=null)switch(y){case G.Verbose:return JSON.stringify(f,null,4);case G.Compact:return JSON.stringify(f);default:return}}function Ln(f){if(!(y===G.Off||!W))if(C===xe.Text){let _;(y===G.Verbose||y===G.Compact)&&f.params&&(_=`Params: ${We(f.params)}

`),W.log(`Sending request '${f.method} - (${f.id})'.`,_)}else Ze("send-request",f)}function Wn(f){if(!(y===G.Off||!W))if(C===xe.Text){let _;(y===G.Verbose||y===G.Compact)&&(f.params?_=`Params: ${We(f.params)}

`:_=`No parameters provided.

`),W.log(`Sending notification '${f.method}'.`,_)}else Ze("send-notification",f)}function wt(f,_,q){if(!(y===G.Off||!W))if(C===xe.Text){let O;(y===G.Verbose||y===G.Compact)&&(f.error&&f.error.data?O=`Error data: ${We(f.error.data)}

`:f.result?O=`Result: ${We(f.result)}

`:f.error===void 0&&(O=`No result returned.

`)),W.log(`Sending response '${_} - (${f.id})'. Processing request took ${Date.now()-q}ms`,O)}else Ze("send-response",f)}function Hn(f){if(!(y===G.Off||!W))if(C===xe.Text){let _;(y===G.Verbose||y===G.Compact)&&f.params&&(_=`Params: ${We(f.params)}

`),W.log(`Received request '${f.method} - (${f.id})'.`,_)}else Ze("receive-request",f)}function It(f){if(!(y===G.Off||!W||f.method===sr.type.method))if(C===xe.Text){let _;(y===G.Verbose||y===G.Compact)&&(f.params?_=`Params: ${We(f.params)}

`:_=`No parameters provided.

`),W.log(`Received notification '${f.method}'.`,_)}else Ze("receive-notification",f)}function Un(f,_){if(!(y===G.Off||!W))if(C===xe.Text){let q;if((y===G.Verbose||y===G.Compact)&&(f.error&&f.error.data?q=`Error data: ${We(f.error.data)}

`:f.result?q=`Result: ${We(f.result)}

`:f.error===void 0&&(q=`No result returned.

`)),_){let O=f.error?` Request failed: ${f.error.message} (${f.error.code}).`:"";W.log(`Received response '${_.method} - (${f.id})' in ${Date.now()-_.timerStart}ms.${O}`,q)}else W.log(`Received response ${f.id} without active response promise.`,q)}else Ze("receive-response",f)}function Ze(f,_){if(!W||y===G.Off)return;let q={isLSPMessage:!0,type:f,message:_,timestamp:Date.now()};W.log(q)}function st(){if(Rt())throw new zt(Tn.Closed,"Connection is closed.");if(Qe())throw new zt(Tn.Disposed,"Connection is disposed.")}function $n(){if(ln())throw new zt(Tn.AlreadyListening,"Connection is already listening")}function Bn(){if(!ln())throw new Error("Call listen() first.")}function Ve(f){return f===void 0?null:f}function pn(f){if(f!==null)return f}function hn(f){return f!=null&&!Array.isArray(f)&&typeof f=="object"}function Ft(f,_){switch(f){case j.ParameterStructures.auto:return hn(_)?pn(_):[Ve(_)];case j.ParameterStructures.byName:if(!hn(_))throw new Error("Received parameters by name but param is not an object literal.");return pn(_);case j.ParameterStructures.byPosition:return[Ve(_)];default:throw new Error(`Unknown parameter structure ${f.toString()}`)}}function mn(f,_){let q,O=f.numberOfParams;switch(O){case 0:q=void 0;break;case 1:q=Ft(f.parameterStructures,_[0]);break;default:q=[];for(let Q=0;Q<_.length&&Q<O;Q++)q.push(Ve(_[Q]));if(_.length<O)for(let Q=_.length;Q<O;Q++)q.push(null);break}return q}let Ye={sendNotification:(f,..._)=>{st();let q,O;if(ae.string(f)){q=f;let X=_[0],re=0,oe=j.ParameterStructures.auto;j.ParameterStructures.is(X)&&(re=1,oe=X);let U=_.length,Z=U-re;switch(Z){case 0:O=void 0;break;case 1:O=Ft(oe,_[re]);break;default:if(oe===j.ParameterStructures.byName)throw new Error(`Received ${Z} parameters for 'by Name' notification parameter structure.`);O=_.slice(re,U).map(z=>Ve(z));break}}else{let X=_;q=f.method,O=mn(f,X)}let Q={jsonrpc:S,method:q,params:O};return Wn(Q),t.write(Q).catch(X=>{throw i.error("Sending notification failed."),X})},onNotification:(f,_)=>{st();let q;return ae.func(f)?k=f:_&&(ae.string(f)?(q=f,M.set(f,{type:void 0,handler:_})):(q=f.method,M.set(f.method,{type:f,handler:_}))),{dispose:()=>{q!==void 0?M.delete(q):k=void 0}}},onProgress:(f,_,q)=>{if(A.has(_))throw new Error(`Progress handler for token ${_} already registered`);return A.set(_,q),{dispose:()=>{A.delete(_)}}},sendProgress:(f,_,q)=>Ye.sendNotification(vn.type,{token:_,value:q}),onUnhandledProgress:it.event,sendRequest:(f,..._)=>{st(),Bn();let q,O,Q;if(ae.string(f)){q=f;let U=_[0],Z=_[_.length-1],z=0,ue=j.ParameterStructures.auto;j.ParameterStructures.is(U)&&(z=1,ue=U);let ge=_.length;co.CancellationToken.is(Z)&&(ge=ge-1,Q=Z);let Ne=ge-z;switch(Ne){case 0:O=void 0;break;case 1:O=Ft(ue,_[z]);break;default:if(ue===j.ParameterStructures.byName)throw new Error(`Received ${Ne} parameters for 'by Name' request parameter structure.`);O=_.slice(z,ge).map(zn=>Ve(zn));break}}else{let U=_;q=f.method,O=mn(f,U);let Z=f.numberOfParams;Q=co.CancellationToken.is(U[Z])?U[Z]:void 0}let X=a++,re;Q&&(re=Q.onCancellationRequested(()=>{let U=we.sender.sendCancellation(Ye,X);return U===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${X}`),Promise.resolve()):U.catch(()=>{i.log(`Sending cancellation messages for id ${X} failed`)})}));let oe={jsonrpc:S,id:X,method:q,params:O};return Ln(oe),typeof we.sender.enableCancellation=="function"&&we.sender.enableCancellation(oe),new Promise(async(U,Z)=>{let z=Ne=>{U(Ne),we.sender.cleanup(X),re?.dispose()},ue=Ne=>{Z(Ne),we.sender.cleanup(X),re?.dispose()},ge={method:q,timerStart:Date.now(),resolve:z,reject:ue};try{await t.write(oe),K.set(X,ge)}catch(Ne){throw i.error("Sending request failed."),ge.reject(new j.ResponseError(j.ErrorCodes.MessageWriteError,Ne.message?Ne.message:"Unknown reason")),Ne}})},onRequest:(f,_)=>{st();let q=null;return fo.is(f)?(q=void 0,D=f):ae.string(f)?(q=null,_!==void 0&&(q=f,w.set(f,{handler:_,type:void 0}))):_!==void 0&&(q=f.method,w.set(f.method,{type:f,handler:_})),{dispose:()=>{q!==null&&(q!==void 0?w.delete(q):D=void 0)}}},hasPendingResponse:()=>K.size>0,trace:async(f,_,q)=>{let O=!1,Q=xe.Text;q!==void 0&&(ae.boolean(q)?O=q:(O=q.sendNotification||!1,Q=q.traceFormat||xe.Text)),y=f,C=Q,y===G.Off?W=void 0:W=_,O&&!Rt()&&!Qe()&&await Ye.sendNotification(po.type,{value:G.toString(f)})},onError:ce.event,onClose:Le.event,onUnhandledNotification:_t.event,onDispose:ot.event,end:()=>{t.end()},dispose:()=>{if(Qe())return;Y=$e.Disposed,ot.fire(void 0);let f=new j.ResponseError(j.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let _ of K.values())_.reject(f);K=new Map,v=new Map,H=new Set,I=new Bs.LinkedMap,ae.func(t.dispose)&&t.dispose(),ae.func(e.dispose)&&e.dispose()},listen:()=>{st(),$n(),Y=$e.Listening,e.listen(An)},inspect:()=>{(0,$s.default)().console.log("inspect")}};return Ye.onNotification(sr.type,f=>{if(y===G.Off||!W)return;let _=y===G.Verbose||y===G.Compact;W.log(f.message,_?f.verbose:void 0)}),Ye.onNotification(vn.type,f=>{let _=A.get(f.token);_?_(f.value):it.fire(f)}),Ye}L.createMessageConnection=Ad});var fr=x(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.ProgressType=T.ProgressToken=T.createMessageConnection=T.NullLogger=T.ConnectionOptions=T.ConnectionStrategy=T.AbstractMessageBuffer=T.WriteableStreamMessageWriter=T.AbstractMessageWriter=T.MessageWriter=T.ReadableStreamMessageReader=T.AbstractMessageReader=T.MessageReader=T.SharedArrayReceiverStrategy=T.SharedArraySenderStrategy=T.CancellationToken=T.CancellationTokenSource=T.Emitter=T.Event=T.Disposable=T.LRUCache=T.Touch=T.LinkedMap=T.ParameterStructures=T.NotificationType9=T.NotificationType8=T.NotificationType7=T.NotificationType6=T.NotificationType5=T.NotificationType4=T.NotificationType3=T.NotificationType2=T.NotificationType1=T.NotificationType0=T.NotificationType=T.ErrorCodes=T.ResponseError=T.RequestType9=T.RequestType8=T.RequestType7=T.RequestType6=T.RequestType5=T.RequestType4=T.RequestType3=T.RequestType2=T.RequestType1=T.RequestType0=T.RequestType=T.Message=T.RAL=void 0;T.MessageStrategy=T.CancellationStrategy=T.CancellationSenderStrategy=T.CancellationReceiverStrategy=T.ConnectionError=T.ConnectionErrors=T.LogTraceNotification=T.SetTraceNotification=T.TraceFormat=T.TraceValues=T.Trace=void 0;var te=Li();Object.defineProperty(T,"Message",{enumerable:!0,get:function(){return te.Message}});Object.defineProperty(T,"RequestType",{enumerable:!0,get:function(){return te.RequestType}});Object.defineProperty(T,"RequestType0",{enumerable:!0,get:function(){return te.RequestType0}});Object.defineProperty(T,"RequestType1",{enumerable:!0,get:function(){return te.RequestType1}});Object.defineProperty(T,"RequestType2",{enumerable:!0,get:function(){return te.RequestType2}});Object.defineProperty(T,"RequestType3",{enumerable:!0,get:function(){return te.RequestType3}});Object.defineProperty(T,"RequestType4",{enumerable:!0,get:function(){return te.RequestType4}});Object.defineProperty(T,"RequestType5",{enumerable:!0,get:function(){return te.RequestType5}});Object.defineProperty(T,"RequestType6",{enumerable:!0,get:function(){return te.RequestType6}});Object.defineProperty(T,"RequestType7",{enumerable:!0,get:function(){return te.RequestType7}});Object.defineProperty(T,"RequestType8",{enumerable:!0,get:function(){return te.RequestType8}});Object.defineProperty(T,"RequestType9",{enumerable:!0,get:function(){return te.RequestType9}});Object.defineProperty(T,"ResponseError",{enumerable:!0,get:function(){return te.ResponseError}});Object.defineProperty(T,"ErrorCodes",{enumerable:!0,get:function(){return te.ErrorCodes}});Object.defineProperty(T,"NotificationType",{enumerable:!0,get:function(){return te.NotificationType}});Object.defineProperty(T,"NotificationType0",{enumerable:!0,get:function(){return te.NotificationType0}});Object.defineProperty(T,"NotificationType1",{enumerable:!0,get:function(){return te.NotificationType1}});Object.defineProperty(T,"NotificationType2",{enumerable:!0,get:function(){return te.NotificationType2}});Object.defineProperty(T,"NotificationType3",{enumerable:!0,get:function(){return te.NotificationType3}});Object.defineProperty(T,"NotificationType4",{enumerable:!0,get:function(){return te.NotificationType4}});Object.defineProperty(T,"NotificationType5",{enumerable:!0,get:function(){return te.NotificationType5}});Object.defineProperty(T,"NotificationType6",{enumerable:!0,get:function(){return te.NotificationType6}});Object.defineProperty(T,"NotificationType7",{enumerable:!0,get:function(){return te.NotificationType7}});Object.defineProperty(T,"NotificationType8",{enumerable:!0,get:function(){return te.NotificationType8}});Object.defineProperty(T,"NotificationType9",{enumerable:!0,get:function(){return te.NotificationType9}});Object.defineProperty(T,"ParameterStructures",{enumerable:!0,get:function(){return te.ParameterStructures}});var go=Hi();Object.defineProperty(T,"LinkedMap",{enumerable:!0,get:function(){return go.LinkedMap}});Object.defineProperty(T,"LRUCache",{enumerable:!0,get:function(){return go.LRUCache}});Object.defineProperty(T,"Touch",{enumerable:!0,get:function(){return go.Touch}});var Id=Ms();Object.defineProperty(T,"Disposable",{enumerable:!0,get:function(){return Id.Disposable}});var Xs=Ht();Object.defineProperty(T,"Event",{enumerable:!0,get:function(){return Xs.Event}});Object.defineProperty(T,"Emitter",{enumerable:!0,get:function(){return Xs.Emitter}});var Ks=tr();Object.defineProperty(T,"CancellationTokenSource",{enumerable:!0,get:function(){return Ks.CancellationTokenSource}});Object.defineProperty(T,"CancellationToken",{enumerable:!0,get:function(){return Ks.CancellationToken}});var Qs=js();Object.defineProperty(T,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return Qs.SharedArraySenderStrategy}});Object.defineProperty(T,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return Qs.SharedArrayReceiverStrategy}});var yo=Is();Object.defineProperty(T,"MessageReader",{enumerable:!0,get:function(){return yo.MessageReader}});Object.defineProperty(T,"AbstractMessageReader",{enumerable:!0,get:function(){return yo.AbstractMessageReader}});Object.defineProperty(T,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return yo.ReadableStreamMessageReader}});var bo=Hs();Object.defineProperty(T,"MessageWriter",{enumerable:!0,get:function(){return bo.MessageWriter}});Object.defineProperty(T,"AbstractMessageWriter",{enumerable:!0,get:function(){return bo.AbstractMessageWriter}});Object.defineProperty(T,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return bo.WriteableStreamMessageWriter}});var Fd=Us();Object.defineProperty(T,"AbstractMessageBuffer",{enumerable:!0,get:function(){return Fd.AbstractMessageBuffer}});var be=Gs();Object.defineProperty(T,"ConnectionStrategy",{enumerable:!0,get:function(){return be.ConnectionStrategy}});Object.defineProperty(T,"ConnectionOptions",{enumerable:!0,get:function(){return be.ConnectionOptions}});Object.defineProperty(T,"NullLogger",{enumerable:!0,get:function(){return be.NullLogger}});Object.defineProperty(T,"createMessageConnection",{enumerable:!0,get:function(){return be.createMessageConnection}});Object.defineProperty(T,"ProgressToken",{enumerable:!0,get:function(){return be.ProgressToken}});Object.defineProperty(T,"ProgressType",{enumerable:!0,get:function(){return be.ProgressType}});Object.defineProperty(T,"Trace",{enumerable:!0,get:function(){return be.Trace}});Object.defineProperty(T,"TraceValues",{enumerable:!0,get:function(){return be.TraceValues}});Object.defineProperty(T,"TraceFormat",{enumerable:!0,get:function(){return be.TraceFormat}});Object.defineProperty(T,"SetTraceNotification",{enumerable:!0,get:function(){return be.SetTraceNotification}});Object.defineProperty(T,"LogTraceNotification",{enumerable:!0,get:function(){return be.LogTraceNotification}});Object.defineProperty(T,"ConnectionErrors",{enumerable:!0,get:function(){return be.ConnectionErrors}});Object.defineProperty(T,"ConnectionError",{enumerable:!0,get:function(){return be.ConnectionError}});Object.defineProperty(T,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return be.CancellationReceiverStrategy}});Object.defineProperty(T,"CancellationSenderStrategy",{enumerable:!0,get:function(){return be.CancellationSenderStrategy}});Object.defineProperty(T,"CancellationStrategy",{enumerable:!0,get:function(){return be.CancellationStrategy}});Object.defineProperty(T,"MessageStrategy",{enumerable:!0,get:function(){return be.MessageStrategy}});var Jd=ct();T.RAL=Jd.default});var ea=x(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});var Zs=require("util"),tt=fr(),pr=class e extends tt.AbstractMessageBuffer{constructor(t="utf-8"){super(t)}emptyBuffer(){return e.emptyBuffer}fromString(t,n){return Buffer.from(t,n)}toString(t,n){return t instanceof Buffer?t.toString(n):new Zs.TextDecoder(n).decode(t)}asNative(t,n){return n===void 0?t instanceof Buffer?t:Buffer.from(t):t instanceof Buffer?t.slice(0,n):Buffer.from(t,0,n)}allocNative(t){return Buffer.allocUnsafe(t)}};pr.emptyBuffer=Buffer.allocUnsafe(0);var vo=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),tt.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),tt.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),tt.Disposable.create(()=>this.stream.off("end",t))}onData(t){return this.stream.on("data",t),tt.Disposable.create(()=>this.stream.off("data",t))}},To=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),tt.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),tt.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),tt.Disposable.create(()=>this.stream.off("end",t))}write(t,n){return new Promise((r,i)=>{let a=d=>{d==null?r():i(d)};typeof t=="string"?this.stream.write(t,n,a):this.stream.write(t,a)})}end(){this.stream.end()}},Ys=Object.freeze({messageBuffer:Object.freeze({create:e=>new pr(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new Zs.TextDecoder(t.charset).decode(e)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:e=>new vo(e),asWritableStream:e=>new To(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){let r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){let n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){let r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function _o(){return Ys}(function(e){function t(){tt.RAL.install(Ys)}e.install=t})(_o||(_o={}));Ro.default=_o});var kt=x(B=>{"use strict";var Ld=B&&B.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Wd=B&&B.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Ld(t,e,n)};Object.defineProperty(B,"__esModule",{value:!0});B.createMessageConnection=B.createServerSocketTransport=B.createClientSocketTransport=B.createServerPipeTransport=B.createClientPipeTransport=B.generateRandomPipeName=B.StreamMessageWriter=B.StreamMessageReader=B.SocketMessageWriter=B.SocketMessageReader=B.PortMessageWriter=B.PortMessageReader=B.IPCMessageWriter=B.IPCMessageReader=void 0;var Vt=ea();Vt.default.install();var ta=require("path"),Hd=require("os"),Ud=require("crypto"),gr=require("net"),Oe=fr();Wd(fr(),B);var Do=class extends Oe.AbstractMessageReader{constructor(t){super(),this.process=t;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(t){return this.process.on("message",t),Oe.Disposable.create(()=>this.process.off("message",t))}};B.IPCMessageReader=Do;var wo=class extends Oe.AbstractMessageWriter{constructor(t){super(),this.process=t,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(t){try{return typeof this.process.send=="function"&&this.process.send(t,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,t)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};B.IPCMessageWriter=wo;var So=class extends Oe.AbstractMessageReader{constructor(t){super(),this.onData=new Oe.Emitter,t.on("close",()=>this.fireClose),t.on("error",n=>this.fireError(n)),t.on("message",n=>{this.onData.fire(n)})}listen(t){return this.onData.event(t)}};B.PortMessageReader=So;var Po=class extends Oe.AbstractMessageWriter{constructor(t){super(),this.port=t,this.errorCount=0,t.on("close",()=>this.fireClose()),t.on("error",n=>this.fireError(n))}write(t){try{return this.port.postMessage(t),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};B.PortMessageWriter=Po;var Pt=class extends Oe.ReadableStreamMessageReader{constructor(t,n="utf-8"){super((0,Vt.default)().stream.asReadableStream(t),n)}};B.SocketMessageReader=Pt;var Ct=class extends Oe.WriteableStreamMessageWriter{constructor(t,n){super((0,Vt.default)().stream.asWritableStream(t),n),this.socket=t}dispose(){super.dispose(),this.socket.destroy()}};B.SocketMessageWriter=Ct;var hr=class extends Oe.ReadableStreamMessageReader{constructor(t,n){super((0,Vt.default)().stream.asReadableStream(t),n)}};B.StreamMessageReader=hr;var mr=class extends Oe.WriteableStreamMessageWriter{constructor(t,n){super((0,Vt.default)().stream.asWritableStream(t),n)}};B.StreamMessageWriter=mr;var na=process.env.XDG_RUNTIME_DIR,$d=new Map([["linux",107],["darwin",103]]);function Bd(){let e=(0,Ud.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;na?t=ta.join(na,`vscode-ipc-${e}.sock`):t=ta.join(Hd.tmpdir(),`vscode-${e}.sock`);let n=$d.get(process.platform);return n!==void 0&&t.length>n&&(0,Vt.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${n} characters.`),t}B.generateRandomPipeName=Bd;function zd(e,t="utf-8"){let n,r=new Promise((i,a)=>{n=i});return new Promise((i,a)=>{let d=(0,gr.createServer)(m=>{d.close(),n([new Pt(m,t),new Ct(m,t)])});d.on("error",a),d.listen(e,()=>{d.removeListener("error",a),i({onConnected:()=>r})})})}B.createClientPipeTransport=zd;function Vd(e,t="utf-8"){let n=(0,gr.createConnection)(e);return[new Pt(n,t),new Ct(n,t)]}B.createServerPipeTransport=Vd;function Gd(e,t="utf-8"){let n,r=new Promise((i,a)=>{n=i});return new Promise((i,a)=>{let d=(0,gr.createServer)(m=>{d.close(),n([new Pt(m,t),new Ct(m,t)])});d.on("error",a),d.listen(e,"127.0.0.1",()=>{d.removeListener("error",a),i({onConnected:()=>r})})})}B.createClientSocketTransport=Gd;function Xd(e,t="utf-8"){let n=(0,gr.createConnection)(e,"127.0.0.1");return[new Pt(n,t),new Ct(n,t)]}B.createServerSocketTransport=Xd;function Kd(e){let t=e;return t.read!==void 0&&t.addListener!==void 0}function Qd(e){let t=e;return t.write!==void 0&&t.addListener!==void 0}function Zd(e,t,n,r){n||(n=Oe.NullLogger);let i=Kd(e)?new hr(e):e,a=Qd(t)?new mr(t):t;return Oe.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Oe.createMessageConnection)(i,a,n,r)}B.createMessageConnection=Zd});var Co=x((ih,ra)=>{"use strict";ra.exports=kt()});var br=x((ia,yr)=>{(function(e){if(typeof yr=="object"&&typeof yr.exports=="object"){var t=e(require,ia);t!==void 0&&(yr.exports=t)}else typeof define=="function"&&define.amd&&define(["require","exports"],e)})(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.WorkspaceFolder=t.InlineCompletionContext=t.SelectedCompletionInfo=t.InlineCompletionTriggerKind=t.InlineCompletionList=t.InlineCompletionItem=t.StringValue=t.InlayHint=t.InlayHintLabelPart=t.InlayHintKind=t.InlineValueContext=t.InlineValueEvaluatableExpression=t.InlineValueVariableLookup=t.InlineValueText=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionTriggerKind=t.CodeActionKind=t.DocumentSymbol=t.WorkspaceSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.CompletionItemLabelDetails=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=t.URI=t.DocumentUri=void 0;var n;(function(s){function p(h){return typeof h=="string"}s.is=p})(n||(t.DocumentUri=n={}));var r;(function(s){function p(h){return typeof h=="string"}s.is=p})(r||(t.URI=r={}));var i;(function(s){s.MIN_VALUE=-2147483648,s.MAX_VALUE=2147483647;function p(h){return typeof h=="number"&&s.MIN_VALUE<=h&&h<=s.MAX_VALUE}s.is=p})(i||(t.integer=i={}));var a;(function(s){s.MIN_VALUE=0,s.MAX_VALUE=2147483647;function p(h){return typeof h=="number"&&s.MIN_VALUE<=h&&h<=s.MAX_VALUE}s.is=p})(a||(t.uinteger=a={}));var d;(function(s){function p(c,o){return c===Number.MAX_VALUE&&(c=a.MAX_VALUE),o===Number.MAX_VALUE&&(o=a.MAX_VALUE),{line:c,character:o}}s.create=p;function h(c){var o=c;return b.objectLiteral(o)&&b.uinteger(o.line)&&b.uinteger(o.character)}s.is=h})(d||(t.Position=d={}));var m;(function(s){function p(c,o,g,R){if(b.uinteger(c)&&b.uinteger(o)&&b.uinteger(g)&&b.uinteger(R))return{start:d.create(c,o),end:d.create(g,R)};if(d.is(c)&&d.is(o))return{start:c,end:o};throw new Error("Range#create called with invalid arguments[".concat(c,", ").concat(o,", ").concat(g,", ").concat(R,"]"))}s.create=p;function h(c){var o=c;return b.objectLiteral(o)&&d.is(o.start)&&d.is(o.end)}s.is=h})(m||(t.Range=m={}));var S;(function(s){function p(c,o){return{uri:c,range:o}}s.create=p;function h(c){var o=c;return b.objectLiteral(o)&&m.is(o.range)&&(b.string(o.uri)||b.undefined(o.uri))}s.is=h})(S||(t.Location=S={}));var D;(function(s){function p(c,o,g,R){return{targetUri:c,targetRange:o,targetSelectionRange:g,originSelectionRange:R}}s.create=p;function h(c){var o=c;return b.objectLiteral(o)&&m.is(o.targetRange)&&b.string(o.targetUri)&&m.is(o.targetSelectionRange)&&(m.is(o.originSelectionRange)||b.undefined(o.originSelectionRange))}s.is=h})(D||(t.LocationLink=D={}));var w;(function(s){function p(c,o,g,R){return{red:c,green:o,blue:g,alpha:R}}s.create=p;function h(c){var o=c;return b.objectLiteral(o)&&b.numberRange(o.red,0,1)&&b.numberRange(o.green,0,1)&&b.numberRange(o.blue,0,1)&&b.numberRange(o.alpha,0,1)}s.is=h})(w||(t.Color=w={}));var k;(function(s){function p(c,o){return{range:c,color:o}}s.create=p;function h(c){var o=c;return b.objectLiteral(o)&&m.is(o.range)&&w.is(o.color)}s.is=h})(k||(t.ColorInformation=k={}));var M;(function(s){function p(c,o,g){return{label:c,textEdit:o,additionalTextEdits:g}}s.create=p;function h(c){var o=c;return b.objectLiteral(o)&&b.string(o.label)&&(b.undefined(o.textEdit)||W.is(o))&&(b.undefined(o.additionalTextEdits)||b.typedArray(o.additionalTextEdits,W.is))}s.is=h})(M||(t.ColorPresentation=M={}));var A;(function(s){s.Comment="comment",s.Imports="imports",s.Region="region"})(A||(t.FoldingRangeKind=A={}));var ne;(function(s){function p(c,o,g,R,J,le){var ee={startLine:c,endLine:o};return b.defined(g)&&(ee.startCharacter=g),b.defined(R)&&(ee.endCharacter=R),b.defined(J)&&(ee.kind=J),b.defined(le)&&(ee.collapsedText=le),ee}s.create=p;function h(c){var o=c;return b.objectLiteral(o)&&b.uinteger(o.startLine)&&b.uinteger(o.startLine)&&(b.undefined(o.startCharacter)||b.uinteger(o.startCharacter))&&(b.undefined(o.endCharacter)||b.uinteger(o.endCharacter))&&(b.undefined(o.kind)||b.string(o.kind))}s.is=h})(ne||(t.FoldingRange=ne={}));var I;(function(s){function p(c,o){return{location:c,message:o}}s.create=p;function h(c){var o=c;return b.defined(o)&&S.is(o.location)&&b.string(o.message)}s.is=h})(I||(t.DiagnosticRelatedInformation=I={}));var K;(function(s){s.Error=1,s.Warning=2,s.Information=3,s.Hint=4})(K||(t.DiagnosticSeverity=K={}));var H;(function(s){s.Unnecessary=1,s.Deprecated=2})(H||(t.DiagnosticTag=H={}));var v;(function(s){function p(h){var c=h;return b.objectLiteral(c)&&b.string(c.href)}s.is=p})(v||(t.CodeDescription=v={}));var y;(function(s){function p(c,o,g,R,J,le){var ee={range:c,message:o};return b.defined(g)&&(ee.severity=g),b.defined(R)&&(ee.code=R),b.defined(J)&&(ee.source=J),b.defined(le)&&(ee.relatedInformation=le),ee}s.create=p;function h(c){var o,g=c;return b.defined(g)&&m.is(g.range)&&b.string(g.message)&&(b.number(g.severity)||b.undefined(g.severity))&&(b.integer(g.code)||b.string(g.code)||b.undefined(g.code))&&(b.undefined(g.codeDescription)||b.string((o=g.codeDescription)===null||o===void 0?void 0:o.href))&&(b.string(g.source)||b.undefined(g.source))&&(b.undefined(g.relatedInformation)||b.typedArray(g.relatedInformation,I.is))}s.is=h})(y||(t.Diagnostic=y={}));var C;(function(s){function p(c,o){for(var g=[],R=2;R<arguments.length;R++)g[R-2]=arguments[R];var J={title:c,command:o};return b.defined(g)&&g.length>0&&(J.arguments=g),J}s.create=p;function h(c){var o=c;return b.defined(o)&&b.string(o.title)&&b.string(o.command)}s.is=h})(C||(t.Command=C={}));var W;(function(s){function p(g,R){return{range:g,newText:R}}s.replace=p;function h(g,R){return{range:{start:g,end:g},newText:R}}s.insert=h;function c(g){return{range:g,newText:""}}s.del=c;function o(g){var R=g;return b.objectLiteral(R)&&b.string(R.newText)&&m.is(R.range)}s.is=o})(W||(t.TextEdit=W={}));var Y;(function(s){function p(c,o,g){var R={label:c};return o!==void 0&&(R.needsConfirmation=o),g!==void 0&&(R.description=g),R}s.create=p;function h(c){var o=c;return b.objectLiteral(o)&&b.string(o.label)&&(b.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(b.string(o.description)||o.description===void 0)}s.is=h})(Y||(t.ChangeAnnotation=Y={}));var ce;(function(s){function p(h){var c=h;return b.string(c)}s.is=p})(ce||(t.ChangeAnnotationIdentifier=ce={}));var Le;(function(s){function p(g,R,J){return{range:g,newText:R,annotationId:J}}s.replace=p;function h(g,R,J){return{range:{start:g,end:g},newText:R,annotationId:J}}s.insert=h;function c(g,R){return{range:g,newText:"",annotationId:R}}s.del=c;function o(g){var R=g;return W.is(R)&&(Y.is(R.annotationId)||ce.is(R.annotationId))}s.is=o})(Le||(t.AnnotatedTextEdit=Le={}));var _t;(function(s){function p(c,o){return{textDocument:c,edits:o}}s.create=p;function h(c){var o=c;return b.defined(o)&&Rt.is(o.textDocument)&&Array.isArray(o.edits)}s.is=h})(_t||(t.TextDocumentEdit=_t={}));var it;(function(s){function p(c,o,g){var R={kind:"create",uri:c};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(R.options=o),g!==void 0&&(R.annotationId=g),R}s.create=p;function h(c){var o=c;return o&&o.kind==="create"&&b.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||b.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||b.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||ce.is(o.annotationId))}s.is=h})(it||(t.CreateFile=it={}));var ot;(function(s){function p(c,o,g,R){var J={kind:"rename",oldUri:c,newUri:o};return g!==void 0&&(g.overwrite!==void 0||g.ignoreIfExists!==void 0)&&(J.options=g),R!==void 0&&(J.annotationId=R),J}s.create=p;function h(c){var o=c;return o&&o.kind==="rename"&&b.string(o.oldUri)&&b.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||b.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||b.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||ce.is(o.annotationId))}s.is=h})(ot||(t.RenameFile=ot={}));var we;(function(s){function p(c,o,g){var R={kind:"delete",uri:c};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(R.options=o),g!==void 0&&(R.annotationId=g),R}s.create=p;function h(c){var o=c;return o&&o.kind==="delete"&&b.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||b.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||b.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||ce.is(o.annotationId))}s.is=h})(we||(t.DeleteFile=we={}));var Mt;(function(s){function p(h){var c=h;return c&&(c.changes!==void 0||c.documentChanges!==void 0)&&(c.documentChanges===void 0||c.documentChanges.every(function(o){return b.string(o.kind)?it.is(o)||ot.is(o)||we.is(o):_t.is(o)}))}s.is=p})(Mt||(t.WorkspaceEdit=Mt={}));var Et=function(){function s(p,h){this.edits=p,this.changeAnnotations=h}return s.prototype.insert=function(p,h,c){var o,g;if(c===void 0?o=W.insert(p,h):ce.is(c)?(g=c,o=Le.insert(p,h,c)):(this.assertChangeAnnotations(this.changeAnnotations),g=this.changeAnnotations.manage(c),o=Le.insert(p,h,g)),this.edits.push(o),g!==void 0)return g},s.prototype.replace=function(p,h,c){var o,g;if(c===void 0?o=W.replace(p,h):ce.is(c)?(g=c,o=Le.replace(p,h,c)):(this.assertChangeAnnotations(this.changeAnnotations),g=this.changeAnnotations.manage(c),o=Le.replace(p,h,g)),this.edits.push(o),g!==void 0)return g},s.prototype.delete=function(p,h){var c,o;if(h===void 0?c=W.del(p):ce.is(h)?(o=h,c=Le.del(p,h)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(h),c=Le.del(p,o)),this.edits.push(c),o!==void 0)return o},s.prototype.add=function(p){this.edits.push(p)},s.prototype.all=function(){return this.edits},s.prototype.clear=function(){this.edits.splice(0,this.edits.length)},s.prototype.assertChangeAnnotations=function(p){if(p===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},s}(),On=function(){function s(p){this._annotations=p===void 0?Object.create(null):p,this._counter=0,this._size=0}return s.prototype.all=function(){return this._annotations},Object.defineProperty(s.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),s.prototype.manage=function(p,h){var c;if(ce.is(p)?c=p:(c=this.nextId(),h=p),this._annotations[c]!==void 0)throw new Error("Id ".concat(c," is already in use."));if(h===void 0)throw new Error("No annotation provided for id ".concat(c));return this._annotations[c]=h,this._size++,c},s.prototype.nextId=function(){return this._counter++,this._counter.toString()},s}(),mi=function(){function s(p){var h=this;this._textEditChanges=Object.create(null),p!==void 0?(this._workspaceEdit=p,p.documentChanges?(this._changeAnnotations=new On(p.changeAnnotations),p.changeAnnotations=this._changeAnnotations.all(),p.documentChanges.forEach(function(c){if(_t.is(c)){var o=new Et(c.edits,h._changeAnnotations);h._textEditChanges[c.textDocument.uri]=o}})):p.changes&&Object.keys(p.changes).forEach(function(c){var o=new Et(p.changes[c]);h._textEditChanges[c]=o})):this._workspaceEdit={}}return Object.defineProperty(s.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),s.prototype.getTextEditChange=function(p){if(Rt.is(p)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var h={uri:p.uri,version:p.version},c=this._textEditChanges[h.uri];if(!c){var o=[],g={textDocument:h,edits:o};this._workspaceEdit.documentChanges.push(g),c=new Et(o,this._changeAnnotations),this._textEditChanges[h.uri]=c}return c}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var c=this._textEditChanges[p];if(!c){var o=[];this._workspaceEdit.changes[p]=o,c=new Et(o),this._textEditChanges[p]=c}return c}},s.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new On,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},s.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},s.prototype.createFile=function(p,h,c){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Y.is(h)||ce.is(h)?o=h:c=h;var g,R;if(o===void 0?g=it.create(p,c):(R=ce.is(o)?o:this._changeAnnotations.manage(o),g=it.create(p,c,R)),this._workspaceEdit.documentChanges.push(g),R!==void 0)return R},s.prototype.renameFile=function(p,h,c,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var g;Y.is(c)||ce.is(c)?g=c:o=c;var R,J;if(g===void 0?R=ot.create(p,h,o):(J=ce.is(g)?g:this._changeAnnotations.manage(g),R=ot.create(p,h,o,J)),this._workspaceEdit.documentChanges.push(R),J!==void 0)return J},s.prototype.deleteFile=function(p,h,c){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Y.is(h)||ce.is(h)?o=h:c=h;var g,R;if(o===void 0?g=we.create(p,c):(R=ce.is(o)?o:this._changeAnnotations.manage(o),g=we.create(p,c,R)),this._workspaceEdit.documentChanges.push(g),R!==void 0)return R},s}();t.WorkspaceChange=mi;var Mn;(function(s){function p(c){return{uri:c}}s.create=p;function h(c){var o=c;return b.defined(o)&&b.string(o.uri)}s.is=h})(Mn||(t.TextDocumentIdentifier=Mn={}));var ln;(function(s){function p(c,o){return{uri:c,version:o}}s.create=p;function h(c){var o=c;return b.defined(o)&&b.string(o.uri)&&b.integer(o.version)}s.is=h})(ln||(t.VersionedTextDocumentIdentifier=ln={}));var Rt;(function(s){function p(c,o){return{uri:c,version:o}}s.create=p;function h(c){var o=c;return b.defined(o)&&b.string(o.uri)&&(o.version===null||b.integer(o.version))}s.is=h})(Rt||(t.OptionalVersionedTextDocumentIdentifier=Rt={}));var Qe;(function(s){function p(c,o,g,R){return{uri:c,languageId:o,version:g,text:R}}s.create=p;function h(c){var o=c;return b.defined(o)&&b.string(o.uri)&&b.string(o.languageId)&&b.integer(o.version)&&b.string(o.text)}s.is=h})(Qe||(t.TextDocumentItem=Qe={}));var jt;(function(s){s.PlainText="plaintext",s.Markdown="markdown";function p(h){var c=h;return c===s.PlainText||c===s.Markdown}s.is=p})(jt||(t.MarkupKind=jt={}));var Dt;(function(s){function p(h){var c=h;return b.objectLiteral(h)&&jt.is(c.kind)&&b.string(c.value)}s.is=p})(Dt||(t.MarkupContent=Dt={}));var En;(function(s){s.Text=1,s.Method=2,s.Function=3,s.Constructor=4,s.Field=5,s.Variable=6,s.Class=7,s.Interface=8,s.Module=9,s.Property=10,s.Unit=11,s.Value=12,s.Enum=13,s.Keyword=14,s.Snippet=15,s.Color=16,s.File=17,s.Reference=18,s.Folder=19,s.EnumMember=20,s.Constant=21,s.Struct=22,s.Event=23,s.Operator=24,s.TypeParameter=25})(En||(t.CompletionItemKind=En={}));var dn;(function(s){s.PlainText=1,s.Snippet=2})(dn||(t.InsertTextFormat=dn={}));var fn;(function(s){s.Deprecated=1})(fn||(t.CompletionItemTag=fn={}));var jn;(function(s){function p(c,o,g){return{newText:c,insert:o,replace:g}}s.create=p;function h(c){var o=c;return o&&b.string(o.newText)&&m.is(o.insert)&&m.is(o.replace)}s.is=h})(jn||(t.InsertReplaceEdit=jn={}));var An;(function(s){s.asIs=1,s.adjustIndentation=2})(An||(t.InsertTextMode=An={}));var In;(function(s){function p(h){var c=h;return c&&(b.string(c.detail)||c.detail===void 0)&&(b.string(c.description)||c.description===void 0)}s.is=p})(In||(t.CompletionItemLabelDetails=In={}));var Fn;(function(s){function p(h){return{label:h}}s.create=p})(Fn||(t.CompletionItem=Fn={}));var Jn;(function(s){function p(h,c){return{items:h||[],isIncomplete:!!c}}s.create=p})(Jn||(t.CompletionList=Jn={}));var At;(function(s){function p(c){return c.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s.fromPlainText=p;function h(c){var o=c;return b.string(o)||b.objectLiteral(o)&&b.string(o.language)&&b.string(o.value)}s.is=h})(At||(t.MarkedString=At={}));var We;(function(s){function p(h){var c=h;return!!c&&b.objectLiteral(c)&&(Dt.is(c.contents)||At.is(c.contents)||b.typedArray(c.contents,At.is))&&(h.range===void 0||m.is(h.range))}s.is=p})(We||(t.Hover=We={}));var Ln;(function(s){function p(h,c){return c?{label:h,documentation:c}:{label:h}}s.create=p})(Ln||(t.ParameterInformation=Ln={}));var Wn;(function(s){function p(h,c){for(var o=[],g=2;g<arguments.length;g++)o[g-2]=arguments[g];var R={label:h};return b.defined(c)&&(R.documentation=c),b.defined(o)?R.parameters=o:R.parameters=[],R}s.create=p})(Wn||(t.SignatureInformation=Wn={}));var wt;(function(s){s.Text=1,s.Read=2,s.Write=3})(wt||(t.DocumentHighlightKind=wt={}));var Hn;(function(s){function p(h,c){var o={range:h};return b.number(c)&&(o.kind=c),o}s.create=p})(Hn||(t.DocumentHighlight=Hn={}));var It;(function(s){s.File=1,s.Module=2,s.Namespace=3,s.Package=4,s.Class=5,s.Method=6,s.Property=7,s.Field=8,s.Constructor=9,s.Enum=10,s.Interface=11,s.Function=12,s.Variable=13,s.Constant=14,s.String=15,s.Number=16,s.Boolean=17,s.Array=18,s.Object=19,s.Key=20,s.Null=21,s.EnumMember=22,s.Struct=23,s.Event=24,s.Operator=25,s.TypeParameter=26})(It||(t.SymbolKind=It={}));var Un;(function(s){s.Deprecated=1})(Un||(t.SymbolTag=Un={}));var Ze;(function(s){function p(h,c,o,g,R){var J={name:h,kind:c,location:{uri:g,range:o}};return R&&(J.containerName=R),J}s.create=p})(Ze||(t.SymbolInformation=Ze={}));var st;(function(s){function p(h,c,o,g){return g!==void 0?{name:h,kind:c,location:{uri:o,range:g}}:{name:h,kind:c,location:{uri:o}}}s.create=p})(st||(t.WorkspaceSymbol=st={}));var $n;(function(s){function p(c,o,g,R,J,le){var ee={name:c,detail:o,kind:g,range:R,selectionRange:J};return le!==void 0&&(ee.children=le),ee}s.create=p;function h(c){var o=c;return o&&b.string(o.name)&&b.number(o.kind)&&m.is(o.range)&&m.is(o.selectionRange)&&(o.detail===void 0||b.string(o.detail))&&(o.deprecated===void 0||b.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}s.is=h})($n||(t.DocumentSymbol=$n={}));var Bn;(function(s){s.Empty="",s.QuickFix="quickfix",s.Refactor="refactor",s.RefactorExtract="refactor.extract",s.RefactorInline="refactor.inline",s.RefactorRewrite="refactor.rewrite",s.Source="source",s.SourceOrganizeImports="source.organizeImports",s.SourceFixAll="source.fixAll"})(Bn||(t.CodeActionKind=Bn={}));var Ve;(function(s){s.Invoked=1,s.Automatic=2})(Ve||(t.CodeActionTriggerKind=Ve={}));var pn;(function(s){function p(c,o,g){var R={diagnostics:c};return o!=null&&(R.only=o),g!=null&&(R.triggerKind=g),R}s.create=p;function h(c){var o=c;return b.defined(o)&&b.typedArray(o.diagnostics,y.is)&&(o.only===void 0||b.typedArray(o.only,b.string))&&(o.triggerKind===void 0||o.triggerKind===Ve.Invoked||o.triggerKind===Ve.Automatic)}s.is=h})(pn||(t.CodeActionContext=pn={}));var hn;(function(s){function p(c,o,g){var R={title:c},J=!0;return typeof o=="string"?(J=!1,R.kind=o):C.is(o)?R.command=o:R.edit=o,J&&g!==void 0&&(R.kind=g),R}s.create=p;function h(c){var o=c;return o&&b.string(o.title)&&(o.diagnostics===void 0||b.typedArray(o.diagnostics,y.is))&&(o.kind===void 0||b.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||C.is(o.command))&&(o.isPreferred===void 0||b.boolean(o.isPreferred))&&(o.edit===void 0||Mt.is(o.edit))}s.is=h})(hn||(t.CodeAction=hn={}));var Ft;(function(s){function p(c,o){var g={range:c};return b.defined(o)&&(g.data=o),g}s.create=p;function h(c){var o=c;return b.defined(o)&&m.is(o.range)&&(b.undefined(o.command)||C.is(o.command))}s.is=h})(Ft||(t.CodeLens=Ft={}));var mn;(function(s){function p(c,o){return{tabSize:c,insertSpaces:o}}s.create=p;function h(c){var o=c;return b.defined(o)&&b.uinteger(o.tabSize)&&b.boolean(o.insertSpaces)}s.is=h})(mn||(t.FormattingOptions=mn={}));var Ye;(function(s){function p(c,o,g){return{range:c,target:o,data:g}}s.create=p;function h(c){var o=c;return b.defined(o)&&m.is(o.range)&&(b.undefined(o.target)||b.string(o.target))}s.is=h})(Ye||(t.DocumentLink=Ye={}));var f;(function(s){function p(c,o){return{range:c,parent:o}}s.create=p;function h(c){var o=c;return b.objectLiteral(o)&&m.is(o.range)&&(o.parent===void 0||s.is(o.parent))}s.is=h})(f||(t.SelectionRange=f={}));var _;(function(s){s.namespace="namespace",s.type="type",s.class="class",s.enum="enum",s.interface="interface",s.struct="struct",s.typeParameter="typeParameter",s.parameter="parameter",s.variable="variable",s.property="property",s.enumMember="enumMember",s.event="event",s.function="function",s.method="method",s.macro="macro",s.keyword="keyword",s.modifier="modifier",s.comment="comment",s.string="string",s.number="number",s.regexp="regexp",s.operator="operator",s.decorator="decorator"})(_||(t.SemanticTokenTypes=_={}));var q;(function(s){s.declaration="declaration",s.definition="definition",s.readonly="readonly",s.static="static",s.deprecated="deprecated",s.abstract="abstract",s.async="async",s.modification="modification",s.documentation="documentation",s.defaultLibrary="defaultLibrary"})(q||(t.SemanticTokenModifiers=q={}));var O;(function(s){function p(h){var c=h;return b.objectLiteral(c)&&(c.resultId===void 0||typeof c.resultId=="string")&&Array.isArray(c.data)&&(c.data.length===0||typeof c.data[0]=="number")}s.is=p})(O||(t.SemanticTokens=O={}));var Q;(function(s){function p(c,o){return{range:c,text:o}}s.create=p;function h(c){var o=c;return o!=null&&m.is(o.range)&&b.string(o.text)}s.is=h})(Q||(t.InlineValueText=Q={}));var X;(function(s){function p(c,o,g){return{range:c,variableName:o,caseSensitiveLookup:g}}s.create=p;function h(c){var o=c;return o!=null&&m.is(o.range)&&b.boolean(o.caseSensitiveLookup)&&(b.string(o.variableName)||o.variableName===void 0)}s.is=h})(X||(t.InlineValueVariableLookup=X={}));var re;(function(s){function p(c,o){return{range:c,expression:o}}s.create=p;function h(c){var o=c;return o!=null&&m.is(o.range)&&(b.string(o.expression)||o.expression===void 0)}s.is=h})(re||(t.InlineValueEvaluatableExpression=re={}));var oe;(function(s){function p(c,o){return{frameId:c,stoppedLocation:o}}s.create=p;function h(c){var o=c;return b.defined(o)&&m.is(c.stoppedLocation)}s.is=h})(oe||(t.InlineValueContext=oe={}));var U;(function(s){s.Type=1,s.Parameter=2;function p(h){return h===1||h===2}s.is=p})(U||(t.InlayHintKind=U={}));var Z;(function(s){function p(c){return{value:c}}s.create=p;function h(c){var o=c;return b.objectLiteral(o)&&(o.tooltip===void 0||b.string(o.tooltip)||Dt.is(o.tooltip))&&(o.location===void 0||S.is(o.location))&&(o.command===void 0||C.is(o.command))}s.is=h})(Z||(t.InlayHintLabelPart=Z={}));var z;(function(s){function p(c,o,g){var R={position:c,label:o};return g!==void 0&&(R.kind=g),R}s.create=p;function h(c){var o=c;return b.objectLiteral(o)&&d.is(o.position)&&(b.string(o.label)||b.typedArray(o.label,Z.is))&&(o.kind===void 0||U.is(o.kind))&&o.textEdits===void 0||b.typedArray(o.textEdits,W.is)&&(o.tooltip===void 0||b.string(o.tooltip)||Dt.is(o.tooltip))&&(o.paddingLeft===void 0||b.boolean(o.paddingLeft))&&(o.paddingRight===void 0||b.boolean(o.paddingRight))}s.is=h})(z||(t.InlayHint=z={}));var ue;(function(s){function p(h){return{kind:"snippet",value:h}}s.createSnippet=p})(ue||(t.StringValue=ue={}));var ge;(function(s){function p(h,c,o,g){return{insertText:h,filterText:c,range:o,command:g}}s.create=p})(ge||(t.InlineCompletionItem=ge={}));var Ne;(function(s){function p(h){return{items:h}}s.create=p})(Ne||(t.InlineCompletionList=Ne={}));var zn;(function(s){s.Invoked=0,s.Automatic=1})(zn||(t.InlineCompletionTriggerKind=zn={}));var vs;(function(s){function p(h,c){return{range:h,text:c}}s.create=p})(vs||(t.SelectedCompletionInfo=vs={}));var Ts;(function(s){function p(h,c){return{triggerKind:h,selectedCompletionInfo:c}}s.create=p})(Ts||(t.InlineCompletionContext=Ts={}));var _s;(function(s){function p(h){var c=h;return b.objectLiteral(c)&&r.is(c.uri)&&b.string(c.name)}s.is=p})(_s||(t.WorkspaceFolder=_s={})),t.EOL=[`
`,`\r
`,"\r"];var Rs;(function(s){function p(g,R,J,le){return new sd(g,R,J,le)}s.create=p;function h(g){var R=g;return!!(b.defined(R)&&b.string(R.uri)&&(b.undefined(R.languageId)||b.string(R.languageId))&&b.uinteger(R.lineCount)&&b.func(R.getText)&&b.func(R.positionAt)&&b.func(R.offsetAt))}s.is=h;function c(g,R){for(var J=g.getText(),le=o(R,function(Jt,Vn){var Ds=Jt.range.start.line-Vn.range.start.line;return Ds===0?Jt.range.start.character-Vn.range.start.character:Ds}),ee=J.length,He=le.length-1;He>=0;He--){var Ue=le[He],et=g.offsetAt(Ue.range.start),$=g.offsetAt(Ue.range.end);if($<=ee)J=J.substring(0,et)+Ue.newText+J.substring($,J.length);else throw new Error("Overlapping edit");ee=et}return J}s.applyEdits=c;function o(g,R){if(g.length<=1)return g;var J=g.length/2|0,le=g.slice(0,J),ee=g.slice(J);o(le,R),o(ee,R);for(var He=0,Ue=0,et=0;He<le.length&&Ue<ee.length;){var $=R(le[He],ee[Ue]);$<=0?g[et++]=le[He++]:g[et++]=ee[Ue++]}for(;He<le.length;)g[et++]=le[He++];for(;Ue<ee.length;)g[et++]=ee[Ue++];return g}})(Rs||(t.TextDocument=Rs={}));var sd=function(){function s(p,h,c,o){this._uri=p,this._languageId=h,this._version=c,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(s.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),s.prototype.getText=function(p){if(p){var h=this.offsetAt(p.start),c=this.offsetAt(p.end);return this._content.substring(h,c)}return this._content},s.prototype.update=function(p,h){this._content=p.text,this._version=h,this._lineOffsets=void 0},s.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var p=[],h=this._content,c=!0,o=0;o<h.length;o++){c&&(p.push(o),c=!1);var g=h.charAt(o);c=g==="\r"||g===`
`,g==="\r"&&o+1<h.length&&h.charAt(o+1)===`
`&&o++}c&&h.length>0&&p.push(h.length),this._lineOffsets=p}return this._lineOffsets},s.prototype.positionAt=function(p){p=Math.max(Math.min(p,this._content.length),0);var h=this.getLineOffsets(),c=0,o=h.length;if(o===0)return d.create(0,p);for(;c<o;){var g=Math.floor((c+o)/2);h[g]>p?o=g:c=g+1}var R=c-1;return d.create(R,p-h[R])},s.prototype.offsetAt=function(p){var h=this.getLineOffsets();if(p.line>=h.length)return this._content.length;if(p.line<0)return 0;var c=h[p.line],o=p.line+1<h.length?h[p.line+1]:this._content.length;return Math.max(Math.min(c+p.character,o),c)},Object.defineProperty(s.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),s}(),b;(function(s){var p=Object.prototype.toString;function h($){return typeof $<"u"}s.defined=h;function c($){return typeof $>"u"}s.undefined=c;function o($){return $===!0||$===!1}s.boolean=o;function g($){return p.call($)==="[object String]"}s.string=g;function R($){return p.call($)==="[object Number]"}s.number=R;function J($,Jt,Vn){return p.call($)==="[object Number]"&&Jt<=$&&$<=Vn}s.numberRange=J;function le($){return p.call($)==="[object Number]"&&-2147483648<=$&&$<=2147483647}s.integer=le;function ee($){return p.call($)==="[object Number]"&&0<=$&&$<=2147483647}s.uinteger=ee;function He($){return p.call($)==="[object Function]"}s.func=He;function Ue($){return $!==null&&typeof $=="object"}s.objectLiteral=Ue;function et($,Jt){return Array.isArray($)&&$.every(Jt)}s.typedArray=et})(b||(b={}))})});var se=x(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.ProtocolNotificationType=Pe.ProtocolNotificationType0=Pe.ProtocolRequestType=Pe.ProtocolRequestType0=Pe.RegistrationType=Pe.MessageDirection=void 0;var Gt=kt(),oa;(function(e){e.clientToServer="clientToServer",e.serverToClient="serverToClient",e.both="both"})(oa||(Pe.MessageDirection=oa={}));var ko=class{constructor(t){this.method=t}};Pe.RegistrationType=ko;var qo=class extends Gt.RequestType0{constructor(t){super(t)}};Pe.ProtocolRequestType0=qo;var No=class extends Gt.RequestType{constructor(t){super(t,Gt.ParameterStructures.byName)}};Pe.ProtocolRequestType=No;var xo=class extends Gt.NotificationType0{constructor(t){super(t)}};Pe.ProtocolNotificationType0=xo;var Oo=class extends Gt.NotificationType{constructor(t){super(t,Gt.ParameterStructures.byName)}};Pe.ProtocolNotificationType=Oo});var vr=x(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.objectLiteral=he.typedArray=he.stringArray=he.array=he.func=he.error=he.number=he.string=he.boolean=void 0;function Yd(e){return e===!0||e===!1}he.boolean=Yd;function sa(e){return typeof e=="string"||e instanceof String}he.string=sa;function ef(e){return typeof e=="number"||e instanceof Number}he.number=ef;function tf(e){return e instanceof Error}he.error=tf;function nf(e){return typeof e=="function"}he.func=nf;function aa(e){return Array.isArray(e)}he.array=aa;function rf(e){return aa(e)&&e.every(t=>sa(t))}he.stringArray=rf;function of(e,t){return Array.isArray(e)&&e.every(t)}he.typedArray=of;function sf(e){return e!==null&&typeof e=="object"}he.objectLiteral=sf});var la=x(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.ImplementationRequest=void 0;var ca=se(),ua;(function(e){e.method="textDocument/implementation",e.messageDirection=ca.MessageDirection.clientToServer,e.type=new ca.ProtocolRequestType(e.method)})(ua||(Tr.ImplementationRequest=ua={}))});var pa=x(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.TypeDefinitionRequest=void 0;var da=se(),fa;(function(e){e.method="textDocument/typeDefinition",e.messageDirection=da.MessageDirection.clientToServer,e.type=new da.ProtocolRequestType(e.method)})(fa||(_r.TypeDefinitionRequest=fa={}))});var ga=x(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.DidChangeWorkspaceFoldersNotification=Xt.WorkspaceFoldersRequest=void 0;var Rr=se(),ha;(function(e){e.method="workspace/workspaceFolders",e.messageDirection=Rr.MessageDirection.serverToClient,e.type=new Rr.ProtocolRequestType0(e.method)})(ha||(Xt.WorkspaceFoldersRequest=ha={}));var ma;(function(e){e.method="workspace/didChangeWorkspaceFolders",e.messageDirection=Rr.MessageDirection.clientToServer,e.type=new Rr.ProtocolNotificationType(e.method)})(ma||(Xt.DidChangeWorkspaceFoldersNotification=ma={}))});var va=x(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.ConfigurationRequest=void 0;var ya=se(),ba;(function(e){e.method="workspace/configuration",e.messageDirection=ya.MessageDirection.serverToClient,e.type=new ya.ProtocolRequestType(e.method)})(ba||(Dr.ConfigurationRequest=ba={}))});var Ra=x(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.ColorPresentationRequest=Kt.DocumentColorRequest=void 0;var wr=se(),Ta;(function(e){e.method="textDocument/documentColor",e.messageDirection=wr.MessageDirection.clientToServer,e.type=new wr.ProtocolRequestType(e.method)})(Ta||(Kt.DocumentColorRequest=Ta={}));var _a;(function(e){e.method="textDocument/colorPresentation",e.messageDirection=wr.MessageDirection.clientToServer,e.type=new wr.ProtocolRequestType(e.method)})(_a||(Kt.ColorPresentationRequest=_a={}))});var Sa=x(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.FoldingRangeRefreshRequest=Qt.FoldingRangeRequest=void 0;var Sr=se(),Da;(function(e){e.method="textDocument/foldingRange",e.messageDirection=Sr.MessageDirection.clientToServer,e.type=new Sr.ProtocolRequestType(e.method)})(Da||(Qt.FoldingRangeRequest=Da={}));var wa;(function(e){e.method="workspace/foldingRange/refresh",e.messageDirection=Sr.MessageDirection.serverToClient,e.type=new Sr.ProtocolRequestType0(e.method)})(wa||(Qt.FoldingRangeRefreshRequest=wa={}))});var ka=x(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.DeclarationRequest=void 0;var Pa=se(),Ca;(function(e){e.method="textDocument/declaration",e.messageDirection=Pa.MessageDirection.clientToServer,e.type=new Pa.ProtocolRequestType(e.method)})(Ca||(Pr.DeclarationRequest=Ca={}))});var xa=x(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.SelectionRangeRequest=void 0;var qa=se(),Na;(function(e){e.method="textDocument/selectionRange",e.messageDirection=qa.MessageDirection.clientToServer,e.type=new qa.ProtocolRequestType(e.method)})(Na||(Cr.SelectionRangeRequest=Na={}))});var ja=x(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.WorkDoneProgressCancelNotification=dt.WorkDoneProgressCreateRequest=dt.WorkDoneProgress=void 0;var af=kt(),kr=se(),Oa;(function(e){e.type=new af.ProgressType;function t(n){return n===e.type}e.is=t})(Oa||(dt.WorkDoneProgress=Oa={}));var Ma;(function(e){e.method="window/workDoneProgress/create",e.messageDirection=kr.MessageDirection.serverToClient,e.type=new kr.ProtocolRequestType(e.method)})(Ma||(dt.WorkDoneProgressCreateRequest=Ma={}));var Ea;(function(e){e.method="window/workDoneProgress/cancel",e.messageDirection=kr.MessageDirection.clientToServer,e.type=new kr.ProtocolNotificationType(e.method)})(Ea||(dt.WorkDoneProgressCancelNotification=Ea={}))});var Ja=x(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.CallHierarchyOutgoingCallsRequest=ft.CallHierarchyIncomingCallsRequest=ft.CallHierarchyPrepareRequest=void 0;var Zt=se(),Aa;(function(e){e.method="textDocument/prepareCallHierarchy",e.messageDirection=Zt.MessageDirection.clientToServer,e.type=new Zt.ProtocolRequestType(e.method)})(Aa||(ft.CallHierarchyPrepareRequest=Aa={}));var Ia;(function(e){e.method="callHierarchy/incomingCalls",e.messageDirection=Zt.MessageDirection.clientToServer,e.type=new Zt.ProtocolRequestType(e.method)})(Ia||(ft.CallHierarchyIncomingCallsRequest=Ia={}));var Fa;(function(e){e.method="callHierarchy/outgoingCalls",e.messageDirection=Zt.MessageDirection.clientToServer,e.type=new Zt.ProtocolRequestType(e.method)})(Fa||(ft.CallHierarchyOutgoingCallsRequest=Fa={}))});var Ba=x(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.SemanticTokensRefreshRequest=Ce.SemanticTokensRangeRequest=Ce.SemanticTokensDeltaRequest=Ce.SemanticTokensRequest=Ce.SemanticTokensRegistrationType=Ce.TokenFormat=void 0;var nt=se(),La;(function(e){e.Relative="relative"})(La||(Ce.TokenFormat=La={}));var Rn;(function(e){e.method="textDocument/semanticTokens",e.type=new nt.RegistrationType(e.method)})(Rn||(Ce.SemanticTokensRegistrationType=Rn={}));var Wa;(function(e){e.method="textDocument/semanticTokens/full",e.messageDirection=nt.MessageDirection.clientToServer,e.type=new nt.ProtocolRequestType(e.method),e.registrationMethod=Rn.method})(Wa||(Ce.SemanticTokensRequest=Wa={}));var Ha;(function(e){e.method="textDocument/semanticTokens/full/delta",e.messageDirection=nt.MessageDirection.clientToServer,e.type=new nt.ProtocolRequestType(e.method),e.registrationMethod=Rn.method})(Ha||(Ce.SemanticTokensDeltaRequest=Ha={}));var Ua;(function(e){e.method="textDocument/semanticTokens/range",e.messageDirection=nt.MessageDirection.clientToServer,e.type=new nt.ProtocolRequestType(e.method),e.registrationMethod=Rn.method})(Ua||(Ce.SemanticTokensRangeRequest=Ua={}));var $a;(function(e){e.method="workspace/semanticTokens/refresh",e.messageDirection=nt.MessageDirection.serverToClient,e.type=new nt.ProtocolRequestType0(e.method)})($a||(Ce.SemanticTokensRefreshRequest=$a={}))});var Ga=x(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.ShowDocumentRequest=void 0;var za=se(),Va;(function(e){e.method="window/showDocument",e.messageDirection=za.MessageDirection.serverToClient,e.type=new za.ProtocolRequestType(e.method)})(Va||(qr.ShowDocumentRequest=Va={}))});var Qa=x(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.LinkedEditingRangeRequest=void 0;var Xa=se(),Ka;(function(e){e.method="textDocument/linkedEditingRange",e.messageDirection=Xa.MessageDirection.clientToServer,e.type=new Xa.ProtocolRequestType(e.method)})(Ka||(Nr.LinkedEditingRangeRequest=Ka={}))});var oc=x(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.WillDeleteFilesRequest=_e.DidDeleteFilesNotification=_e.DidRenameFilesNotification=_e.WillRenameFilesRequest=_e.DidCreateFilesNotification=_e.WillCreateFilesRequest=_e.FileOperationPatternKind=void 0;var Me=se(),Za;(function(e){e.file="file",e.folder="folder"})(Za||(_e.FileOperationPatternKind=Za={}));var Ya;(function(e){e.method="workspace/willCreateFiles",e.messageDirection=Me.MessageDirection.clientToServer,e.type=new Me.ProtocolRequestType(e.method)})(Ya||(_e.WillCreateFilesRequest=Ya={}));var ec;(function(e){e.method="workspace/didCreateFiles",e.messageDirection=Me.MessageDirection.clientToServer,e.type=new Me.ProtocolNotificationType(e.method)})(ec||(_e.DidCreateFilesNotification=ec={}));var tc;(function(e){e.method="workspace/willRenameFiles",e.messageDirection=Me.MessageDirection.clientToServer,e.type=new Me.ProtocolRequestType(e.method)})(tc||(_e.WillRenameFilesRequest=tc={}));var nc;(function(e){e.method="workspace/didRenameFiles",e.messageDirection=Me.MessageDirection.clientToServer,e.type=new Me.ProtocolNotificationType(e.method)})(nc||(_e.DidRenameFilesNotification=nc={}));var rc;(function(e){e.method="workspace/didDeleteFiles",e.messageDirection=Me.MessageDirection.clientToServer,e.type=new Me.ProtocolNotificationType(e.method)})(rc||(_e.DidDeleteFilesNotification=rc={}));var ic;(function(e){e.method="workspace/willDeleteFiles",e.messageDirection=Me.MessageDirection.clientToServer,e.type=new Me.ProtocolRequestType(e.method)})(ic||(_e.WillDeleteFilesRequest=ic={}))});var lc=x(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.MonikerRequest=pt.MonikerKind=pt.UniquenessLevel=void 0;var sc=se(),ac;(function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global"})(ac||(pt.UniquenessLevel=ac={}));var cc;(function(e){e.$import="import",e.$export="export",e.local="local"})(cc||(pt.MonikerKind=cc={}));var uc;(function(e){e.method="textDocument/moniker",e.messageDirection=sc.MessageDirection.clientToServer,e.type=new sc.ProtocolRequestType(e.method)})(uc||(pt.MonikerRequest=uc={}))});var hc=x(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.TypeHierarchySubtypesRequest=ht.TypeHierarchySupertypesRequest=ht.TypeHierarchyPrepareRequest=void 0;var Yt=se(),dc;(function(e){e.method="textDocument/prepareTypeHierarchy",e.messageDirection=Yt.MessageDirection.clientToServer,e.type=new Yt.ProtocolRequestType(e.method)})(dc||(ht.TypeHierarchyPrepareRequest=dc={}));var fc;(function(e){e.method="typeHierarchy/supertypes",e.messageDirection=Yt.MessageDirection.clientToServer,e.type=new Yt.ProtocolRequestType(e.method)})(fc||(ht.TypeHierarchySupertypesRequest=fc={}));var pc;(function(e){e.method="typeHierarchy/subtypes",e.messageDirection=Yt.MessageDirection.clientToServer,e.type=new Yt.ProtocolRequestType(e.method)})(pc||(ht.TypeHierarchySubtypesRequest=pc={}))});var yc=x(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.InlineValueRefreshRequest=en.InlineValueRequest=void 0;var xr=se(),mc;(function(e){e.method="textDocument/inlineValue",e.messageDirection=xr.MessageDirection.clientToServer,e.type=new xr.ProtocolRequestType(e.method)})(mc||(en.InlineValueRequest=mc={}));var gc;(function(e){e.method="workspace/inlineValue/refresh",e.messageDirection=xr.MessageDirection.serverToClient,e.type=new xr.ProtocolRequestType0(e.method)})(gc||(en.InlineValueRefreshRequest=gc={}))});var _c=x(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.InlayHintRefreshRequest=mt.InlayHintResolveRequest=mt.InlayHintRequest=void 0;var tn=se(),bc;(function(e){e.method="textDocument/inlayHint",e.messageDirection=tn.MessageDirection.clientToServer,e.type=new tn.ProtocolRequestType(e.method)})(bc||(mt.InlayHintRequest=bc={}));var vc;(function(e){e.method="inlayHint/resolve",e.messageDirection=tn.MessageDirection.clientToServer,e.type=new tn.ProtocolRequestType(e.method)})(vc||(mt.InlayHintResolveRequest=vc={}));var Tc;(function(e){e.method="workspace/inlayHint/refresh",e.messageDirection=tn.MessageDirection.serverToClient,e.type=new tn.ProtocolRequestType0(e.method)})(Tc||(mt.InlayHintRefreshRequest=Tc={}))});var kc=x(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.DiagnosticRefreshRequest=Ee.WorkspaceDiagnosticRequest=Ee.DocumentDiagnosticRequest=Ee.DocumentDiagnosticReportKind=Ee.DiagnosticServerCancellationData=void 0;var Cc=kt(),cf=vr(),nn=se(),Rc;(function(e){function t(n){let r=n;return r&&cf.boolean(r.retriggerRequest)}e.is=t})(Rc||(Ee.DiagnosticServerCancellationData=Rc={}));var Dc;(function(e){e.Full="full",e.Unchanged="unchanged"})(Dc||(Ee.DocumentDiagnosticReportKind=Dc={}));var wc;(function(e){e.method="textDocument/diagnostic",e.messageDirection=nn.MessageDirection.clientToServer,e.type=new nn.ProtocolRequestType(e.method),e.partialResult=new Cc.ProgressType})(wc||(Ee.DocumentDiagnosticRequest=wc={}));var Sc;(function(e){e.method="workspace/diagnostic",e.messageDirection=nn.MessageDirection.clientToServer,e.type=new nn.ProtocolRequestType(e.method),e.partialResult=new Cc.ProgressType})(Sc||(Ee.WorkspaceDiagnosticRequest=Sc={}));var Pc;(function(e){e.method="workspace/diagnostic/refresh",e.messageDirection=nn.MessageDirection.serverToClient,e.type=new nn.ProtocolRequestType0(e.method)})(Pc||(Ee.DiagnosticRefreshRequest=Pc={}))});var jc=x(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.DidCloseNotebookDocumentNotification=de.DidSaveNotebookDocumentNotification=de.DidChangeNotebookDocumentNotification=de.NotebookCellArrayChange=de.DidOpenNotebookDocumentNotification=de.NotebookDocumentSyncRegistrationType=de.NotebookDocument=de.NotebookCell=de.ExecutionSummary=de.NotebookCellKind=void 0;var Dn=br(),Be=vr(),Ge=se(),Mo;(function(e){e.Markup=1,e.Code=2;function t(n){return n===1||n===2}e.is=t})(Mo||(de.NotebookCellKind=Mo={}));var Eo;(function(e){function t(i,a){let d={executionOrder:i};return(a===!0||a===!1)&&(d.success=a),d}e.create=t;function n(i){let a=i;return Be.objectLiteral(a)&&Dn.uinteger.is(a.executionOrder)&&(a.success===void 0||Be.boolean(a.success))}e.is=n;function r(i,a){return i===a?!0:i==null||a===null||a===void 0?!1:i.executionOrder===a.executionOrder&&i.success===a.success}e.equals=r})(Eo||(de.ExecutionSummary=Eo={}));var Or;(function(e){function t(a,d){return{kind:a,document:d}}e.create=t;function n(a){let d=a;return Be.objectLiteral(d)&&Mo.is(d.kind)&&Dn.DocumentUri.is(d.document)&&(d.metadata===void 0||Be.objectLiteral(d.metadata))}e.is=n;function r(a,d){let m=new Set;return a.document!==d.document&&m.add("document"),a.kind!==d.kind&&m.add("kind"),a.executionSummary!==d.executionSummary&&m.add("executionSummary"),(a.metadata!==void 0||d.metadata!==void 0)&&!i(a.metadata,d.metadata)&&m.add("metadata"),(a.executionSummary!==void 0||d.executionSummary!==void 0)&&!Eo.equals(a.executionSummary,d.executionSummary)&&m.add("executionSummary"),m}e.diff=r;function i(a,d){if(a===d)return!0;if(a==null||d===null||d===void 0||typeof a!=typeof d||typeof a!="object")return!1;let m=Array.isArray(a),S=Array.isArray(d);if(m!==S)return!1;if(m&&S){if(a.length!==d.length)return!1;for(let D=0;D<a.length;D++)if(!i(a[D],d[D]))return!1}if(Be.objectLiteral(a)&&Be.objectLiteral(d)){let D=Object.keys(a),w=Object.keys(d);if(D.length!==w.length||(D.sort(),w.sort(),!i(D,w)))return!1;for(let k=0;k<D.length;k++){let M=D[k];if(!i(a[M],d[M]))return!1}}return!0}})(Or||(de.NotebookCell=Or={}));var qc;(function(e){function t(r,i,a,d){return{uri:r,notebookType:i,version:a,cells:d}}e.create=t;function n(r){let i=r;return Be.objectLiteral(i)&&Be.string(i.uri)&&Dn.integer.is(i.version)&&Be.typedArray(i.cells,Or.is)}e.is=n})(qc||(de.NotebookDocument=qc={}));var rn;(function(e){e.method="notebookDocument/sync",e.messageDirection=Ge.MessageDirection.clientToServer,e.type=new Ge.RegistrationType(e.method)})(rn||(de.NotebookDocumentSyncRegistrationType=rn={}));var Nc;(function(e){e.method="notebookDocument/didOpen",e.messageDirection=Ge.MessageDirection.clientToServer,e.type=new Ge.ProtocolNotificationType(e.method),e.registrationMethod=rn.method})(Nc||(de.DidOpenNotebookDocumentNotification=Nc={}));var xc;(function(e){function t(r){let i=r;return Be.objectLiteral(i)&&Dn.uinteger.is(i.start)&&Dn.uinteger.is(i.deleteCount)&&(i.cells===void 0||Be.typedArray(i.cells,Or.is))}e.is=t;function n(r,i,a){let d={start:r,deleteCount:i};return a!==void 0&&(d.cells=a),d}e.create=n})(xc||(de.NotebookCellArrayChange=xc={}));var Oc;(function(e){e.method="notebookDocument/didChange",e.messageDirection=Ge.MessageDirection.clientToServer,e.type=new Ge.ProtocolNotificationType(e.method),e.registrationMethod=rn.method})(Oc||(de.DidChangeNotebookDocumentNotification=Oc={}));var Mc;(function(e){e.method="notebookDocument/didSave",e.messageDirection=Ge.MessageDirection.clientToServer,e.type=new Ge.ProtocolNotificationType(e.method),e.registrationMethod=rn.method})(Mc||(de.DidSaveNotebookDocumentNotification=Mc={}));var Ec;(function(e){e.method="notebookDocument/didClose",e.messageDirection=Ge.MessageDirection.clientToServer,e.type=new Ge.ProtocolNotificationType(e.method),e.registrationMethod=rn.method})(Ec||(de.DidCloseNotebookDocumentNotification=Ec={}))});var Fc=x(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.InlineCompletionRequest=void 0;var Ac=se(),Ic;(function(e){e.method="textDocument/inlineCompletion",e.messageDirection=Ac.MessageDirection.clientToServer,e.type=new Ac.ProtocolRequestType(e.method)})(Ic||(Mr.InlineCompletionRequest=Ic={}))});var Qu=x(l=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});l.WorkspaceSymbolRequest=l.CodeActionResolveRequest=l.CodeActionRequest=l.DocumentSymbolRequest=l.DocumentHighlightRequest=l.ReferencesRequest=l.DefinitionRequest=l.SignatureHelpRequest=l.SignatureHelpTriggerKind=l.HoverRequest=l.CompletionResolveRequest=l.CompletionRequest=l.CompletionTriggerKind=l.PublishDiagnosticsNotification=l.WatchKind=l.RelativePattern=l.FileChangeType=l.DidChangeWatchedFilesNotification=l.WillSaveTextDocumentWaitUntilRequest=l.WillSaveTextDocumentNotification=l.TextDocumentSaveReason=l.DidSaveTextDocumentNotification=l.DidCloseTextDocumentNotification=l.DidChangeTextDocumentNotification=l.TextDocumentContentChangeEvent=l.DidOpenTextDocumentNotification=l.TextDocumentSyncKind=l.TelemetryEventNotification=l.LogMessageNotification=l.ShowMessageRequest=l.ShowMessageNotification=l.MessageType=l.DidChangeConfigurationNotification=l.ExitNotification=l.ShutdownRequest=l.InitializedNotification=l.InitializeErrorCodes=l.InitializeRequest=l.WorkDoneProgressOptions=l.TextDocumentRegistrationOptions=l.StaticRegistrationOptions=l.PositionEncodingKind=l.FailureHandlingKind=l.ResourceOperationKind=l.UnregistrationRequest=l.RegistrationRequest=l.DocumentSelector=l.NotebookCellTextDocumentFilter=l.NotebookDocumentFilter=l.TextDocumentFilter=void 0;l.MonikerRequest=l.MonikerKind=l.UniquenessLevel=l.WillDeleteFilesRequest=l.DidDeleteFilesNotification=l.WillRenameFilesRequest=l.DidRenameFilesNotification=l.WillCreateFilesRequest=l.DidCreateFilesNotification=l.FileOperationPatternKind=l.LinkedEditingRangeRequest=l.ShowDocumentRequest=l.SemanticTokensRegistrationType=l.SemanticTokensRefreshRequest=l.SemanticTokensRangeRequest=l.SemanticTokensDeltaRequest=l.SemanticTokensRequest=l.TokenFormat=l.CallHierarchyPrepareRequest=l.CallHierarchyOutgoingCallsRequest=l.CallHierarchyIncomingCallsRequest=l.WorkDoneProgressCancelNotification=l.WorkDoneProgressCreateRequest=l.WorkDoneProgress=l.SelectionRangeRequest=l.DeclarationRequest=l.FoldingRangeRefreshRequest=l.FoldingRangeRequest=l.ColorPresentationRequest=l.DocumentColorRequest=l.ConfigurationRequest=l.DidChangeWorkspaceFoldersNotification=l.WorkspaceFoldersRequest=l.TypeDefinitionRequest=l.ImplementationRequest=l.ApplyWorkspaceEditRequest=l.ExecuteCommandRequest=l.PrepareRenameRequest=l.RenameRequest=l.PrepareSupportDefaultBehavior=l.DocumentOnTypeFormattingRequest=l.DocumentRangesFormattingRequest=l.DocumentRangeFormattingRequest=l.DocumentFormattingRequest=l.DocumentLinkResolveRequest=l.DocumentLinkRequest=l.CodeLensRefreshRequest=l.CodeLensResolveRequest=l.CodeLensRequest=l.WorkspaceSymbolResolveRequest=void 0;l.InlineCompletionRequest=l.DidCloseNotebookDocumentNotification=l.DidSaveNotebookDocumentNotification=l.DidChangeNotebookDocumentNotification=l.NotebookCellArrayChange=l.DidOpenNotebookDocumentNotification=l.NotebookDocumentSyncRegistrationType=l.NotebookDocument=l.NotebookCell=l.ExecutionSummary=l.NotebookCellKind=l.DiagnosticRefreshRequest=l.WorkspaceDiagnosticRequest=l.DocumentDiagnosticRequest=l.DocumentDiagnosticReportKind=l.DiagnosticServerCancellationData=l.InlayHintRefreshRequest=l.InlayHintResolveRequest=l.InlayHintRequest=l.InlineValueRefreshRequest=l.InlineValueRequest=l.TypeHierarchySupertypesRequest=l.TypeHierarchySubtypesRequest=l.TypeHierarchyPrepareRequest=void 0;var P=se(),Jc=br(),ye=vr(),uf=la();Object.defineProperty(l,"ImplementationRequest",{enumerable:!0,get:function(){return uf.ImplementationRequest}});var lf=pa();Object.defineProperty(l,"TypeDefinitionRequest",{enumerable:!0,get:function(){return lf.TypeDefinitionRequest}});var Vu=ga();Object.defineProperty(l,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Vu.WorkspaceFoldersRequest}});Object.defineProperty(l,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Vu.DidChangeWorkspaceFoldersNotification}});var df=va();Object.defineProperty(l,"ConfigurationRequest",{enumerable:!0,get:function(){return df.ConfigurationRequest}});var Gu=Ra();Object.defineProperty(l,"DocumentColorRequest",{enumerable:!0,get:function(){return Gu.DocumentColorRequest}});Object.defineProperty(l,"ColorPresentationRequest",{enumerable:!0,get:function(){return Gu.ColorPresentationRequest}});var Xu=Sa();Object.defineProperty(l,"FoldingRangeRequest",{enumerable:!0,get:function(){return Xu.FoldingRangeRequest}});Object.defineProperty(l,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return Xu.FoldingRangeRefreshRequest}});var ff=ka();Object.defineProperty(l,"DeclarationRequest",{enumerable:!0,get:function(){return ff.DeclarationRequest}});var pf=xa();Object.defineProperty(l,"SelectionRangeRequest",{enumerable:!0,get:function(){return pf.SelectionRangeRequest}});var Jo=ja();Object.defineProperty(l,"WorkDoneProgress",{enumerable:!0,get:function(){return Jo.WorkDoneProgress}});Object.defineProperty(l,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Jo.WorkDoneProgressCreateRequest}});Object.defineProperty(l,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Jo.WorkDoneProgressCancelNotification}});var Lo=Ja();Object.defineProperty(l,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Lo.CallHierarchyIncomingCallsRequest}});Object.defineProperty(l,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Lo.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(l,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Lo.CallHierarchyPrepareRequest}});var on=Ba();Object.defineProperty(l,"TokenFormat",{enumerable:!0,get:function(){return on.TokenFormat}});Object.defineProperty(l,"SemanticTokensRequest",{enumerable:!0,get:function(){return on.SemanticTokensRequest}});Object.defineProperty(l,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return on.SemanticTokensDeltaRequest}});Object.defineProperty(l,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return on.SemanticTokensRangeRequest}});Object.defineProperty(l,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return on.SemanticTokensRefreshRequest}});Object.defineProperty(l,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return on.SemanticTokensRegistrationType}});var hf=Ga();Object.defineProperty(l,"ShowDocumentRequest",{enumerable:!0,get:function(){return hf.ShowDocumentRequest}});var mf=Qa();Object.defineProperty(l,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return mf.LinkedEditingRangeRequest}});var qt=oc();Object.defineProperty(l,"FileOperationPatternKind",{enumerable:!0,get:function(){return qt.FileOperationPatternKind}});Object.defineProperty(l,"DidCreateFilesNotification",{enumerable:!0,get:function(){return qt.DidCreateFilesNotification}});Object.defineProperty(l,"WillCreateFilesRequest",{enumerable:!0,get:function(){return qt.WillCreateFilesRequest}});Object.defineProperty(l,"DidRenameFilesNotification",{enumerable:!0,get:function(){return qt.DidRenameFilesNotification}});Object.defineProperty(l,"WillRenameFilesRequest",{enumerable:!0,get:function(){return qt.WillRenameFilesRequest}});Object.defineProperty(l,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return qt.DidDeleteFilesNotification}});Object.defineProperty(l,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return qt.WillDeleteFilesRequest}});var Wo=lc();Object.defineProperty(l,"UniquenessLevel",{enumerable:!0,get:function(){return Wo.UniquenessLevel}});Object.defineProperty(l,"MonikerKind",{enumerable:!0,get:function(){return Wo.MonikerKind}});Object.defineProperty(l,"MonikerRequest",{enumerable:!0,get:function(){return Wo.MonikerRequest}});var Ho=hc();Object.defineProperty(l,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ho.TypeHierarchyPrepareRequest}});Object.defineProperty(l,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Ho.TypeHierarchySubtypesRequest}});Object.defineProperty(l,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Ho.TypeHierarchySupertypesRequest}});var Ku=yc();Object.defineProperty(l,"InlineValueRequest",{enumerable:!0,get:function(){return Ku.InlineValueRequest}});Object.defineProperty(l,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Ku.InlineValueRefreshRequest}});var Uo=_c();Object.defineProperty(l,"InlayHintRequest",{enumerable:!0,get:function(){return Uo.InlayHintRequest}});Object.defineProperty(l,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Uo.InlayHintResolveRequest}});Object.defineProperty(l,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Uo.InlayHintRefreshRequest}});var wn=kc();Object.defineProperty(l,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return wn.DiagnosticServerCancellationData}});Object.defineProperty(l,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return wn.DocumentDiagnosticReportKind}});Object.defineProperty(l,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return wn.DocumentDiagnosticRequest}});Object.defineProperty(l,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return wn.WorkspaceDiagnosticRequest}});Object.defineProperty(l,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return wn.DiagnosticRefreshRequest}});var Xe=jc();Object.defineProperty(l,"NotebookCellKind",{enumerable:!0,get:function(){return Xe.NotebookCellKind}});Object.defineProperty(l,"ExecutionSummary",{enumerable:!0,get:function(){return Xe.ExecutionSummary}});Object.defineProperty(l,"NotebookCell",{enumerable:!0,get:function(){return Xe.NotebookCell}});Object.defineProperty(l,"NotebookDocument",{enumerable:!0,get:function(){return Xe.NotebookDocument}});Object.defineProperty(l,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Xe.NotebookDocumentSyncRegistrationType}});Object.defineProperty(l,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Xe.DidOpenNotebookDocumentNotification}});Object.defineProperty(l,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Xe.NotebookCellArrayChange}});Object.defineProperty(l,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Xe.DidChangeNotebookDocumentNotification}});Object.defineProperty(l,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Xe.DidSaveNotebookDocumentNotification}});Object.defineProperty(l,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Xe.DidCloseNotebookDocumentNotification}});var gf=Fc();Object.defineProperty(l,"InlineCompletionRequest",{enumerable:!0,get:function(){return gf.InlineCompletionRequest}});var jo;(function(e){function t(n){let r=n;return ye.string(r)||ye.string(r.language)||ye.string(r.scheme)||ye.string(r.pattern)}e.is=t})(jo||(l.TextDocumentFilter=jo={}));var Ao;(function(e){function t(n){let r=n;return ye.objectLiteral(r)&&(ye.string(r.notebookType)||ye.string(r.scheme)||ye.string(r.pattern))}e.is=t})(Ao||(l.NotebookDocumentFilter=Ao={}));var Io;(function(e){function t(n){let r=n;return ye.objectLiteral(r)&&(ye.string(r.notebook)||Ao.is(r.notebook))&&(r.language===void 0||ye.string(r.language))}e.is=t})(Io||(l.NotebookCellTextDocumentFilter=Io={}));var Fo;(function(e){function t(n){if(!Array.isArray(n))return!1;for(let r of n)if(!ye.string(r)&&!jo.is(r)&&!Io.is(r))return!1;return!0}e.is=t})(Fo||(l.DocumentSelector=Fo={}));var Lc;(function(e){e.method="client/registerCapability",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolRequestType(e.method)})(Lc||(l.RegistrationRequest=Lc={}));var Wc;(function(e){e.method="client/unregisterCapability",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolRequestType(e.method)})(Wc||(l.UnregistrationRequest=Wc={}));var Hc;(function(e){e.Create="create",e.Rename="rename",e.Delete="delete"})(Hc||(l.ResourceOperationKind=Hc={}));var Uc;(function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"})(Uc||(l.FailureHandlingKind=Uc={}));var $c;(function(e){e.UTF8="utf-8",e.UTF16="utf-16",e.UTF32="utf-32"})($c||(l.PositionEncodingKind=$c={}));var Bc;(function(e){function t(n){let r=n;return r&&ye.string(r.id)&&r.id.length>0}e.hasId=t})(Bc||(l.StaticRegistrationOptions=Bc={}));var zc;(function(e){function t(n){let r=n;return r&&(r.documentSelector===null||Fo.is(r.documentSelector))}e.is=t})(zc||(l.TextDocumentRegistrationOptions=zc={}));var Vc;(function(e){function t(r){let i=r;return ye.objectLiteral(i)&&(i.workDoneProgress===void 0||ye.boolean(i.workDoneProgress))}e.is=t;function n(r){let i=r;return i&&ye.boolean(i.workDoneProgress)}e.hasWorkDoneProgress=n})(Vc||(l.WorkDoneProgressOptions=Vc={}));var Gc;(function(e){e.method="initialize",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Gc||(l.InitializeRequest=Gc={}));var Xc;(function(e){e.unknownProtocolVersion=1})(Xc||(l.InitializeErrorCodes=Xc={}));var Kc;(function(e){e.method="initialized",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType(e.method)})(Kc||(l.InitializedNotification=Kc={}));var Qc;(function(e){e.method="shutdown",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType0(e.method)})(Qc||(l.ShutdownRequest=Qc={}));var Zc;(function(e){e.method="exit",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType0(e.method)})(Zc||(l.ExitNotification=Zc={}));var Yc;(function(e){e.method="workspace/didChangeConfiguration",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType(e.method)})(Yc||(l.DidChangeConfigurationNotification=Yc={}));var eu;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5})(eu||(l.MessageType=eu={}));var tu;(function(e){e.method="window/showMessage",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolNotificationType(e.method)})(tu||(l.ShowMessageNotification=tu={}));var nu;(function(e){e.method="window/showMessageRequest",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolRequestType(e.method)})(nu||(l.ShowMessageRequest=nu={}));var ru;(function(e){e.method="window/logMessage",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolNotificationType(e.method)})(ru||(l.LogMessageNotification=ru={}));var iu;(function(e){e.method="telemetry/event",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolNotificationType(e.method)})(iu||(l.TelemetryEventNotification=iu={}));var ou;(function(e){e.None=0,e.Full=1,e.Incremental=2})(ou||(l.TextDocumentSyncKind=ou={}));var su;(function(e){e.method="textDocument/didOpen",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType(e.method)})(su||(l.DidOpenTextDocumentNotification=su={}));var au;(function(e){function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}e.isIncremental=t;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}e.isFull=n})(au||(l.TextDocumentContentChangeEvent=au={}));var cu;(function(e){e.method="textDocument/didChange",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType(e.method)})(cu||(l.DidChangeTextDocumentNotification=cu={}));var uu;(function(e){e.method="textDocument/didClose",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType(e.method)})(uu||(l.DidCloseTextDocumentNotification=uu={}));var lu;(function(e){e.method="textDocument/didSave",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType(e.method)})(lu||(l.DidSaveTextDocumentNotification=lu={}));var du;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3})(du||(l.TextDocumentSaveReason=du={}));var fu;(function(e){e.method="textDocument/willSave",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType(e.method)})(fu||(l.WillSaveTextDocumentNotification=fu={}));var pu;(function(e){e.method="textDocument/willSaveWaitUntil",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(pu||(l.WillSaveTextDocumentWaitUntilRequest=pu={}));var hu;(function(e){e.method="workspace/didChangeWatchedFiles",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolNotificationType(e.method)})(hu||(l.DidChangeWatchedFilesNotification=hu={}));var mu;(function(e){e.Created=1,e.Changed=2,e.Deleted=3})(mu||(l.FileChangeType=mu={}));var gu;(function(e){function t(n){let r=n;return ye.objectLiteral(r)&&(Jc.URI.is(r.baseUri)||Jc.WorkspaceFolder.is(r.baseUri))&&ye.string(r.pattern)}e.is=t})(gu||(l.RelativePattern=gu={}));var yu;(function(e){e.Create=1,e.Change=2,e.Delete=4})(yu||(l.WatchKind=yu={}));var bu;(function(e){e.method="textDocument/publishDiagnostics",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolNotificationType(e.method)})(bu||(l.PublishDiagnosticsNotification=bu={}));var vu;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3})(vu||(l.CompletionTriggerKind=vu={}));var Tu;(function(e){e.method="textDocument/completion",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Tu||(l.CompletionRequest=Tu={}));var _u;(function(e){e.method="completionItem/resolve",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(_u||(l.CompletionResolveRequest=_u={}));var Ru;(function(e){e.method="textDocument/hover",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Ru||(l.HoverRequest=Ru={}));var Du;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3})(Du||(l.SignatureHelpTriggerKind=Du={}));var wu;(function(e){e.method="textDocument/signatureHelp",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(wu||(l.SignatureHelpRequest=wu={}));var Su;(function(e){e.method="textDocument/definition",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Su||(l.DefinitionRequest=Su={}));var Pu;(function(e){e.method="textDocument/references",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Pu||(l.ReferencesRequest=Pu={}));var Cu;(function(e){e.method="textDocument/documentHighlight",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Cu||(l.DocumentHighlightRequest=Cu={}));var ku;(function(e){e.method="textDocument/documentSymbol",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(ku||(l.DocumentSymbolRequest=ku={}));var qu;(function(e){e.method="textDocument/codeAction",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(qu||(l.CodeActionRequest=qu={}));var Nu;(function(e){e.method="codeAction/resolve",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Nu||(l.CodeActionResolveRequest=Nu={}));var xu;(function(e){e.method="workspace/symbol",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(xu||(l.WorkspaceSymbolRequest=xu={}));var Ou;(function(e){e.method="workspaceSymbol/resolve",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Ou||(l.WorkspaceSymbolResolveRequest=Ou={}));var Mu;(function(e){e.method="textDocument/codeLens",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Mu||(l.CodeLensRequest=Mu={}));var Eu;(function(e){e.method="codeLens/resolve",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Eu||(l.CodeLensResolveRequest=Eu={}));var ju;(function(e){e.method="workspace/codeLens/refresh",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolRequestType0(e.method)})(ju||(l.CodeLensRefreshRequest=ju={}));var Au;(function(e){e.method="textDocument/documentLink",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Au||(l.DocumentLinkRequest=Au={}));var Iu;(function(e){e.method="documentLink/resolve",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Iu||(l.DocumentLinkResolveRequest=Iu={}));var Fu;(function(e){e.method="textDocument/formatting",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Fu||(l.DocumentFormattingRequest=Fu={}));var Ju;(function(e){e.method="textDocument/rangeFormatting",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Ju||(l.DocumentRangeFormattingRequest=Ju={}));var Lu;(function(e){e.method="textDocument/rangesFormatting",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Lu||(l.DocumentRangesFormattingRequest=Lu={}));var Wu;(function(e){e.method="textDocument/onTypeFormatting",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Wu||(l.DocumentOnTypeFormattingRequest=Wu={}));var Hu;(function(e){e.Identifier=1})(Hu||(l.PrepareSupportDefaultBehavior=Hu={}));var Uu;(function(e){e.method="textDocument/rename",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Uu||(l.RenameRequest=Uu={}));var $u;(function(e){e.method="textDocument/prepareRename",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})($u||(l.PrepareRenameRequest=$u={}));var Bu;(function(e){e.method="workspace/executeCommand",e.messageDirection=P.MessageDirection.clientToServer,e.type=new P.ProtocolRequestType(e.method)})(Bu||(l.ExecuteCommandRequest=Bu={}));var zu;(function(e){e.method="workspace/applyEdit",e.messageDirection=P.MessageDirection.serverToClient,e.type=new P.ProtocolRequestType("workspace/applyEdit")})(zu||(l.ApplyWorkspaceEditRequest=zu={}))});var Yu=x(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.createProtocolConnection=void 0;var Zu=kt();function yf(e,t,n,r){return Zu.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Zu.createMessageConnection)(e,t,n,r)}Er.createProtocolConnection=yf});var tl=x(ke=>{"use strict";var bf=ke&&ke.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),jr=ke&&ke.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&bf(t,e,n)};Object.defineProperty(ke,"__esModule",{value:!0});ke.LSPErrorCodes=ke.createProtocolConnection=void 0;jr(kt(),ke);jr(br(),ke);jr(se(),ke);jr(Qu(),ke);var vf=Yu();Object.defineProperty(ke,"createProtocolConnection",{enumerable:!0,get:function(){return vf.createProtocolConnection}});var el;(function(e){e.lspReservedErrorRangeStart=-32899,e.RequestFailed=-32803,e.ServerCancelled=-32802,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800})(el||(ke.LSPErrorCodes=el={}))});var fe=x(Ke=>{"use strict";var Tf=Ke&&Ke.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),nl=Ke&&Ke.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Tf(t,e,n)};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.createProtocolConnection=void 0;var _f=Co();nl(Co(),Ke);nl(tl(),Ke);function Rf(e,t,n,r){return(0,_f.createMessageConnection)(e,t,n,r)}Ke.createProtocolConnection=Rf});var $o=x(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.generateUuid=je.parse=je.isUUID=je.v4=je.empty=void 0;var Sn=class{constructor(t){this._value=t}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}},Pn=class e extends Sn{static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return e._oneOf(e._chars)}constructor(){super([e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-","4",e._randomHex(),e._randomHex(),e._randomHex(),"-",e._oneOf(e._timeHighBits),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex()].join(""))}};Pn._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Pn._timeHighBits=["8","9","a","b"];je.empty=new Sn("00000000-0000-0000-0000-000000000000");function rl(){return new Pn}je.v4=rl;var Df=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function il(e){return Df.test(e)}je.isUUID=il;function wf(e){if(!il(e))throw new Error("invalid uuid");return new Sn(e)}je.parse=wf;function Sf(){return rl().asHex()}je.generateUuid=Sf});var ol=x(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.attachPartialResult=yt.ProgressFeature=yt.attachWorkDone=void 0;var gt=fe(),Pf=$o(),Nt=class e{constructor(t,n){this._connection=t,this._token=n,e.Instances.set(this._token,this)}begin(t,n,r,i){let a={kind:"begin",title:t,percentage:n,message:r,cancellable:i};this._connection.sendProgress(gt.WorkDoneProgress.type,this._token,a)}report(t,n){let r={kind:"report"};typeof t=="number"?(r.percentage=t,n!==void 0&&(r.message=n)):r.message=t,this._connection.sendProgress(gt.WorkDoneProgress.type,this._token,r)}done(){e.Instances.delete(this._token),this._connection.sendProgress(gt.WorkDoneProgress.type,this._token,{kind:"end"})}};Nt.Instances=new Map;var Ar=class extends Nt{constructor(t,n){super(t,n),this._source=new gt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Cn=class{constructor(){}begin(){}report(){}done(){}},Ir=class extends Cn{constructor(){super(),this._source=new gt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Cf(e,t){if(t===void 0||t.workDoneToken===void 0)return new Cn;let n=t.workDoneToken;return delete t.workDoneToken,new Nt(e,n)}yt.attachWorkDone=Cf;var kf=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(t){super.initialize(t),t?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(gt.WorkDoneProgressCancelNotification.type,n=>{let r=Nt.Instances.get(n.token);(r instanceof Ar||r instanceof Ir)&&r.cancel()}))}attachWorkDoneProgress(t){return t===void 0?new Cn:new Nt(this.connection,t)}createWorkDoneProgress(){if(this._progressSupported){let t=(0,Pf.generateUuid)();return this.connection.sendRequest(gt.WorkDoneProgressCreateRequest.type,{token:t}).then(()=>new Ar(this.connection,t))}else return Promise.resolve(new Ir)}};yt.ProgressFeature=kf;var Bo;(function(e){e.type=new gt.ProgressType})(Bo||(Bo={}));var zo=class{constructor(t,n){this._connection=t,this._token=n}report(t){this._connection.sendProgress(Bo.type,this._token,t)}};function qf(e,t){if(t===void 0||t.partialResultToken===void 0)return;let n=t.partialResultToken;return delete t.partialResultToken,new zo(e,n)}yt.attachPartialResult=qf});var sl=x(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.ConfigurationFeature=void 0;var Nf=fe(),xf=Xn(),Of=e=>class extends e{getConfiguration(t){return t?xf.string(t)?this._getConfiguration({section:t}):this._getConfiguration(t):this._getConfiguration({})}_getConfiguration(t){let n={items:Array.isArray(t)?t:[t]};return this.connection.sendRequest(Nf.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(t)?r:r[0]:Array.isArray(t)?[]:null)}};Fr.ConfigurationFeature=Of});var al=x(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.WorkspaceFoldersFeature=void 0;var Jr=fe(),Mf=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(t){super.initialize(t);let n=t.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Jr.Emitter,this.connection.onNotification(Jr.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(t){super.fillServerCapabilities(t);let n=t.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Jr.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Jr.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Lr.WorkspaceFoldersFeature=Mf});var cl=x(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.CallHierarchyFeature=void 0;var Vo=fe(),Ef=e=>class extends e{get callHierarchy(){return{onPrepare:t=>this.connection.onRequest(Vo.CallHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:t=>{let n=Vo.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:t=>{let n=Vo.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Wr.CallHierarchyFeature=Ef});var Xo=x(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.SemanticTokensBuilder=bt.SemanticTokensDiff=bt.SemanticTokensFeature=void 0;var Hr=fe(),jf=e=>class extends e{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(Hr.SemanticTokensRefreshRequest.type),on:t=>{let n=Hr.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:t=>{let n=Hr.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:t=>{let n=Hr.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};bt.SemanticTokensFeature=jf;var Ur=class{constructor(t,n){this.originalSequence=t,this.modifiedSequence=n}computeDiff(){let t=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<t&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<t){let i=t-1,a=n-1;for(;i>=r&&a>=r&&this.originalSequence[i]===this.modifiedSequence[a];)i--,a--;(i<r||a<r)&&(i++,a++);let d=i-r+1,m=this.modifiedSequence.slice(r,a+1);return m.length===1&&m[0]===this.originalSequence[i]?[{start:r,deleteCount:d-1}]:[{start:r,deleteCount:d,data:m}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<t?[{start:r,deleteCount:t-r}]:[]}};bt.SemanticTokensDiff=Ur;var Go=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(t,n,r,i,a){let d=t,m=n;this._dataLen>0&&(d-=this._prevLine,d===0&&(m-=this._prevChar)),this._data[this._dataLen++]=d,this._data[this._dataLen++]=m,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=a,this._prevLine=t,this._prevChar=n}get id(){return this._id.toString()}previousResult(t){this.id===t&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Ur(this._prevData,this._data).computeDiff()}:this.build()}};bt.SemanticTokensBuilder=Go});var ul=x($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.ShowDocumentFeature=void 0;var Af=fe(),If=e=>class extends e{showDocument(t){return this.connection.sendRequest(Af.ShowDocumentRequest.type,t)}};$r.ShowDocumentFeature=If});var ll=x(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.FileOperationsFeature=void 0;var sn=fe(),Ff=e=>class extends e{onDidCreateFiles(t){return this.connection.onNotification(sn.DidCreateFilesNotification.type,n=>{t(n)})}onDidRenameFiles(t){return this.connection.onNotification(sn.DidRenameFilesNotification.type,n=>{t(n)})}onDidDeleteFiles(t){return this.connection.onNotification(sn.DidDeleteFilesNotification.type,n=>{t(n)})}onWillCreateFiles(t){return this.connection.onRequest(sn.WillCreateFilesRequest.type,(n,r)=>t(n,r))}onWillRenameFiles(t){return this.connection.onRequest(sn.WillRenameFilesRequest.type,(n,r)=>t(n,r))}onWillDeleteFiles(t){return this.connection.onRequest(sn.WillDeleteFilesRequest.type,(n,r)=>t(n,r))}};Br.FileOperationsFeature=Ff});var dl=x(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.LinkedEditingRangeFeature=void 0;var Jf=fe(),Lf=e=>class extends e{onLinkedEditingRange(t){return this.connection.onRequest(Jf.LinkedEditingRangeRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0))}};zr.LinkedEditingRangeFeature=Lf});var fl=x(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.TypeHierarchyFeature=void 0;var Ko=fe(),Wf=e=>class extends e{get typeHierarchy(){return{onPrepare:t=>this.connection.onRequest(Ko.TypeHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:t=>{let n=Ko.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:t=>{let n=Ko.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Vr.TypeHierarchyFeature=Wf});var hl=x(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.InlineValueFeature=void 0;var pl=fe(),Hf=e=>class extends e{get inlineValue(){return{refresh:()=>this.connection.sendRequest(pl.InlineValueRefreshRequest.type),on:t=>this.connection.onRequest(pl.InlineValueRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};Gr.InlineValueFeature=Hf});var gl=x(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.FoldingRangeFeature=void 0;var ml=fe(),Uf=e=>class extends e{get foldingRange(){return{refresh:()=>this.connection.sendRequest(ml.FoldingRangeRefreshRequest.type),on:t=>{let n=ml.FoldingRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Xr.FoldingRangeFeature=Uf});var yl=x(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.InlayHintFeature=void 0;var Qo=fe(),$f=e=>class extends e{get inlayHint(){return{refresh:()=>this.connection.sendRequest(Qo.InlayHintRefreshRequest.type),on:t=>this.connection.onRequest(Qo.InlayHintRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n))),resolve:t=>this.connection.onRequest(Qo.InlayHintResolveRequest.type,(n,r)=>t(n,r))}}};Kr.InlayHintFeature=$f});var bl=x(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.DiagnosticFeature=void 0;var kn=fe(),Bf=e=>class extends e{get diagnostics(){return{refresh:()=>this.connection.sendRequest(kn.DiagnosticRefreshRequest.type),on:t=>this.connection.onRequest(kn.DocumentDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(kn.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:t=>this.connection.onRequest(kn.WorkspaceDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(kn.WorkspaceDiagnosticRequest.partialResult,n)))}}};Qr.DiagnosticFeature=Bf});var Yo=x(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.TextDocuments=void 0;var xt=fe(),Zo=class{constructor(t){this._configuration=t,this._syncedDocuments=new Map,this._onDidChangeContent=new xt.Emitter,this._onDidOpen=new xt.Emitter,this._onDidClose=new xt.Emitter,this._onDidSave=new xt.Emitter,this._onWillSave=new xt.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(t){this._willSaveWaitUntil=t}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(t){return this._syncedDocuments.get(t)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(t){t.__textDocumentSync=xt.TextDocumentSyncKind.Incremental;let n=[];return n.push(t.onDidOpenTextDocument(r=>{let i=r.textDocument,a=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,a);let d=Object.freeze({document:a});this._onDidOpen.fire(d),this._onDidChangeContent.fire(d)})),n.push(t.onDidChangeTextDocument(r=>{let i=r.textDocument,a=r.contentChanges;if(a.length===0)return;let{version:d}=i;if(d==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let m=this._syncedDocuments.get(i.uri);m!==void 0&&(m=this._configuration.update(m,a,d),this._syncedDocuments.set(i.uri,m),this._onDidChangeContent.fire(Object.freeze({document:m})))})),n.push(t.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(t.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(t.onWillSaveTextDocumentWaitUntil((r,i)=>{let a=this._syncedDocuments.get(r.textDocument.uri);return a!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:a,reason:r.reason}),i):[]})),n.push(t.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),xt.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};Zr.TextDocuments=Zo});var ts=x(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.NotebookDocuments=an.NotebookSyncFeature=void 0;var Ae=fe(),vl=Yo(),zf=e=>class extends e{get synchronization(){return{onDidOpenNotebookDocument:t=>this.connection.onNotification(Ae.DidOpenNotebookDocumentNotification.type,n=>{t(n)}),onDidChangeNotebookDocument:t=>this.connection.onNotification(Ae.DidChangeNotebookDocumentNotification.type,n=>{t(n)}),onDidSaveNotebookDocument:t=>this.connection.onNotification(Ae.DidSaveNotebookDocumentNotification.type,n=>{t(n)}),onDidCloseNotebookDocument:t=>this.connection.onNotification(Ae.DidCloseNotebookDocumentNotification.type,n=>{t(n)})}}};an.NotebookSyncFeature=zf;var Yr=class e{onDidOpenTextDocument(t){return this.openHandler=t,Ae.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(t){this.openHandler&&this.openHandler(t)}onDidChangeTextDocument(t){return this.changeHandler=t,Ae.Disposable.create(()=>{this.changeHandler=t})}changeTextDocument(t){this.changeHandler&&this.changeHandler(t)}onDidCloseTextDocument(t){return this.closeHandler=t,Ae.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(t){this.closeHandler&&this.closeHandler(t)}onWillSaveTextDocument(){return e.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return e.NULL_DISPOSE}onDidSaveTextDocument(){return e.NULL_DISPOSE}};Yr.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var es=class{constructor(t){t instanceof vl.TextDocuments?this._cellTextDocuments=t:this._cellTextDocuments=new vl.TextDocuments(t),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Ae.Emitter,this._onDidChange=new Ae.Emitter,this._onDidSave=new Ae.Emitter,this._onDidClose=new Ae.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(t){return this._cellTextDocuments.get(t.document)}getNotebookDocument(t){return this.notebookDocuments.get(t)}getNotebookCell(t){let n=this.notebookCellMap.get(t);return n&&n[0]}findNotebookDocumentForCell(t){let n=typeof t=="string"?t:t.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(t){let n=new Yr,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(t.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let a of i.cellTextDocuments)n.openTextDocument({textDocument:a});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(t.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let a=this.notebookDocuments.get(i.notebookDocument.uri);if(a===void 0)return;a.version=i.notebookDocument.version;let d=a.metadata,m=!1,S=i.change;S.metadata!==void 0&&(m=!0,a.metadata=S.metadata);let D=[],w=[],k=[],M=[];if(S.cells!==void 0){let H=S.cells;if(H.structure!==void 0){let v=H.structure.array;if(a.cells.splice(v.start,v.deleteCount,...v.cells!==void 0?v.cells:[]),H.structure.didOpen!==void 0)for(let y of H.structure.didOpen)n.openTextDocument({textDocument:y}),D.push(y.uri);if(H.structure.didClose)for(let y of H.structure.didClose)n.closeTextDocument({textDocument:y}),w.push(y.uri)}if(H.data!==void 0){let v=new Map(H.data.map(y=>[y.document,y]));for(let y=0;y<=a.cells.length;y++){let C=v.get(a.cells[y].document);if(C!==void 0){let W=a.cells.splice(y,1,C);if(k.push({old:W[0],new:C}),v.delete(C.document),v.size===0)break}}}if(H.textContent!==void 0)for(let v of H.textContent)n.changeTextDocument({textDocument:v.document,contentChanges:v.changes}),M.push(v.document.uri)}this.updateCellMap(a);let A={notebookDocument:a};m&&(A.metadata={old:d,new:a.metadata});let ne=[];for(let H of D)ne.push(this.getNotebookCell(H));let I=[];for(let H of w)I.push(this.getNotebookCell(H));let K=[];for(let H of M)K.push(this.getNotebookCell(H));(ne.length>0||I.length>0||k.length>0||K.length>0)&&(A.cells={added:ne,removed:I,changed:{data:k,textContent:K}}),(A.metadata!==void 0||A.cells!==void 0)&&this._onDidChange.fire(A)})),r.push(t.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let a=this.notebookDocuments.get(i.notebookDocument.uri);a!==void 0&&this._onDidSave.fire(a)})),r.push(t.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let a=this.notebookDocuments.get(i.notebookDocument.uri);if(a!==void 0){this._onDidClose.fire(a);for(let d of i.cellTextDocuments)n.closeTextDocument({textDocument:d});this.notebookDocuments.delete(i.notebookDocument.uri);for(let d of a.cells)this.notebookCellMap.delete(d.document)}})),Ae.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(t){for(let n of t.cells)this.notebookCellMap.set(n.document,[n,t])}};an.NotebookDocuments=es});var Tl=x(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.MonikerFeature=void 0;var Vf=fe(),Gf=e=>class extends e{get moniker(){return{on:t=>{let n=Vf.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};ei.MonikerFeature=Gf});var as=x(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.createConnection=V.combineFeatures=V.combineNotebooksFeatures=V.combineLanguagesFeatures=V.combineWorkspaceFeatures=V.combineWindowFeatures=V.combineClientFeatures=V.combineTracerFeatures=V.combineTelemetryFeatures=V.combineConsoleFeatures=V._NotebooksImpl=V._LanguagesImpl=V.BulkUnregistration=V.BulkRegistration=V.ErrorMessageTracker=void 0;var N=fe(),Ie=Xn(),rs=$o(),F=ol(),Xf=sl(),Kf=al(),Qf=cl(),Zf=Xo(),Yf=ul(),ep=ll(),tp=dl(),np=fl(),rp=hl(),ip=gl(),op=yl(),sp=bl(),ap=ts(),cp=Tl();function ns(e){if(e!==null)return e}var is=class{constructor(){this._messages=Object.create(null)}add(t){let n=this._messages[t];n||(n=0),n++,this._messages[t]=n}sendErrors(t){Object.keys(this._messages).forEach(n=>{t.window.showErrorMessage(n)})}};V.ErrorMessageTracker=is;var ti=class{constructor(){}rawAttach(t){this._rawConnection=t}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(t){}initialize(t){}error(t){this.send(N.MessageType.Error,t)}warn(t){this.send(N.MessageType.Warning,t)}info(t){this.send(N.MessageType.Info,t)}log(t){this.send(N.MessageType.Log,t)}debug(t){this.send(N.MessageType.Debug,t)}send(t,n){this._rawConnection&&this._rawConnection.sendNotification(N.LogMessageNotification.type,{type:t,message:n}).catch(()=>{(0,N.RAL)().console.error("Sending log message failed")})}},os=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}showErrorMessage(t,...n){let r={type:N.MessageType.Error,message:t,actions:n};return this.connection.sendRequest(N.ShowMessageRequest.type,r).then(ns)}showWarningMessage(t,...n){let r={type:N.MessageType.Warning,message:t,actions:n};return this.connection.sendRequest(N.ShowMessageRequest.type,r).then(ns)}showInformationMessage(t,...n){let r={type:N.MessageType.Info,message:t,actions:n};return this.connection.sendRequest(N.ShowMessageRequest.type,r).then(ns)}},_l=(0,Yf.ShowDocumentFeature)((0,F.ProgressFeature)(os)),Rl;(function(e){function t(){return new ni}e.create=t})(Rl||(V.BulkRegistration=Rl={}));var ni=class{constructor(){this._registrations=[],this._registered=new Set}add(t,n){let r=Ie.string(t)?t:t.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=rs.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},Dl;(function(e){function t(){return new qn(void 0,[])}e.create=t})(Dl||(V.BulkUnregistration=Dl={}));var qn=class{constructor(t,n){this._connection=t,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(t){this._connection=t}add(t){this._unregistrations.set(t.method,t)}dispose(){let t=[];for(let r of this._unregistrations.values())t.push(r);let n={unregisterations:t};this._connection.sendRequest(N.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(t){let n=Ie.string(t)?t:t.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(N.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},a=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},ri=class{attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}register(t,n,r){return t instanceof ni?this.registerMany(t):t instanceof qn?this.registerSingle1(t,n,r):this.registerSingle2(t,n)}registerSingle1(t,n,r){let i=Ie.string(n)?n:n.method,a=rs.generateUuid(),d={registrations:[{id:a,method:i,registerOptions:r||{}}]};return t.isAttached||t.attach(this.connection),this.connection.sendRequest(N.RegistrationRequest.type,d).then(m=>(t.add({id:a,method:i}),t),m=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(m)))}registerSingle2(t,n){let r=Ie.string(t)?t:t.method,i=rs.generateUuid(),a={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(N.RegistrationRequest.type,a).then(d=>N.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),d=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(d)))}unregisterSingle(t,n){let r={unregisterations:[{id:t,method:n}]};return this.connection.sendRequest(N.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${t} failed.`)})}registerMany(t){let n=t.asRegistrationParams();return this.connection.sendRequest(N.RegistrationRequest.type,n).then(()=>new qn(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},ss=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}applyEdit(t){function n(i){return i&&!!i.edit}let r=n(t)?t:{edit:t};return this.connection.sendRequest(N.ApplyWorkspaceEditRequest.type,r)}},wl=(0,ep.FileOperationsFeature)((0,Kf.WorkspaceFoldersFeature)((0,Xf.ConfigurationFeature)(ss))),ii=class{constructor(){this._trace=N.Trace.Off}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}set trace(t){this._trace=t}log(t,n){this._trace!==N.Trace.Off&&this.connection.sendNotification(N.LogTraceNotification.type,{message:t,verbose:this._trace===N.Trace.Verbose?n:void 0}).catch(()=>{})}},oi=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}logEvent(t){this.connection.sendNotification(N.TelemetryEventNotification.type,t).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},si=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,F.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,F.attachPartialResult)(this.connection,n)}};V._LanguagesImpl=si;var Sl=(0,ip.FoldingRangeFeature)((0,cp.MonikerFeature)((0,sp.DiagnosticFeature)((0,op.InlayHintFeature)((0,rp.InlineValueFeature)((0,np.TypeHierarchyFeature)((0,tp.LinkedEditingRangeFeature)((0,Zf.SemanticTokensFeature)((0,Qf.CallHierarchyFeature)(si))))))))),ai=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,F.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,F.attachPartialResult)(this.connection,n)}};V._NotebooksImpl=ai;var Pl=(0,ap.NotebookSyncFeature)(ai);function Cl(e,t){return function(n){return t(e(n))}}V.combineConsoleFeatures=Cl;function kl(e,t){return function(n){return t(e(n))}}V.combineTelemetryFeatures=kl;function ql(e,t){return function(n){return t(e(n))}}V.combineTracerFeatures=ql;function Nl(e,t){return function(n){return t(e(n))}}V.combineClientFeatures=Nl;function xl(e,t){return function(n){return t(e(n))}}V.combineWindowFeatures=xl;function Ol(e,t){return function(n){return t(e(n))}}V.combineWorkspaceFeatures=Ol;function Ml(e,t){return function(n){return t(e(n))}}V.combineLanguagesFeatures=Ml;function El(e,t){return function(n){return t(e(n))}}V.combineNotebooksFeatures=El;function up(e,t){function n(i,a,d){return i&&a?d(i,a):i||a}return{__brand:"features",console:n(e.console,t.console,Cl),tracer:n(e.tracer,t.tracer,ql),telemetry:n(e.telemetry,t.telemetry,kl),client:n(e.client,t.client,Nl),window:n(e.window,t.window,xl),workspace:n(e.workspace,t.workspace,Ol),languages:n(e.languages,t.languages,Ml),notebooks:n(e.notebooks,t.notebooks,El)}}V.combineFeatures=up;function lp(e,t,n){let r=n&&n.console?new(n.console(ti)):new ti,i=e(r);r.rawAttach(i);let a=n&&n.tracer?new(n.tracer(ii)):new ii,d=n&&n.telemetry?new(n.telemetry(oi)):new oi,m=n&&n.client?new(n.client(ri)):new ri,S=n&&n.window?new(n.window(_l)):new _l,D=n&&n.workspace?new(n.workspace(wl)):new wl,w=n&&n.languages?new(n.languages(Sl)):new Sl,k=n&&n.notebooks?new(n.notebooks(Pl)):new Pl,M=[r,a,d,m,S,D,w,k];function A(v){return v instanceof Promise?v:Ie.thenable(v)?new Promise((y,C)=>{v.then(W=>y(W),W=>C(W))}):Promise.resolve(v)}let ne,I,K,H={listen:()=>i.listen(),sendRequest:(v,...y)=>i.sendRequest(Ie.string(v)?v:v.method,...y),onRequest:(v,y)=>i.onRequest(v,y),sendNotification:(v,y)=>{let C=Ie.string(v)?v:v.method;return i.sendNotification(C,y)},onNotification:(v,y)=>i.onNotification(v,y),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:v=>(I=v,{dispose:()=>{I=void 0}}),onInitialized:v=>i.onNotification(N.InitializedNotification.type,v),onShutdown:v=>(ne=v,{dispose:()=>{ne=void 0}}),onExit:v=>(K=v,{dispose:()=>{K=void 0}}),get console(){return r},get telemetry(){return d},get tracer(){return a},get client(){return m},get window(){return S},get workspace(){return D},get languages(){return w},get notebooks(){return k},onDidChangeConfiguration:v=>i.onNotification(N.DidChangeConfigurationNotification.type,v),onDidChangeWatchedFiles:v=>i.onNotification(N.DidChangeWatchedFilesNotification.type,v),__textDocumentSync:void 0,onDidOpenTextDocument:v=>i.onNotification(N.DidOpenTextDocumentNotification.type,v),onDidChangeTextDocument:v=>i.onNotification(N.DidChangeTextDocumentNotification.type,v),onDidCloseTextDocument:v=>i.onNotification(N.DidCloseTextDocumentNotification.type,v),onWillSaveTextDocument:v=>i.onNotification(N.WillSaveTextDocumentNotification.type,v),onWillSaveTextDocumentWaitUntil:v=>i.onRequest(N.WillSaveTextDocumentWaitUntilRequest.type,v),onDidSaveTextDocument:v=>i.onNotification(N.DidSaveTextDocumentNotification.type,v),sendDiagnostics:v=>i.sendNotification(N.PublishDiagnosticsNotification.type,v),onHover:v=>i.onRequest(N.HoverRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),void 0)),onCompletion:v=>i.onRequest(N.CompletionRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onCompletionResolve:v=>i.onRequest(N.CompletionResolveRequest.type,v),onSignatureHelp:v=>i.onRequest(N.SignatureHelpRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),void 0)),onDeclaration:v=>i.onRequest(N.DeclarationRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onDefinition:v=>i.onRequest(N.DefinitionRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onTypeDefinition:v=>i.onRequest(N.TypeDefinitionRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onImplementation:v=>i.onRequest(N.ImplementationRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onReferences:v=>i.onRequest(N.ReferencesRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onDocumentHighlight:v=>i.onRequest(N.DocumentHighlightRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onDocumentSymbol:v=>i.onRequest(N.DocumentSymbolRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onWorkspaceSymbol:v=>i.onRequest(N.WorkspaceSymbolRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onWorkspaceSymbolResolve:v=>i.onRequest(N.WorkspaceSymbolResolveRequest.type,v),onCodeAction:v=>i.onRequest(N.CodeActionRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onCodeActionResolve:v=>i.onRequest(N.CodeActionResolveRequest.type,(y,C)=>v(y,C)),onCodeLens:v=>i.onRequest(N.CodeLensRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onCodeLensResolve:v=>i.onRequest(N.CodeLensResolveRequest.type,(y,C)=>v(y,C)),onDocumentFormatting:v=>i.onRequest(N.DocumentFormattingRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),void 0)),onDocumentRangeFormatting:v=>i.onRequest(N.DocumentRangeFormattingRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),void 0)),onDocumentOnTypeFormatting:v=>i.onRequest(N.DocumentOnTypeFormattingRequest.type,(y,C)=>v(y,C)),onRenameRequest:v=>i.onRequest(N.RenameRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),void 0)),onPrepareRename:v=>i.onRequest(N.PrepareRenameRequest.type,(y,C)=>v(y,C)),onDocumentLinks:v=>i.onRequest(N.DocumentLinkRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onDocumentLinkResolve:v=>i.onRequest(N.DocumentLinkResolveRequest.type,(y,C)=>v(y,C)),onDocumentColor:v=>i.onRequest(N.DocumentColorRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onColorPresentation:v=>i.onRequest(N.ColorPresentationRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onFoldingRanges:v=>i.onRequest(N.FoldingRangeRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onSelectionRanges:v=>i.onRequest(N.SelectionRangeRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onExecuteCommand:v=>i.onRequest(N.ExecuteCommandRequest.type,(y,C)=>v(y,C,(0,F.attachWorkDone)(i,y),void 0)),dispose:()=>i.dispose()};for(let v of M)v.attach(H);return i.onRequest(N.InitializeRequest.type,v=>{t.initialize(v),Ie.string(v.trace)&&(a.trace=N.Trace.fromString(v.trace));for(let y of M)y.initialize(v.capabilities);if(I){let y=I(v,new N.CancellationTokenSource().token,(0,F.attachWorkDone)(i,v),void 0);return A(y).then(C=>{if(C instanceof N.ResponseError)return C;let W=C;W||(W={capabilities:{}});let Y=W.capabilities;Y||(Y={},W.capabilities=Y),Y.textDocumentSync===void 0||Y.textDocumentSync===null?Y.textDocumentSync=Ie.number(H.__textDocumentSync)?H.__textDocumentSync:N.TextDocumentSyncKind.None:!Ie.number(Y.textDocumentSync)&&!Ie.number(Y.textDocumentSync.change)&&(Y.textDocumentSync.change=Ie.number(H.__textDocumentSync)?H.__textDocumentSync:N.TextDocumentSyncKind.None);for(let ce of M)ce.fillServerCapabilities(Y);return W})}else{let y={capabilities:{textDocumentSync:N.TextDocumentSyncKind.None}};for(let C of M)C.fillServerCapabilities(y.capabilities);return y}}),i.onRequest(N.ShutdownRequest.type,()=>{if(t.shutdownReceived=!0,ne)return ne(new N.CancellationTokenSource().token)}),i.onNotification(N.ExitNotification.type,()=>{try{K&&K()}finally{t.shutdownReceived?t.exit(0):t.exit(1)}}),i.onNotification(N.SetTraceNotification.type,v=>{a.trace=N.Trace.fromString(v.value)}),H}V.createConnection=lp});var jl=x(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.resolveModulePath=qe.FileSystem=qe.resolveGlobalYarnPath=qe.resolveGlobalNodePath=qe.resolve=qe.uriToFilePath=void 0;var dp=require("url"),ze=require("path"),cs=require("fs"),fs=require("child_process");function fp(e){let t=dp.parse(e);if(t.protocol!=="file:"||!t.path)return;let n=t.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let a=n[0],d=n[1];a.length===0&&d.length>1&&d[1]===":"&&n.shift()}return ze.normalize(n.join("/"))}qe.uriToFilePath=fp;function us(){return process.platform==="win32"}function ci(e,t,n,r){let i="NODE_PATH",a=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((d,m)=>{let S=process.env,D=Object.create(null);Object.keys(S).forEach(w=>D[w]=S[w]),t&&cs.existsSync(t)&&(D[i]?D[i]=t+ze.delimiter+D[i]:D[i]=t,r&&r(`NODE_PATH value is: ${D[i]}`)),D.ELECTRON_RUN_AS_NODE="1";try{let w=(0,fs.fork)("",[],{cwd:n,env:D,execArgv:["-e",a]});if(w.pid===void 0){m(new Error(`Starting process to resolve node module  ${e} failed`));return}w.on("error",M=>{m(M)}),w.on("message",M=>{M.c==="r"&&(w.send({c:"e"}),M.s?d(M.r):m(new Error(`Failed to resolve module: ${e}`)))});let k={c:"rs",a:e};w.send(k)}catch(w){m(w)}})}qe.resolve=ci;function ls(e){let t="npm",n=Object.create(null);Object.keys(process.env).forEach(a=>n[a]=process.env[a]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};us()&&(t="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let a=(0,fs.spawnSync)(t,["config","get","prefix"],r).stdout;if(!a){e&&e("'npm config get prefix' didn't return a value.");return}let d=a.trim();return e&&e(`'npm config get prefix' value is: ${d}`),d.length>0?us()?ze.join(d,"node_modules"):ze.join(d,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}qe.resolveGlobalNodePath=ls;function pp(e){let t="yarn",n={encoding:"utf8"};us()&&(t="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,fs.spawnSync)(t,["global","dir","--json"],n),a=i.stdout;if(!a){e&&(e("'yarn global dir' didn't return a value."),i.stderr&&e(i.stderr));return}let d=a.trim().split(/\r?\n/);for(let m of d)try{let S=JSON.parse(m);if(S.type==="log")return ze.join(S.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}qe.resolveGlobalYarnPath=pp;var ds;(function(e){let t;function n(){return t!==void 0||(process.platform==="win32"?t=!1:t=!cs.existsSync(__filename.toUpperCase())||!cs.existsSync(__filename.toLowerCase())),t}e.isCaseSensitive=n;function r(i,a){return n()?ze.normalize(a).indexOf(ze.normalize(i))===0:ze.normalize(a).toLowerCase().indexOf(ze.normalize(i).toLowerCase())===0}e.isParent=r})(ds||(qe.FileSystem=ds={}));function hp(e,t,n,r){return n?(ze.isAbsolute(n)||(n=ze.join(e,n)),ci(t,n,n,r).then(i=>ds.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${t} from node path location.`))).then(void 0,i=>ci(t,ls(r),e,r))):ci(t,ls(r),e,r)}qe.resolveModulePath=hp});var ps=x((fm,Al)=>{"use strict";Al.exports=fe()});var Il=x(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.InlineCompletionFeature=void 0;var mp=fe(),gp=e=>class extends e{get inlineCompletion(){return{on:t=>this.connection.onRequest(mp.InlineCompletionRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};ui.InlineCompletionFeature=gp});var Ll=x(Re=>{"use strict";var yp=Re&&Re.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Jl=Re&&Re.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&yp(t,e,n)};Object.defineProperty(Re,"__esModule",{value:!0});Re.ProposedFeatures=Re.NotebookDocuments=Re.TextDocuments=Re.SemanticTokensBuilder=void 0;var bp=Xo();Object.defineProperty(Re,"SemanticTokensBuilder",{enumerable:!0,get:function(){return bp.SemanticTokensBuilder}});var vp=Il();Jl(fe(),Re);var Tp=Yo();Object.defineProperty(Re,"TextDocuments",{enumerable:!0,get:function(){return Tp.TextDocuments}});var _p=ts();Object.defineProperty(Re,"NotebookDocuments",{enumerable:!0,get:function(){return _p.NotebookDocuments}});Jl(as(),Re);var Fl;(function(e){e.all={__brand:"features",languages:vp.InlineCompletionFeature}})(Fl||(Re.ProposedFeatures=Fl={}))});var zl=x(Fe=>{"use strict";var Rp=Fe&&Fe.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),$l=Fe&&Fe.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Rp(t,e,n)};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.createConnection=Fe.Files=void 0;var Wl=require("node:util"),hs=Xn(),Dp=as(),Nn=jl(),Ot=ps();$l(ps(),Fe);$l(Ll(),Fe);var Hl;(function(e){e.uriToFilePath=Nn.uriToFilePath,e.resolveGlobalNodePath=Nn.resolveGlobalNodePath,e.resolveGlobalYarnPath=Nn.resolveGlobalYarnPath,e.resolve=Nn.resolve,e.resolveModulePath=Nn.resolveModulePath})(Hl||(Fe.Files=Hl={}));var Ul;function li(){if(Ul!==void 0)try{Ul.end()}catch{}}var cn=!1,Bl;function wp(){let e="--clientProcessId";function t(n){try{let r=parseInt(n);isNaN(r)||(Bl=setInterval(()=>{try{process.kill(r,0)}catch{li(),process.exit(cn?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===e&&n+1<process.argv.length){t(process.argv[n+1]);return}else{let i=r.split("=");i[0]===e&&t(i[1])}}}wp();var Sp={initialize:e=>{let t=e.processId;hs.number(t)&&Bl===void 0&&setInterval(()=>{try{process.kill(t,0)}catch{process.exit(cn?0:1)}},3e3)},get shutdownReceived(){return cn},set shutdownReceived(e){cn=e},exit:e=>{li(),process.exit(e)}};function Pp(e,t,n,r){let i,a,d,m;return e!==void 0&&e.__brand==="features"&&(i=e,e=t,t=n,n=r),Ot.ConnectionStrategy.is(e)||Ot.ConnectionOptions.is(e)?m=e:(a=e,d=t,m=n),Cp(a,d,m,i)}Fe.createConnection=Pp;function Cp(e,t,n,r){let i=!1;if(!e&&!t&&process.argv.length>2){let S,D,w=process.argv.slice(2);for(let k=0;k<w.length;k++){let M=w[k];if(M==="--node-ipc"){e=new Ot.IPCMessageReader(process),t=new Ot.IPCMessageWriter(process);break}else if(M==="--stdio"){i=!0,e=process.stdin,t=process.stdout;break}else if(M==="--socket"){S=parseInt(w[k+1]);break}else if(M==="--pipe"){D=w[k+1];break}else{var a=M.split("=");if(a[0]==="--socket"){S=parseInt(a[1]);break}else if(a[0]==="--pipe"){D=a[1];break}}}if(S){let k=(0,Ot.createServerSocketTransport)(S);e=k[0],t=k[1]}else if(D){let k=(0,Ot.createServerPipeTransport)(D);e=k[0],t=k[1]}}var d="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+d);if(!t)throw new Error("Connection output stream is not set. "+d);if(hs.func(e.read)&&hs.func(e.on)){let S=e;S.on("end",()=>{li(),process.exit(cn?0:1)}),S.on("close",()=>{li(),process.exit(cn?0:1)})}let m=S=>{let D=(0,Ot.createProtocolConnection)(e,t,S,n);return i&&kp(S),D};return(0,Dp.createConnection)(m,Sp,r)}function kp(e){function t(r){return r.map(i=>typeof i=="string"?i:(0,Wl.inspect)(i)).join(" ")}let n=new Map;console.assert=function(i,...a){if(!i)if(a.length===0)e.error("Assertion failed");else{let[d,...m]=a;e.error(`Assertion failed: ${d} ${t(m)}`)}},console.count=function(i="default"){let a=String(i),d=n.get(a)??0;d+=1,n.set(a,d),e.log(`${a}: ${a}`)},console.countReset=function(i){i===void 0?n.clear():n.delete(String(i))},console.debug=function(...i){e.log(t(i))},console.dir=function(i,a){e.log((0,Wl.inspect)(i,a))},console.log=function(...i){e.log(t(i))},console.error=function(...i){e.error(t(i))},console.trace=function(...i){let a=new Error().stack.replace(/(.+\n){2}/,""),d="Trace";i.length!==0&&(d+=`: ${t(i)}`),e.log(`${d}
${a}`)},console.warn=function(...i){e.warn(t(i))}}});var ms=x((ym,Vl)=>{"use strict";Vl.exports=zl()});var ed=x(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.DiagnosticSeverity=vt.SymbolKind=vt.JyroType=void 0;var Ql;(function(e){e.Null="null",e.Number="number",e.String="string",e.Boolean="boolean",e.Object="object",e.Array="array"})(Ql||(vt.JyroType=Ql={}));var Zl;(function(e){e.Variable="variable",e.Function="function",e.Parameter="parameter",e.Property="property"})(Zl||(vt.SymbolKind=Zl={}));var Yl;(function(e){e[e.Error=1]="Error",e[e.Warning=2]="Warning",e[e.Information=3]="Information",e[e.Hint=4]="Hint"})(Yl||(vt.DiagnosticSeverity=Yl={}))});var ys=x(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.FUNCTION_CATEGORIES=Je.STDLIB_FUNCTIONS=void 0;Je.getFunctionSignature=Np;Je.getAllFunctionNames=xp;Je.getFunctionsByCategory=Op;var u=ed();Je.STDLIB_FUNCTIONS=[{name:"Upper",category:"String",parameters:[{name:"str",type:u.JyroType.String,description:"The string to convert"}],returnType:u.JyroType.String,description:"Converts a string to uppercase",examples:['Upper("hello") # Returns "HELLO"']},{name:"Lower",category:"String",parameters:[{name:"str",type:u.JyroType.String,description:"The string to convert"}],returnType:u.JyroType.String,description:"Converts a string to lowercase",examples:['Lower("HELLO") # Returns "hello"']},{name:"Trim",category:"String",parameters:[{name:"str",type:u.JyroType.String,description:"The string to trim"}],returnType:u.JyroType.String,description:"Removes leading and trailing whitespace from a string",examples:['Trim("  hello  ") # Returns "hello"']},{name:"Replace",category:"String",parameters:[{name:"str",type:u.JyroType.String,description:"The input string"},{name:"search",type:u.JyroType.String,description:"The substring to search for"},{name:"replace",type:u.JyroType.String,description:"The replacement string"}],returnType:u.JyroType.String,description:"Replaces all occurrences of a substring with another string",examples:['Replace("hello world", "world", "there") # Returns "hello there"']},{name:"Contains",category:"String",parameters:[{name:"str",type:u.JyroType.String,description:"The string to search in"},{name:"search",type:u.JyroType.String,description:"The substring to search for"}],returnType:u.JyroType.Boolean,description:"Checks if a string contains a substring",examples:['Contains("hello", "ell") # Returns true']},{name:"StartsWith",category:"String",parameters:[{name:"str",type:u.JyroType.String,description:"The string to check"},{name:"prefix",type:u.JyroType.String,description:"The prefix to check for"}],returnType:u.JyroType.Boolean,description:"Checks if a string starts with a specific prefix",examples:['StartsWith("hello", "hel") # Returns true']},{name:"EndsWith",category:"String",parameters:[{name:"str",type:u.JyroType.String,description:"The string to check"},{name:"suffix",type:u.JyroType.String,description:"The suffix to check for"}],returnType:u.JyroType.Boolean,description:"Checks if a string ends with a specific suffix",examples:['EndsWith("hello", "lo") # Returns true']},{name:"Split",category:"String",parameters:[{name:"str",type:u.JyroType.String,description:"The string to split"},{name:"delimiter",type:u.JyroType.String,description:"The delimiter to split on"}],returnType:u.JyroType.Array,description:"Splits a string into an array using a delimiter",examples:['Split("a,b,c", ",") # Returns ["a", "b", "c"]']},{name:"Join",category:"String",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to join"},{name:"separator",type:u.JyroType.String,description:"The separator between elements"}],returnType:u.JyroType.String,description:"Joins an array into a string with a separator",examples:['Join(["a", "b", "c"], ",") # Returns "a,b,c"']},{name:"ToNumber",category:"String",parameters:[{name:"str",type:u.JyroType.String,description:"The string to convert"}],returnType:u.JyroType.Number,description:"Converts a string to a number",examples:['ToNumber("42") # Returns 42','ToNumber("3.14") # Returns 3.14']},{name:"RandomString",category:"String",parameters:[{name:"length",type:u.JyroType.Number,description:"The length of the string to generate"},{name:"characterSet",type:u.JyroType.String,description:"The set of characters to select from (defaults to alphanumeric)",optional:!0}],returnType:u.JyroType.String,description:"Generates a cryptographically secure random string of specified length from a character set",examples:['RandomString(8) # Returns "aB3xK9mP"','RandomString(6, "0123456789") # Returns "483921"']},{name:"Length",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to measure"}],returnType:u.JyroType.Number,description:"Returns the number of elements in an array",examples:["Length([1, 2, 3]) # Returns 3"]},{name:"First",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to get first element from"}],returnType:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean,u.JyroType.Object,u.JyroType.Array],description:"Returns the first element of an array, or null if empty",examples:["First([1, 2, 3]) # Returns 1"]},{name:"Last",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to get last element from"}],returnType:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean,u.JyroType.Object,u.JyroType.Array],description:"Returns the last element of an array, or null if empty",examples:["Last([1, 2, 3]) # Returns 3"]},{name:"Append",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to append to"},{name:"value",type:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean,u.JyroType.Object,u.JyroType.Array],description:"The value to append"}],returnType:u.JyroType.Array,description:"Adds a value to the end of an array and returns the modified array",examples:["Append([1, 2], 3) # Returns [1, 2, 3]"]},{name:"Pop",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to remove from"}],returnType:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean,u.JyroType.Object,u.JyroType.Array],description:"Removes and returns the last element from an array",examples:["Pop([1, 2, 3]) # Returns 3 and modifies array to [1, 2]"]},{name:"IndexOf",category:"Array",parameters:[{name:"source",type:[u.JyroType.String,u.JyroType.Array],description:"The string or array to search"},{name:"search",type:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean,u.JyroType.Object,u.JyroType.Array],description:"The value to find"}],returnType:u.JyroType.Number,description:"Returns the index of the first occurrence of a value in a string or array, or -1 if not found",examples:['IndexOf("Hello", "ell") # Returns 1',"IndexOf([1, 2, 3], 2) # Returns 1"]},{name:"Insert",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to insert into"},{name:"index",type:u.JyroType.Number,description:"The index to insert at"},{name:"value",type:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean,u.JyroType.Object,u.JyroType.Array],description:"The value to insert"}],returnType:u.JyroType.Array,description:"Inserts a value at a specific index in an array",examples:["Insert([1, 3], 1, 2) # Returns [1, 2, 3]"]},{name:"RemoveAt",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to remove from"},{name:"index",type:u.JyroType.Number,description:"The index to remove"}],returnType:u.JyroType.Array,description:"Removes the element at a specific index from an array",examples:["RemoveAt([1, 2, 3], 1) # Returns [1, 3]"]},{name:"RemoveLast",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to remove from"}],returnType:u.JyroType.Array,description:"Removes the last element from an array and returns the modified array",examples:["RemoveLast([1, 2, 3]) # Returns [1, 2]"]},{name:"Clear",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to clear"}],returnType:u.JyroType.Array,description:"Removes all elements from an array",examples:["Clear([1, 2, 3]) # Returns []"]},{name:"Filter",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to filter"},{name:"field",type:u.JyroType.String,description:"The field name to check"},{name:"operator",type:u.JyroType.String,description:"The comparison operator (==, !=, <, >, <=, >=)"},{name:"value",type:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean],description:"The value to compare against"}],returnType:u.JyroType.Array,description:"Filters array elements based on a field condition",examples:['Filter(Data.users, "age", ">=", 18) # Returns users 18 or older']},{name:"CountIf",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to count"},{name:"field",type:u.JyroType.String,description:"The field name to check"},{name:"operator",type:u.JyroType.String,description:"The comparison operator"},{name:"value",type:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean],description:"The value to compare against"}],returnType:u.JyroType.Number,description:"Counts array elements that match a field condition",examples:['CountIf(Data.users, "active", "==", true) # Returns count of active users']},{name:"Any",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to search"},{name:"field",type:u.JyroType.String,description:'Field name or nested path (e.g., "address.city")'},{name:"operator",type:u.JyroType.String,description:"Comparison operator (==, !=, <, <=, >, >=)"},{name:"value",type:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean],description:"The value to compare against"}],returnType:u.JyroType.Boolean,description:"Returns true if ANY element matches the condition. Short-circuits on first match. Returns false for empty arrays.",examples:['Any(Data.users, "role", "==", "admin") # Returns true if any user is admin']},{name:"All",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to check"},{name:"field",type:u.JyroType.String,description:'Field name or nested path (e.g., "address.city")'},{name:"operator",type:u.JyroType.String,description:"Comparison operator (==, !=, <, <=, >, >=)"},{name:"value",type:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean],description:"The value to compare against"}],returnType:u.JyroType.Boolean,description:"Returns true if ALL elements match the condition. Short-circuits on first non-match. Returns true for empty arrays (vacuous truth).",examples:['All(Data.users, "verified", "==", true) # Returns true if all users are verified']},{name:"Find",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to search"},{name:"field",type:u.JyroType.String,description:'Field name or nested path (e.g., "address.city")'},{name:"operator",type:u.JyroType.String,description:"Comparison operator (==, !=, <, <=, >, >=)"},{name:"value",type:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean],description:"The value to compare against"}],returnType:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean,u.JyroType.Object,u.JyroType.Array],description:"Returns the first element matching the condition, or null if no match. More efficient than First(Filter(...)).",examples:['Find(Data.users, "id", "==", 123) # Returns the user with id 123']},{name:"Sort",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to sort"}],returnType:u.JyroType.Array,description:"Sorts an array in ascending order (numbers or strings)",examples:["Sort([3, 1, 2]) # Returns [1, 2, 3]"]},{name:"SortByField",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array of objects to sort"},{name:"field",type:u.JyroType.String,description:"The field name to sort by"},{name:"direction",type:u.JyroType.String,description:'Sort direction ("asc" or "desc")'}],returnType:u.JyroType.Array,description:"Sorts an array of objects by a specific field",examples:['SortByField(Data.users, "age", "desc") # Sorts by age descending']},{name:"Reverse",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to reverse"}],returnType:u.JyroType.Array,description:"Reverses the order of elements in an array",examples:["Reverse([1, 2, 3]) # Returns [3, 2, 1]"]},{name:"MergeArrays",category:"Array",parameters:[{name:"arrays",type:u.JyroType.Array,description:"Multiple arrays to merge (variadic)"}],returnType:u.JyroType.Array,description:"Merges multiple arrays into a single array, concatenating all elements in order",examples:["MergeArrays([1, 2], [3, 4], [5]) # Returns [1, 2, 3, 4, 5]"]},{name:"Take",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The source array to take elements from"},{name:"count",type:u.JyroType.Number,description:"The number of elements to take from the beginning"}],returnType:u.JyroType.Array,description:"Returns a new array containing the first n elements from a source array without modifying the original",examples:["Take([1, 2, 3, 4, 5], 3) # Returns [1, 2, 3]"]},{name:"GroupBy",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array of objects to group"},{name:"fieldName",type:u.JyroType.String,description:'The field name or nested path to group by (e.g., "status" or "address.city")'}],returnType:u.JyroType.Object,description:"Groups an array of objects by a specified field, returning an object where keys are the distinct field values and values are arrays of matching items",examples:['GroupBy(orders, "status") # Returns { "pending": [...], "completed": [...] }']},{name:"RandomChoice",category:"Array",parameters:[{name:"arr",type:u.JyroType.Array,description:"The array to select a random element from"}],returnType:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean,u.JyroType.Object,u.JyroType.Array],description:"Selects a random element from an array, or returns null if empty",examples:['RandomChoice(["red", "blue", "green"]) # Returns a random color']},{name:"Min",category:"Math",parameters:[{name:"values",type:[u.JyroType.Number,u.JyroType.Array],description:"Numbers to compare (variadic or single array)"}],returnType:[u.JyroType.Number,u.JyroType.Null],description:"Returns the minimum numeric value, or null if no numeric arguments provided",examples:["Min(5, 10, 3) # Returns 3","Min([5, 10, 3]) # Returns 3"]},{name:"Max",category:"Math",parameters:[{name:"values",type:[u.JyroType.Number,u.JyroType.Array],description:"Numbers to compare (variadic or single array)"}],returnType:[u.JyroType.Number,u.JyroType.Null],description:"Returns the maximum numeric value, or null if no numeric arguments provided",examples:["Max(5, 10, 3) # Returns 10","Max([5, 10, 3]) # Returns 10"]},{name:"Sum",category:"Math",parameters:[{name:"values",type:[u.JyroType.Number,u.JyroType.Array],description:"Numbers to sum (variadic or single array)"}],returnType:[u.JyroType.Number,u.JyroType.Null],description:"Returns the sum of all numeric values, or null if no numeric arguments provided",examples:["Sum(1, 2, 3, 4) # Returns 10","Sum([1, 2, 3, 4]) # Returns 10"]},{name:"Average",category:"Math",parameters:[{name:"values",type:[u.JyroType.Number,u.JyroType.Array],description:"Numbers to average (variadic or single array)"}],returnType:[u.JyroType.Number,u.JyroType.Null],description:"Returns the arithmetic mean of all numeric values, or null if no numeric arguments provided",examples:["Average(10, 20, 30) # Returns 20","Average([10, 20, 30]) # Returns 20"]},{name:"Median",category:"Math",parameters:[{name:"values",type:[u.JyroType.Number,u.JyroType.Array],description:"Numbers to find median of (variadic or single array)"}],returnType:[u.JyroType.Number,u.JyroType.Null],description:"Returns the median (middle value) of all numeric values, or null if no numeric arguments provided",examples:["Median(1, 3, 5) # Returns 3","Median([1, 3, 5, 7]) # Returns 4"]},{name:"Mode",category:"Math",parameters:[{name:"values",type:[u.JyroType.Number,u.JyroType.Array],description:"Numbers to find mode of (variadic or single array)"}],returnType:[u.JyroType.Number,u.JyroType.Null],description:"Returns the most frequently occurring value, or null if no numeric arguments provided",examples:["Mode(1, 2, 2, 3) # Returns 2","Mode([1, 2, 2, 3, 3, 3]) # Returns 3"]},{name:"Abs",category:"Math",parameters:[{name:"num",type:u.JyroType.Number,description:"The number"}],returnType:u.JyroType.Number,description:"Returns the absolute value of a number",examples:["Abs(-5) # Returns 5"]},{name:"Round",category:"Math",parameters:[{name:"num",type:u.JyroType.Number,description:"The number to round"},{name:"decimals",type:u.JyroType.Number,description:"Number of decimal places"}],returnType:u.JyroType.Number,description:"Rounds a number to a specified number of decimal places",examples:["Round(3.14159, 2) # Returns 3.14"]},{name:"RandomInt",category:"Math",parameters:[{name:"min",type:u.JyroType.Number,description:"The inclusive lower bound (or exclusive upper bound if only one argument)",optional:!0},{name:"max",type:u.JyroType.Number,description:"The exclusive upper bound"}],returnType:u.JyroType.Number,description:"Generates a cryptographically secure random integer. RandomInt(max) returns [0, max). RandomInt(min, max) returns [min, max).",examples:["RandomInt(10) # Returns 0-9","RandomInt(1, 7) # Returns 1-6 (dice roll)"]},{name:"Now",category:"DateTime",parameters:[],returnType:u.JyroType.String,description:"Returns the current UTC date and time in ISO 8601 format",examples:['Now() # Returns "2025-11-17T12:00:00Z"']},{name:"Today",category:"DateTime",parameters:[],returnType:u.JyroType.String,description:"Returns the current UTC date at midnight in ISO 8601 format",examples:['Today() # Returns "2025-11-17T00:00:00Z"']},{name:"ParseDate",category:"DateTime",parameters:[{name:"str",type:u.JyroType.String,description:"The date string to parse"}],returnType:u.JyroType.String,description:"Parses a date string and returns it in ISO 8601 format",examples:['ParseDate("2025-11-17") # Returns ISO 8601 date']},{name:"FormatDate",category:"DateTime",parameters:[{name:"date",type:u.JyroType.String,description:"The date in ISO format"},{name:"format",type:u.JyroType.String,description:".NET date format pattern"}],returnType:u.JyroType.String,description:"Formats a date using a .NET format pattern",examples:['FormatDate(Now(), "yyyy-MM-dd") # Returns "2025-11-17"']},{name:"DateAdd",category:"DateTime",parameters:[{name:"date",type:u.JyroType.String,description:"The date in ISO format"},{name:"amount",type:u.JyroType.Number,description:"Amount to add (can be negative)"},{name:"unit",type:u.JyroType.String,description:"Unit: days, weeks, months, years, hours, minutes, seconds"}],returnType:u.JyroType.String,description:"Adds a time interval to a date",examples:['DateAdd(Today(), 7, "days") # Adds 7 days']},{name:"DateDiff",category:"DateTime",parameters:[{name:"endDate",type:u.JyroType.String,description:"The end date"},{name:"startDate",type:u.JyroType.String,description:"The start date"},{name:"unit",type:u.JyroType.String,description:"Unit to return difference in"}],returnType:u.JyroType.Number,description:"Calculates the difference between two dates",examples:['DateDiff("2025-12-31", "2025-01-01", "days") # Returns 364']},{name:"DatePart",category:"DateTime",parameters:[{name:"date",type:u.JyroType.String,description:"The date in ISO format"},{name:"part",type:u.JyroType.String,description:"Part: year, month, day, hour, minute, second, dayofweek, dayofyear"}],returnType:u.JyroType.Number,description:"Extracts a specific part from a date",examples:['DatePart(Now(), "year") # Returns 2025']},{name:"TypeOf",category:"Utility",parameters:[{name:"value",type:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean,u.JyroType.Object,u.JyroType.Array],description:"The value to check"}],returnType:u.JyroType.String,description:"Returns the type name of a value",examples:['TypeOf(42) # Returns "number"','TypeOf([1, 2]) # Returns "array"']},{name:"IsNull",category:"Utility",parameters:[{name:"value",type:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean,u.JyroType.Object,u.JyroType.Array],description:"The value to check"}],returnType:u.JyroType.Boolean,description:"Returns true if the value is null",examples:["IsNull(null) # Returns true"]},{name:"Exists",category:"Utility",parameters:[{name:"value",type:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean,u.JyroType.Object,u.JyroType.Array],description:"The value to check"}],returnType:u.JyroType.Boolean,description:"Returns true if the value is not null",examples:["Exists(Data.user) # Returns true if user exists"]},{name:"Equal",category:"Utility",parameters:[{name:"a",type:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean,u.JyroType.Object,u.JyroType.Array],description:"First value"},{name:"b",type:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean,u.JyroType.Object,u.JyroType.Array],description:"Second value"}],returnType:u.JyroType.Boolean,description:"Performs deep equality comparison",examples:["Equal([1, 2], [1, 2]) # Returns true"]},{name:"NotEqual",category:"Utility",parameters:[{name:"a",type:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean,u.JyroType.Object,u.JyroType.Array],description:"First value"},{name:"b",type:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean,u.JyroType.Object,u.JyroType.Array],description:"Second value"}],returnType:u.JyroType.Boolean,description:"Returns true if values are not deeply equal",examples:["NotEqual([1, 2], [1, 3]) # Returns true"]},{name:"Base64Encode",category:"Utility",parameters:[{name:"str",type:u.JyroType.String,description:"The string to encode"}],returnType:u.JyroType.String,description:"Encodes a string to Base64",examples:['Base64Encode("hello") # Returns "aGVsbG8="']},{name:"Base64Decode",category:"Utility",parameters:[{name:"str",type:u.JyroType.String,description:"The Base64 string to decode"}],returnType:u.JyroType.String,description:"Decodes a Base64 string",examples:['Base64Decode("aGVsbG8=") # Returns "hello"']},{name:"NewGuid",category:"Utility",parameters:[],returnType:u.JyroType.String,description:"Generates a new GUID string",examples:['NewGuid() # Returns "a1b2c3d4-e5f6-7890-abcd-ef1234567890"']},{name:"CallScript",category:"Utility",parameters:[{name:"source",type:u.JyroType.String,description:"The script source code"},{name:"data",type:u.JyroType.Object,description:"The data object to pass"}],returnType:u.JyroType.Object,description:"Executes a child script with cycle detection",examples:['CallScript("Data.result = Data.value * 2", { "value": 5 })']},{name:"Keys",category:"Utility",parameters:[{name:"obj",type:u.JyroType.Object,description:"The object to extract keys from"}],returnType:u.JyroType.Array,description:"Returns an array containing all property names (keys) of an object",examples:['Keys({"name": "Alice", "age": 30}) # Returns ["name", "age"]']},{name:"Merge",category:"Utility",parameters:[{name:"objects",type:u.JyroType.Object,description:"Objects to merge (variadic, 0-10 arguments)"}],returnType:u.JyroType.Object,description:"Merges multiple objects into a new object. Later arguments override earlier ones (shallow merge). Non-object arguments are silently skipped.",examples:['Merge({"a": 1}, {"b": 2}) # Returns {"a": 1, "b": 2}',"Merge(defaults, userConfig) # Override defaults with user config"]},{name:"InvokeRestMethod",category:"Utility",parameters:[{name:"url",type:u.JyroType.String,description:"The URL to call"},{name:"method",type:u.JyroType.String,description:"HTTP method (GET, POST, PUT, DELETE). Defaults to GET",optional:!0},{name:"headers",type:u.JyroType.Object,description:"Request headers as key-value pairs",optional:!0},{name:"body",type:[u.JyroType.Null,u.JyroType.Number,u.JyroType.String,u.JyroType.Boolean,u.JyroType.Object,u.JyroType.Array],description:"Request body (automatically JSON-serialized)",optional:!0}],returnType:u.JyroType.Object,description:"Executes HTTP REST API calls. Returns object with statusCode, isSuccessStatusCode, content, headers. Must be enabled via .WithRestApi()",examples:['InvokeRestMethod("https://api.example.com/users", "GET")','InvokeRestMethod("https://api.example.com/users", "POST", {"Content-Type": "application/json"}, newUser)']},{name:"RegexMatch",category:"Regex",parameters:[{name:"text",type:u.JyroType.String,description:"The source text to search"},{name:"pattern",type:u.JyroType.String,description:"The regex pattern to match"}],returnType:[u.JyroType.String,u.JyroType.Null],description:"Extracts the first regex match as a string, or null if no match",examples:['RegexMatch("Hello World", "W\\\\w+") # Returns "World"']},{name:"RegexMatchAll",category:"Regex",parameters:[{name:"text",type:u.JyroType.String,description:"The source text to search"},{name:"pattern",type:u.JyroType.String,description:"The regex pattern to match"}],returnType:u.JyroType.Array,description:"Extracts all regex matches as an array of strings. Returns empty array if no matches.",examples:['RegexMatchAll("cat bat rat", "\\\\w+at") # Returns ["cat", "bat", "rat"]']},{name:"RegexTest",category:"Regex",parameters:[{name:"text",type:u.JyroType.String,description:"The source text to search"},{name:"pattern",type:u.JyroType.String,description:"The regex pattern to match"}],returnType:u.JyroType.Boolean,description:"Tests if the pattern matches anywhere in the text",examples:['RegexTest("hello@example.com", "\\\\w+@\\\\w+\\\\.\\\\w+") # Returns true']},{name:"RegexMatchDetail",category:"Regex",parameters:[{name:"text",type:u.JyroType.String,description:"The source text to search"},{name:"pattern",type:u.JyroType.String,description:"The regex pattern to match"}],returnType:[u.JyroType.Object,u.JyroType.Null],description:"Extracts the first match with metadata (match, index, groups), or null if no match",examples:['RegexMatchDetail("john@example.com", "(\\\\w+)@(\\\\w+)\\\\.(\\\\w+)") # Returns { match: "john@example.com", index: 0, groups: ["john", "example", "com"] }']}];function Np(e){return Je.STDLIB_FUNCTIONS.find(t=>t.name.toLowerCase()===e.toLowerCase())}function xp(){return Je.STDLIB_FUNCTIONS.map(e=>e.name)}function Op(e){return Je.STDLIB_FUNCTIONS.filter(t=>t.category===e)}Je.FUNCTION_CATEGORIES=["String","Array","Math","DateTime","Utility","Regex"]});var De=Gn(ms());var di=class e{constructor(t,n,r,i){this._uri=t,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let n=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(n,r)}return this._content}update(t,n){for(let r of t)if(e.isIncremental(r)){let i=Kl(r.range),a=this.offsetAt(i.start),d=this.offsetAt(i.end);this._content=this._content.substring(0,a)+r.text+this._content.substring(d,this._content.length);let m=Math.max(i.start.line,0),S=Math.max(i.end.line,0),D=this._lineOffsets,w=Gl(r.text,!1,a);if(S-m===w.length)for(let M=0,A=w.length;M<A;M++)D[M+m+1]=w[M];else w.length<1e4?D.splice(m+1,S-m,...w):this._lineOffsets=D=D.slice(0,m+1).concat(w,D.slice(S+1));let k=r.text.length-(d-a);if(k!==0)for(let M=m+1+w.length,A=D.length;M<A;M++)D[M]=D[M]+k}else if(e.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=Gl(this._content,!0)),this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:t};for(;r<i;){let d=Math.floor((r+i)/2);n[d]>t?i=d:r=d+1}let a=r-1;return t=this.ensureBeforeEOL(t,n[a]),{line:a,character:t-n[a]}}offsetAt(t){let n=this.getLineOffsets();if(t.line>=n.length)return this._content.length;if(t.line<0)return 0;let r=n[t.line];if(t.character<=0)return r;let i=t.line+1<n.length?n[t.line+1]:this._content.length,a=Math.min(r+t.character,i);return this.ensureBeforeEOL(a,r)}ensureBeforeEOL(t,n){for(;t>n&&Xl(this._content.charCodeAt(t-1));)t--;return t}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}},fi;(function(e){function t(i,a,d,m){return new di(i,a,d,m)}e.create=t;function n(i,a,d){if(i instanceof di)return i.update(a,d),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}e.update=n;function r(i,a){let d=i.getText(),m=gs(a.map(qp),(w,k)=>{let M=w.range.start.line-k.range.start.line;return M===0?w.range.start.character-k.range.start.character:M}),S=0,D=[];for(let w of m){let k=i.offsetAt(w.range.start);if(k<S)throw new Error("Overlapping edit");k>S&&D.push(d.substring(S,k)),w.newText.length&&D.push(w.newText),S=i.offsetAt(w.range.end)}return D.push(d.substr(S)),D.join("")}e.applyEdits=r})(fi||(fi={}));function gs(e,t){if(e.length<=1)return e;let n=e.length/2|0,r=e.slice(0,n),i=e.slice(n);gs(r,t),gs(i,t);let a=0,d=0,m=0;for(;a<r.length&&d<i.length;)t(r[a],i[d])<=0?e[m++]=r[a++]:e[m++]=i[d++];for(;a<r.length;)e[m++]=r[a++];for(;d<i.length;)e[m++]=i[d++];return e}function Gl(e,t,n=0){let r=t?[n]:[];for(let i=0;i<e.length;i++){let a=e.charCodeAt(i);Xl(a)&&(a===13&&i+1<e.length&&e.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}function Xl(e){return e===13||e===10}function Kl(e){let t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function qp(e){let t=Kl(e.range);return t!==e.range?{newText:e.newText,range:t}:e}var xn=Gn(ys());var Tt=Gn(ms()),td=Gn(ys()),un=class{constructor(t,n,r={warnOnHostFunctions:!0}){this.diagnostics=[];this.symbols=[];this.keywords=["var","if","then","else","elseif","end","switch","do","case","default","while","foreach","in","return","fail","break","continue","true","false","null","and","or","not","is","Data"];this.typeKeywords=["number","string","boolean","object","array"];this.functionNames=(0,td.getAllFunctionNames)();this.text=t,this.uri=n,this.options=r,this.lines=t.split(`
`).map(i=>i.replace(/\r$/,""))}analyze(){return this.diagnostics=[],this.symbols=[],this.checkSyntax(),this.extractSymbols(),this.validateSemantics(),this.diagnostics}getSymbols(){return this.symbols.length===0&&this.extractSymbols(),this.symbols}checkSyntax(){let t=[],n=0;if(this.lines.forEach((r,i)=>{let a=r.trim();if(a.startsWith("#")||a.length===0)return;let d=a.replace(/#.*$/,""),m=this.removeStringLiterals(d);this.hasBalancedStrings(r)||this.addDiagnostic(i,0,i,r.length,"Unclosed string literal",Tt.DiagnosticSeverity.Error);let S=(r.match(/\(/g)||[]).length,D=(r.match(/\)/g)||[]).length,w=(r.match(/\{/g)||[]).length,k=(r.match(/\}/g)||[]).length,M=(r.match(/\[/g)||[]).length,A=(r.match(/\]/g)||[]).length;if(!/^\s*elseif\b/i.test(a)&&/\b(if|while|foreach|switch)\b/.test(m)){let I=m.match(/\b(if|while|foreach|switch)\b/);I&&(t.push({type:I[1],line:i}),(I[1]==="while"||I[1]==="foreach")&&n++)}if(/\bend\b/.test(m))if(t.length===0)this.addDiagnostic(i,0,i,a.length,'Unexpected "end" without matching block start',Tt.DiagnosticSeverity.Error);else{let I=t.pop();(I.type==="while"||I.type==="foreach")&&n--}if(/\b(break|continue)\b/.test(m)&&n===0&&this.addDiagnostic(i,0,i,a.length,`"${m.includes("break")?"break":"continue"}" can only be used inside loops`,Tt.DiagnosticSeverity.Error),/^\s*var\s+/.test(a)){let I=a.match(/^var\s+\w+\s*:\s*(\w+)/);if(I&&!this.typeKeywords.includes(I[1])){let K=r.indexOf(I[1]);this.addDiagnostic(i,K,i,K+I[1].length,`Unknown type "${I[1]}". Expected: number, string, boolean, object, or array`,Tt.DiagnosticSeverity.Error)}}if(/=[^=]/.test(a)&&/==/.test(a),this.options.warnOnHostFunctions){let I=/\b([A-Z][a-zA-Z0-9]*)\s*\(/g,K;for(;(K=I.exec(m))!==null;){let H=K[1];if(!this.keywords.includes(H)&&!this.functionNames.includes(H)){let y=r.length-r.trimStart().length+K.index;this.addDiagnostic(i,y,i,y+H.length,`Referenced function "${H}" will need to be made available at runtime`,Tt.DiagnosticSeverity.Information)}}}}),t.length>0){let r=t[t.length-1];this.addDiagnostic(r.line,0,r.line,this.lines[r.line].length,`Unclosed "${r.type}" block - missing "end"`,Tt.DiagnosticSeverity.Error)}}extractSymbols(){let t=new Set;this.lines.forEach((n,r)=>{let i=n.trim();if(i.startsWith("#")||i.length===0)return;let a=/\bvar\s+(\w+)(?:\s*:\s*(\w+))?/g,d;for(;(d=a.exec(i))!==null;){let w=d[1],k=d[2],M=n.indexOf(w,d.index);this.symbols.push({name:w,type:k,line:r,character:M})}let m=i.match(/\bforeach\s+(\w+)\s+in\b/);if(m){let w=m[1],k=n.indexOf(w);this.symbols.push({name:w,type:"iterator",line:r,character:k})}let S=/\b([a-zA-Z_]\w*(?:\.[a-zA-Z_]\w*)+)\s*=/g,D;for(;(D=S.exec(i))!==null;){let w=D[1];if(!t.has(w)){t.add(w);let k=n.indexOf(w);this.symbols.push({name:w,type:"property",line:r,character:k})}}})}validateSemantics(){let t=new Set(this.symbols.map(n=>n.name));t.add("Data"),this.lines.forEach((n,r)=>{let i=n.trim();if(i.startsWith("#")||i.length===0)return;let d=this.removeStringLiterals(n).replace(/#.*$/,""),m=/\b([a-zA-Z_]\w*)\b/g,S;for(;(S=m.exec(d))!==null;){let D=S[1],w=S.index,k=w+D.length;w>0&&d[w-1]==="."||d.substring(k).match(/^\s*\(/)||this.keywords.includes(D)||this.typeKeywords.includes(D)||this.functionNames.some(A=>A.toLowerCase()===D.toLowerCase())||t.has(D)||this.addDiagnostic(r,w,r,w+D.length,`Undefined variable "${D}"`,Tt.DiagnosticSeverity.Warning)}})}hasBalancedStrings(t){let n=!1;for(let r=0;r<t.length;r++)if(t[r]==='"'){let a=0,d=r-1;for(;d>=0&&t[d]==="\\";)a++,d--;a%2===0&&(n=!n)}return!n}removeStringLiterals(t){let n="",r=!1,i=-1;for(let a=0;a<t.length;a++){let d=t[a];if(d==='"'){let m=0,S=a-1;for(;S>=0&&t[S]==="\\";)m++,S--;m%2===0&&(r?(n+='""',r=!1):(r=!0,i=a))}else r||(n+=d)}return r&&(n+=t.substring(i)),n}addDiagnostic(t,n,r,i,a,d){this.diagnostics.push({severity:d,range:{start:{line:t,character:n},end:{line:r,character:i}},message:a,source:"jyro"})}};var me=(0,De.createConnection)(De.ProposedFeatures.all),rt=new De.TextDocuments(fi),rd={maxNumberOfProblems:100,warnOnHostFunctions:!0,trace:{server:"off"}},id=rd,pi=new Map,hi=!1,bs=!1,Mp=!1;me.onInitialize(e=>{me.console.log("Jyro Language Server initializing...");let t=e.capabilities;hi=!!(t.workspace&&t.workspace.configuration),bs=!!(t.workspace&&t.workspace.workspaceFolders),Mp=!!(t.textDocument&&t.textDocument.publishDiagnostics&&t.textDocument.publishDiagnostics.relatedInformation);let n={capabilities:{textDocumentSync:De.TextDocumentSyncKind.Incremental,completionProvider:{resolveProvider:!0,triggerCharacters:[".","("]},hoverProvider:!0,signatureHelpProvider:{triggerCharacters:["(",","]},definitionProvider:!0,documentFormattingProvider:!0}};return bs&&(n.capabilities.workspace={workspaceFolders:{supported:!0}}),me.console.log("Server capabilities: "+JSON.stringify(n.capabilities)),n});me.onInitialized(()=>{hi&&me.client.register(De.DidChangeConfigurationNotification.type,void 0),bs&&me.workspace.onDidChangeWorkspaceFolders(e=>{me.console.log("Workspace folder change event received.")})});me.onDidChangeConfiguration(e=>{hi?pi.clear():id=e.settings.jyro||rd,rt.all().forEach(od)});function Ep(e){if(!hi)return Promise.resolve(id);let t=pi.get(e);return t||(t=me.workspace.getConfiguration({scopeUri:e,section:"jyro"}),pi.set(e,t)),t}rt.onDidClose(e=>{pi.delete(e.document.uri)});rt.onDidChangeContent(e=>{od(e.document)});async function od(e){let t=await Ep(e.uri),n=e.getText(),a=new un(n,e.uri,{warnOnHostFunctions:t.warnOnHostFunctions}).analyze().slice(0,t.maxNumberOfProblems);me.sendDiagnostics({uri:e.uri,diagnostics:a})}me.onCompletion(e=>{let t=rt.get(e.textDocument.uri);if(!t)return[];let n=t.getText(),r=t.offsetAt(e.position),i=e.position.line,a=t.getText({start:{line:i,character:0},end:{line:i,character:Number.MAX_SAFE_INTEGER}}),d=[];return["var","if","then","else","elseif","end","switch","do","case","default","while","foreach","in","return","fail","break","continue","true","false","null","and","or","not","is"].forEach(k=>{d.push({label:k,kind:De.CompletionItemKind.Keyword,data:{type:"keyword",value:k}})}),["number","string","boolean","object","array"].forEach(k=>{d.push({label:k,kind:De.CompletionItemKind.TypeParameter,data:{type:"type",value:k}})}),xn.STDLIB_FUNCTIONS.forEach(k=>{let M=k.parameters.map(A=>A.name).join(", ");d.push({label:k.name,kind:De.CompletionItemKind.Function,detail:`${k.name}(${M})`,documentation:k.description,insertText:`${k.name}($1)`,insertTextFormat:2,data:{type:"function",signature:k}})}),d.push({label:"Data",kind:De.CompletionItemKind.Variable,detail:"Root data object",documentation:"The root data object for accessing input data",data:{type:"data"}}),new un(n,t.uri).getSymbols().forEach(k=>{d.push({label:k.name,kind:De.CompletionItemKind.Variable,detail:k.type||"unknown",data:{type:"variable",symbol:k}})}),d});me.onCompletionResolve(e=>{if(e.data&&e.data.type==="function"){let t=e.data.signature;e.documentation={kind:"markdown",value:[`**${t.name}** - ${t.category}`,"",t.description,"","**Parameters:**",...t.parameters.map(n=>`- \`${n.name}\` (${Array.isArray(n.type)?n.type.join(" | "):n.type}): ${n.description}`),"","**Returns:** "+(Array.isArray(t.returnType)?t.returnType.join(" | "):t.returnType),...t.examples?["","**Examples:**",...t.examples.map(n=>`\`\`\`jyro
${n}
\`\`\``)]:[]].join(`
`)}}return e});me.onHover(e=>{let t=rt.get(e.textDocument.uri);if(!t)return null;let n=t.getText(),r=t.offsetAt(e.position),i=jp(t,e.position);if(!i)return null;let a=t.getText(i),d=(0,xn.getFunctionSignature)(a);if(d){let D=d.parameters.map(w=>`${w.name}: ${Array.isArray(w.type)?w.type.join(" | "):w.type}`).join(", ");return{contents:{kind:"markdown",value:[`**${d.name}**(${D})`,"",d.description,"",`*Category: ${d.category}*`,"","**Returns:** "+(Array.isArray(d.returnType)?d.returnType.join(" | "):d.returnType),...d.examples?["","**Example:**",`\`\`\`jyro
${d.examples[0]}
\`\`\``]:[]].join(`
`)},range:i}}let S=[{word:"var",desc:"Variable declaration keyword"},{word:"if",desc:"Conditional statement"},{word:"then",desc:"Used after condition in if/case statements"},{word:"else",desc:"Alternative branch in conditional"},{word:"elseif",desc:"Alternative conditional branch (else if combined)"},{word:"end",desc:"Ends a block (if/while/foreach/switch)"},{word:"while",desc:"While loop statement"},{word:"do",desc:"Marks the start of a loop body (while/foreach)"},{word:"foreach",desc:"Foreach loop for iterating arrays/objects"},{word:"in",desc:"Separates iterator variable from collection in foreach"},{word:"switch",desc:"Switch statement for multiple conditions"},{word:"case",desc:"Case in switch statement"},{word:"default",desc:"Default case in switch statement"},{word:"break",desc:"Exits the current loop"},{word:"continue",desc:"Skips to the next iteration of the loop"},{word:"return",desc:"Returns from the script with an optional value"},{word:"fail",desc:"Terminates script execution with an error. Can include an optional message."},{word:"Data",desc:"The shared data context between the script and its host"}].find(D=>D.word===a);return S?{contents:{kind:"markdown",value:`**${S.word}**

${S.desc}`},range:i}:null});me.onSignatureHelp(e=>{let t=rt.get(e.textDocument.uri);if(!t)return null;let n=t.getText(),r=t.offsetAt(e.position),i=0,a=-1;for(let A=r-1;A>=0;A--)if(n[A]===")")i++;else if(n[A]==="("){if(i===0){a=A;break}i--}if(a===-1)return null;let m=n.substring(0,a).trim().match(/(\w+)\s*$/);if(!m)return null;let S=m[1],D=(0,xn.getFunctionSignature)(S);if(!D)return null;let k=(n.substring(a+1,r).match(/,/g)||[]).length,M=Math.min(k,D.parameters.length-1);return{signatures:[{label:`${D.name}(${D.parameters.map(A=>`${A.name}: ${Array.isArray(A.type)?A.type.join(" | "):A.type}`).join(", ")})`,documentation:D.description,parameters:D.parameters.map(A=>({label:A.name,documentation:A.description}))}],activeSignature:0,activeParameter:M}});me.onDefinition(e=>{let t=rt.get(e.textDocument.uri);if(!t)return null;let n=t.getText(),r=Ap(t,e.position);if(!r)return null;let a=new un(n,e.textDocument.uri).getSymbols(),d=a.find(m=>m.name===r.fullPath);return d||(d=a.find(m=>m.name===r.word)),d?{uri:e.textDocument.uri,range:{start:{line:d.line,character:d.character},end:{line:d.line,character:d.character+d.name.length}}}:null});function jp(e,t){let n=e.getText(),r=e.offsetAt(t),i=r,a=r;for(;i>0&&/\w/.test(n[i-1]);)i--;for(;a<n.length&&/\w/.test(n[a]);)a++;return i===a?null:{start:e.positionAt(i),end:e.positionAt(a)}}function Ap(e,t){let r=e.getText().split(`
`);if(t.line>=r.length)return null;let i=r[t.line],a=t.character,d=a,m=a;for(;d>0&&/\w/.test(i[d-1]);)d--;for(;m<i.length&&/\w/.test(i[m]);)m++;if(d===m)return null;let S=i.substring(d,m),D=d,w=m;for(;D>1&&i[D-1]==="."&&/\w/.test(i[D-2]);)for(D-=2;D>0&&/\w/.test(i[D-1]);)D--;for(;w<i.length-1&&i[w]==="."&&/\w/.test(i[w+1]);)for(w++;w<i.length&&/\w/.test(i[w]);)w++;let k=i.substring(D,w);return{word:S,fullPath:k}}function Ip(e,t){let n=e.split(/\r?\n/),r=[],i=t.insertSpaces?" ".repeat(t.tabSize):"	",a=0,d=/^(if|while|foreach|switch)\b/,m=/^(else|elseif|case|default)\b/,S=/^end\b/,D=/\b(then|do)\b/,w=/\bend\b/,k=[];for(let M of n){let A=Fp(M);k.push(...A)}for(let M=0;M<k.length;M++){let A=k[M];if(A.trim()===""){r.push("");continue}let ne=A.trim();ne=Jp(ne);let I=ne.toLowerCase(),K=nd(ne,"{"),H=nd(ne,"}"),v=w.test(I)&&!S.test(I);(S.test(I)||m.test(I))&&(a=Math.max(0,a-1)),ne.startsWith("}")&&(a=Math.max(0,a-H));let y=i.repeat(a)+ne;r.push(y),v||(d.test(I)&&D.test(I)||m.test(I))&&a++,ne.startsWith("}")?a=a+K:a=Math.max(0,a+K-H)}return r.join(`
`)}function nd(e,t){let n=0,r=!1;for(let i=0;i<e.length;i++){let a=e[i];if(a==='"'&&(i===0||e[i-1]!=="\\")){r=!r;continue}!r&&a===t&&n++}return n}function Fp(e){let t=e.trim();if(t===""||t.startsWith("#"))return[e];let n=t.toLowerCase(),r=/^(if|while|foreach|switch|else|elseif|case|default)\b/.test(n)&&/\b(then|do)\b/.test(n)&&/\bend\s*$/.test(n),i=[],a="",d=!1,m=0;for(;m<t.length;){let S=t[m];if(S==='"'&&(m===0||t[m-1]!=="\\")){d=!d,a+=S,m++;continue}if(d){a+=S,m++;continue}if(m===0||/\s/.test(t[m-1])){let w=t.slice(m);w.match(/^(var|if|elseif|while|foreach|switch|return|fail|break|continue)\b/i)&&a.trim()!==""&&(i.push(a.trim()),a=""),r||w.match(/^end\b/i)&&a.trim()!==""&&(i.push(a.trim()),a="")}a+=S,m++}return a.trim()!==""&&i.push(a.trim()),i.length>0?i:[e]}function Jp(e){if(e.trim().startsWith("#"))return e;let t="",n=!1,r=0;for(;r<e.length;){let d=e[r],m=e[r+1]||"",S=t[t.length-1]||"";if(d==='"'&&(r===0||e[r-1]!=="\\")){n=!n,t+=d,r++;continue}if(n){t+=d,r++;continue}if(d==="#"){t+=e.substring(r);break}let D=d+m;if(["==","!=","<=",">=","++","--"].includes(D)){t.endsWith(" ")&&(t=t.slice(0,-1)),D==="++"||D==="--"?t+=D:t+=" "+D+" ",r+=2;continue}if(["+","-","*","/","%","<",">","="].includes(d)){if((d==="-"||d==="+")&&(S===""||S==="("||S===","||S==="="||S===" "&&/[=<>!+\-*/%,(]/.test(t[t.length-2]||""))&&/\d/.test(m)){t+=d,r++;continue}t.endsWith(" ")&&(t=t.slice(0,-1)),t+=" "+d+" ",r++;continue}t+=d,r++}let i=t.match(/^(\s*)/)?.[1]||"",a=t.substring(i.length);return a=a.replace(/  +/g," "),a=a.replace(/\b(\w+)\s+\(/g,(d,m)=>["if","while","foreach","switch"].includes(m)?m+" (":m+"("),i+a.trim()}me.onDocumentFormatting(e=>{me.console.log("Document formatting requested");let t=rt.get(e.textDocument.uri);if(!t)return me.console.log("Document not found"),[];let n=t.getText(),r=Ip(n,{tabSize:e.options.tabSize,insertSpaces:e.options.insertSpaces}),i=t.lineCount-1,a=t.getText({start:{line:i,character:0},end:{line:i,character:Number.MAX_SAFE_INTEGER}}).length;return[{range:{start:{line:0,character:0},end:{line:i,character:a}},newText:r}]});rt.listen(me);me.listen();
